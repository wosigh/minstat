
(function(){if(typeof this["loadFirebugConsole"]=="function"){this["loadFirebugConsole"]();}else{this.console=this.console||{};var cn=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];var i=0,tn;while((tn=cn[i++])){if(!console[tn]){(function(){var tcn=tn+"";console[tcn]=('log'in console)?function(){var a=Array.apply({},arguments);a.unshift(tcn+":");console["log"](a.join(" "));}:function(){}
console[tcn]._fake=true;})();}}}
if(typeof dojo=="undefined"){this.dojo={_scopeName:"dojo",_scopePrefix:"",_scopePrefixArgs:"",_scopeSuffix:"",_scopeMap:{},_scopeMapRev:{}};}
var d=dojo;if(typeof dijit=="undefined"){this.dijit={_scopeName:"dijit"};}
if(typeof dojox=="undefined"){this.dojox={_scopeName:"dojox"};}
if(!d._scopeArgs){d._scopeArgs=[dojo,dijit,dojox];}
d.global=this;d.config={isDebug:false,debugAtAllCosts:false};if(typeof djConfig!="undefined"){for(var opt in djConfig){d.config[opt]=djConfig[opt];}}
dojo.locale=d.config.locale;var rev="$Rev: 20518 $".match(/\d+/);dojo.version={major:1,minor:4,patch:0,flag:"dev",revision:rev?+rev[0]:NaN,toString:function(){with(d.version){return major+"."+minor+"."+patch+flag+" ("+revision+")";}}}
if(typeof OpenAjax!="undefined"){OpenAjax.hub.registerLibrary(dojo._scopeName,"http://dojotoolkit.org",d.version.toString());}
var extraNames,extraLen,empty={};for(var i in{toString:1}){extraNames=[];break;}
dojo._extraNames=extraNames=extraNames||["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];extraLen=extraNames.length;dojo._mixin=function(target,source){var name,s,i;for(name in source){s=source[name];if(!(name in target)||(target[name]!==s&&(!(name in empty)||empty[name]!==s))){target[name]=s;}}
if(extraLen&&source){for(i=0;i<extraLen;++i){name=extraNames[i];s=source[name];if(!(name in target)||(target[name]!==s&&(!(name in empty)||empty[name]!==s))){target[name]=s;}}}
return target;}
dojo.mixin=function(obj,props){if(!obj){obj={};}
for(var i=1,l=arguments.length;i<l;i++){d._mixin(obj,arguments[i]);}
return obj;}
dojo._getProp=function(parts,create,context){var obj=context||d.global;for(var i=0,p;obj&&(p=parts[i]);i++){if(i==0&&d._scopeMap[p]){p=d._scopeMap[p];}
obj=(p in obj?obj[p]:(create?obj[p]={}:undefined));}
return obj;}
dojo.setObject=function(name,value,context){var parts=name.split("."),p=parts.pop(),obj=d._getProp(parts,true,context);return obj&&p?(obj[p]=value):undefined;}
dojo.getObject=function(name,create,context){return d._getProp(name.split("."),create,context);}
dojo.exists=function(name,obj){return!!d.getObject(name,false,obj);}
dojo["eval"]=function(scriptFragment){return d.global.eval?d.global.eval(scriptFragment):eval(scriptFragment);}
d.deprecated=d.experimental=function(){};})();
(function(){var d=dojo;d.mixin(d,{_loadedModules:{},_inFlightCount:0,_hasResource:{},_modulePrefixes:{dojo:{name:"dojo",value:"."},doh:{name:"doh",value:"../util/doh"},tests:{name:"tests",value:"tests"}},_moduleHasPrefix:function(module){var mp=d._modulePrefixes;return!!(mp[module]&&mp[module].value);},_getModulePrefix:function(module){var mp=d._modulePrefixes;if(d._moduleHasPrefix(module)){return mp[module].value;}
return module;},_loadedUrls:[],_postLoad:false,_loaders:[],_unloaders:[],_loadNotifying:false});dojo._loadPath=function(relpath,module,cb){var uri=((relpath.charAt(0)=='/'||relpath.match(/^\w+:/))?"":d.baseUrl)+relpath;try{return!module?d._loadUri(uri,cb):d._loadUriAndCheck(uri,module,cb);}catch(e){console.error(e);return false;}}
dojo._loadUri=function(uri,cb){if(d._loadedUrls[uri]){return true;}
d._inFlightCount++;var contents=d._getText(uri,true);if(contents){d._loadedUrls[uri]=true;d._loadedUrls.push(uri);if(cb){contents='('+contents+')';}else{contents=d._scopePrefix+contents+d._scopeSuffix;}
if(!d.isIE){contents+="\r\n//@ sourceURL="+uri;}
var value=d["eval"](contents);if(cb){cb(value);}}
if(--d._inFlightCount==0&&d._postLoad&&d._loaders.length){setTimeout(function(){if(d._inFlightCount==0){d._callLoaded();}},0);}
return!!contents;}
dojo._loadUriAndCheck=function(uri,moduleName,cb){var ok=false;try{ok=d._loadUri(uri,cb);}catch(e){console.error("failed loading "+uri+" with error: "+e);}
return!!(ok&&d._loadedModules[moduleName]);}
dojo.loaded=function(){d._loadNotifying=true;d._postLoad=true;var mll=d._loaders;d._loaders=[];for(var x=0;x<mll.length;x++){mll[x]();}
d._loadNotifying=false;if(d._postLoad&&d._inFlightCount==0&&mll.length){d._callLoaded();}}
dojo.unloaded=function(){var mll=d._unloaders;while(mll.length){(mll.pop())();}}
d._onto=function(arr,obj,fn){if(!fn){arr.push(obj);}else if(fn){var func=(typeof fn=="string")?obj[fn]:fn;arr.push(function(){func.call(obj);});}}
dojo.ready=dojo.addOnLoad=function(obj,functionName){d._onto(d._loaders,obj,functionName);if(d._postLoad&&d._inFlightCount==0&&!d._loadNotifying){d._callLoaded();}}
var dca=d.config.addOnLoad;if(dca){d.addOnLoad[(dca instanceof Array?"apply":"call")](d,dca);}
dojo._modulesLoaded=function(){if(d._postLoad){return;}
if(d._inFlightCount>0){console.warn("files still in flight!");return;}
d._callLoaded();}
dojo._callLoaded=function(){if(typeof setTimeout=="object"||(d.config.useXDomain&&d.isOpera)){setTimeout(d.isAIR?function(){d.loaded();}:d._scopeName+".loaded();",0);}else{d.loaded();}}
dojo._getModuleSymbols=function(modulename){var syms=modulename.split(".");for(var i=syms.length;i>0;i--){var parentModule=syms.slice(0,i).join(".");if(i==1&&!d._moduleHasPrefix(parentModule)){syms[0]="../"+syms[0];}else{var parentModulePath=d._getModulePrefix(parentModule);if(parentModulePath!=parentModule){syms.splice(0,i,parentModulePath);break;}}}
return syms;}
dojo._global_omit_module_check=false;dojo.loadInit=function(init){init();}
dojo._loadModule=dojo.require=function(moduleName,omitModuleCheck){omitModuleCheck=d._global_omit_module_check||omitModuleCheck;var module=d._loadedModules[moduleName];if(module){return module;}
var relpath=d._getModuleSymbols(moduleName).join("/")+'.js';var modArg=!omitModuleCheck?moduleName:null;var ok=d._loadPath(relpath,modArg);if(!ok&&!omitModuleCheck){throw new Error("Could not load '"+moduleName+"'; last tried '"+relpath+"'");}
if(!omitModuleCheck&&!d._isXDomain){module=d._loadedModules[moduleName];if(!module){throw new Error("symbol '"+moduleName+"' is not defined after loading '"+relpath+"'");}}
return module;}
dojo.provide=function(resourceName){resourceName=resourceName+"";return(d._loadedModules[resourceName]=d.getObject(resourceName,true));}
dojo.platformRequire=function(modMap){var common=modMap.common||[];var result=common.concat(modMap[d._name]||modMap["default"]||[]);for(var x=0;x<result.length;x++){var curr=result[x];if(curr.constructor==Array){d._loadModule.apply(d,curr);}else{d._loadModule(curr);}}}
dojo.requireIf=function(condition,resourceName){if(condition===true){var args=[];for(var i=1;i<arguments.length;i++){args.push(arguments[i]);}
d.require.apply(d,args);}}
dojo.requireAfterIf=d.requireIf;dojo.registerModulePath=function(module,prefix){d._modulePrefixes[module]={name:module,value:prefix};}
dojo.requireLocalization=function(moduleName,bundleName,locale,availableFlatLocales){d.require("dojo.i18n");d.i18n._requireLocalization.apply(d.hostenv,arguments);};var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");dojo._Url=function(){var n=null,_a=arguments,uri=[_a[0]];for(var i=1;i<_a.length;i++){if(!_a[i]){continue;}
var relobj=new d._Url(_a[i]+""),uriobj=new d._Url(uri[0]+"");if(relobj.path==""&&!relobj.scheme&&!relobj.authority&&!relobj.query){if(relobj.fragment!=n){uriobj.fragment=relobj.fragment;}
relobj=uriobj;}else if(!relobj.scheme){relobj.scheme=uriobj.scheme;if(!relobj.authority){relobj.authority=uriobj.authority;if(relobj.path.charAt(0)!="/"){var path=uriobj.path.substring(0,uriobj.path.lastIndexOf("/")+1)+relobj.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}
relobj.path=segs.join("/");}}}
uri=[];if(relobj.scheme){uri.push(relobj.scheme,":");}
if(relobj.authority){uri.push("//",relobj.authority);}
uri.push(relobj.path);if(relobj.query){uri.push("?",relobj.query);}
if(relobj.fragment){uri.push("#",relobj.fragment);}}
this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}}
dojo._Url.prototype.toString=function(){return this.uri;};dojo.moduleUrl=function(module,url){var loc=d._getModuleSymbols(module).join('/');if(!loc){return null;}
if(loc.lastIndexOf("/")!=loc.length-1){loc+="/";}
var colonIndex=loc.indexOf(":");if(loc.charAt(0)!="/"&&(colonIndex==-1||colonIndex>loc.indexOf("/"))){loc=d.baseUrl+loc;}
return new d._Url(loc,url);}})();
if(typeof window!='undefined'){dojo.isBrowser=true;dojo._name="browser";(function(){var d=dojo;if(document&&document.getElementsByTagName){var scripts=document.getElementsByTagName("script");var rePkg=/dojo(\.xd)?\.js(\W|$)/i;for(var i=0;i<scripts.length;i++){var src=scripts[i].getAttribute("src");if(!src){continue;}
var m=src.match(rePkg);if(m){if(!d.config.baseUrl){d.config.baseUrl=src.substring(0,m.index);}
var cfg=scripts[i].getAttribute("djConfig");if(cfg){var cfgo=eval("({ "+cfg+" })");for(var x in cfgo){dojo.config[x]=cfgo[x];}}
break;}}}
d.baseUrl=d.config.baseUrl;var n=navigator;var dua=n.userAgent,dav=n.appVersion,tv=parseFloat(dav);if(dua.indexOf("Opera")>=0){d.isOpera=tv;}
if(dua.indexOf("AdobeAIR")>=0){d.isAIR=1;}
d.isKhtml=(dav.indexOf("Konqueror")>=0)?tv:0;d.isWebKit=parseFloat(dua.split("WebKit/")[1])||undefined;d.isChrome=parseFloat(dua.split("Chrome/")[1])||undefined;d.isMac=dav.indexOf("Macintosh")>=0;var index=Math.max(dav.indexOf("WebKit"),dav.indexOf("Safari"),0);if(index&&!dojo.isChrome){d.isSafari=parseFloat(dav.split("Version/")[1]);if(!d.isSafari||parseFloat(dav.substr(index+7))<=419.3){d.isSafari=2;}}
if(dua.indexOf("Gecko")>=0&&!d.isKhtml&&!d.isWebKit){d.isMozilla=d.isMoz=tv;}
if(d.isMoz){d.isFF=parseFloat(dua.split("Firefox/")[1]||dua.split("Minefield/")[1])||undefined;}
if(document.all&&!d.isOpera){d.isIE=parseFloat(dav.split("MSIE ")[1])||undefined;var mode=document.documentMode;if(mode&&mode!=5&&Math.floor(d.isIE)!=mode){d.isIE=mode;}}
if(dojo.isIE&&window.location.protocol==="file:"){dojo.config.ieForceActiveXXhr=true;}
d.isQuirks=document.compatMode=="BackCompat";d.locale=dojo.config.locale||(d.isIE?n.userLanguage:n.language).toLowerCase();d._XMLHTTP_PROGIDS=['Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.4.0'];d._xhrObj=function(){var http,last_e;if(!dojo.isIE||!dojo.config.ieForceActiveXXhr){try{http=new XMLHttpRequest();}catch(e){}}
if(!http){for(var i=0;i<3;++i){var progid=d._XMLHTTP_PROGIDS[i];try{http=new ActiveXObject(progid);}catch(e){last_e=e;}
if(http){d._XMLHTTP_PROGIDS=[progid];break;}}}
if(!http){throw new Error("XMLHTTP not available: "+last_e);}
return http;}
d._isDocumentOk=function(http){var stat=http.status||0,lp=location.protocol;return(stat>=200&&stat<300)||stat==304||stat==1223||(!stat&&(lp=="file:"||lp=="chrome:"||lp=="app:"));}
var owloc=window.location+"";var base=document.getElementsByTagName("base");var hasBase=(base&&base.length>0);d._getText=function(uri,fail_ok){var http=d._xhrObj();if(!hasBase&&dojo._Url){uri=(new dojo._Url(owloc,uri)).toString();}
if(d.config.cacheBust){uri+="";uri+=(uri.indexOf("?")==-1?"?":"&")+String(d.config.cacheBust).replace(/\W+/g,"");}
http.open('GET',uri,false);try{http.send(null);if(!d._isDocumentOk(http)){var err=Error("Unable to load "+uri+" status:"+http.status);err.status=http.status;err.responseText=http.responseText;throw err;}}catch(e){if(fail_ok){return null;}
throw e;}
return http.responseText;}
var _w=window;var _handleNodeEvent=function(evtName,fp){var _a=_w.attachEvent||_w.addEventListener;evtName=_w.attachEvent?evtName:evtName.substring(2);_a(evtName,function(){fp.apply(_w,arguments);},false);};d._windowUnloaders=[];d.windowUnloaded=function(){var mll=d._windowUnloaders;while(mll.length){(mll.pop())();}};var _onWindowUnloadAttached=0;d.addOnWindowUnload=function(obj,functionName){d._onto(d._windowUnloaders,obj,functionName);if(!_onWindowUnloadAttached){_onWindowUnloadAttached=1;_handleNodeEvent("onunload",d.windowUnloaded);}};var _onUnloadAttached=0;d.addOnUnload=function(obj,functionName){d._onto(d._unloaders,obj,functionName);if(!_onUnloadAttached){_onUnloadAttached=1;_handleNodeEvent("onbeforeunload",dojo.unloaded);}};})();dojo._initFired=false;dojo._loadInit=function(e){if(!dojo._initFired){dojo._initFired=true;if(dojo._inFlightCount==0){dojo._modulesLoaded();}}}
if(!dojo.config.afterOnLoad){if(document.addEventListener){document.addEventListener("DOMContentLoaded",dojo._loadInit,false);window.addEventListener("load",dojo._loadInit,false);}else if(window.attachEvent){window.attachEvent("onload",dojo._loadInit);}}
if(dojo.isIE){if(!dojo.config.afterOnLoad){document.write('<scr'+'ipt defer src="//:" '
+'onreadystatechange="if(this.readyState==\'complete\'){'+dojo._scopeName+'._loadInit();}">'
+'</scr'+'ipt>');}
try{document.namespaces.add("v","urn:schemas-microsoft-com:vml");document.createStyleSheet().addRule("v\\:*","behavior:url(#default#VML);  display:inline-block");}catch(e){}}}
(function(){var mp=dojo.config["modulePaths"];if(mp){for(var param in mp){dojo.registerModulePath(param,mp[param]);}}})();if(dojo.config.isDebug){dojo.require("dojo._firebug.firebug");}
if(dojo.config.debugAtAllCosts){dojo.config.useXDomain=true;dojo.require("dojo._base._loader.loader_xd");dojo.require("dojo._base._loader.loader_debug");dojo.require("dojo.i18n");}
dojo.provide("dojo._base.lang");(function(){var d=dojo;dojo.isString=function(it){return(typeof it=="string"||it instanceof String);}
dojo.isArray=function(it){return it&&(it instanceof Array||typeof it=="array");}
dojo.isFunction=(function(){var _isFunction=function(it){var t=typeof it;return it&&(t=="function"||it instanceof Function)&&!it.nodeType;};return d.isSafari?function(it){if(typeof it=="function"&&it=="[object NodeList]"){return false;}
return _isFunction(it);}:_isFunction;})();dojo.isObject=function(it){return it!==undefined&&(it===null||typeof it=="object"||d.isArray(it)||d.isFunction(it));}
dojo.isArrayLike=function(it){return it&&it!==undefined&&!d.isString(it)&&!d.isFunction(it)&&!(it.tagName&&it.tagName.toLowerCase()=='form')&&(d.isArray(it)||isFinite(it.length));}
dojo.isAlien=function(it){return it&&!d.isFunction(it)&&/\{\s*\[native code\]\s*\}/.test(String(it));}
dojo.extend=function(constructor,props){for(var i=1,l=arguments.length;i<l;i++){d._mixin(constructor.prototype,arguments[i]);}
return constructor;}
dojo._hitchArgs=function(scope,method){var pre=d._toArray(arguments,2);var named=d.isString(method);return function(){var args=d._toArray(arguments);var f=named?(scope||d.global)[method]:method;return f&&f.apply(scope||this,pre.concat(args));}}
dojo.hitch=function(scope,method){if(arguments.length>2){return d._hitchArgs.apply(d,arguments);}
if(!method){method=scope;scope=null;}
if(d.isString(method)){scope=scope||d.global;if(!scope[method]){throw(['dojo.hitch: scope["',method,'"] is null (scope="',scope,'")'].join(''));}
return function(){return scope[method].apply(scope,arguments||[]);};}
return!scope?method:function(){return method.apply(scope,arguments||[]);};}
dojo.delegate=dojo._delegate=(function(){function TMP(){}
return function(obj,props){TMP.prototype=obj;var tmp=new TMP();TMP.prototype=null;if(props){d._mixin(tmp,props);}
return tmp;}})();var efficient=function(obj,offset,startWith){return(startWith||[]).concat(Array.prototype.slice.call(obj,offset||0));};var slow=function(obj,offset,startWith){var arr=startWith||[];for(var x=offset||0;x<obj.length;x++){arr.push(obj[x]);}
return arr;};dojo._toArray=d.isIE?function(obj){return((obj.item)?slow:efficient).apply(this,arguments);}:efficient;dojo.partial=function(method){var arr=[null];return d.hitch.apply(d,arr.concat(d._toArray(arguments)));}
var extraNames=d._extraNames,extraLen=extraNames.length,empty={};dojo.clone=function(o){if(!o||typeof o!="object"||d.isFunction(o)){return o;}
if(o.nodeType&&o.cloneNode){return o.cloneNode(true);}
if(o instanceof Date){return new Date(o.getTime());}
var r,i,l,s,name;if(d.isArray(o)){r=[];for(i=0,l=o.length;i<l;++i){if(i in o){r.push(d.clone(o[i]));}}}else{r=o.constructor?new o.constructor():{};}
for(name in o){s=o[name];if(!(name in r)||(r[name]!==s&&(!(name in empty)||empty[name]!==s))){r[name]=d.clone(s);}}
if(extraLen){for(i=0;i<extraLen;++i){name=extraNames[i];s=o[name];if(!(name in r)||(r[name]!==s&&(!(name in empty)||empty[name]!==s))){r[name]=s;}}}
return r;}
dojo.trim=String.prototype.trim?function(str){return str.trim();}:function(str){return str.replace(/^\s\s*/,'').replace(/\s\s*$/,'');};})();
dojo.require("dojo._base.lang");dojo.provide("dojo._base.array");(function(){var _getParts=function(arr,obj,cb){return[(typeof arr=="string")?arr.split(""):arr,obj||dojo.global,(typeof cb=="string")?new Function("item","index","array",cb):cb];};var everyOrSome=function(every,arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];for(var i=0,l=arr.length;i<l;++i){var result=!!_p[2].call(_p[1],arr[i],i,arr);if(every^result){return result;}}
return every;};dojo.mixin(dojo,{indexOf:function(array,value,fromIndex,findLast){var step=1,end=array.length||0,i=0;if(findLast){i=end-1;step=end=-1;}
if(fromIndex!=undefined){i=fromIndex;}
if((findLast&&i>end)||i<end){for(;i!=end;i+=step){if(array[i]==value){return i;}}}
return-1;},lastIndexOf:function(array,value,fromIndex){return dojo.indexOf(array,value,fromIndex,true);},forEach:function(arr,callback,thisObject){if(!arr||!arr.length){return;}
var _p=_getParts(arr,thisObject,callback);arr=_p[0];for(var i=0,l=arr.length;i<l;++i){_p[2].call(_p[1],arr[i],i,arr);}},every:function(arr,callback,thisObject){return everyOrSome(true,arr,callback,thisObject);},some:function(arr,callback,thisObject){return everyOrSome(false,arr,callback,thisObject);},map:function(arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];var outArr=(arguments[3]?(new arguments[3]()):[]);for(var i=0,l=arr.length;i<l;++i){outArr.push(_p[2].call(_p[1],arr[i],i,arr));}
return outArr;},filter:function(arr,callback,thisObject){var _p=_getParts(arr,thisObject,callback);arr=_p[0];var outArr=[];for(var i=0,l=arr.length;i<l;++i){if(_p[2].call(_p[1],arr[i],i,arr)){outArr.push(arr[i]);}}
return outArr;}});})();
dojo.provide("dojo._base.declare");dojo.require("dojo._base.lang");dojo.require("dojo._base.array");(function(){var d=dojo,op=Object.prototype,isF=d.isFunction,mix=d._mixin,xtor=new Function,counter=0;function err(msg){throw new Error("declare: "+msg);}
function c3mro(bases){var result=[],roots=[{cls:0,refs:[]}],nameMap={},clsCount=1,l=bases.length,i=0,j,lin,base,top,proto,rec,name,refs;for(;i<l;++i){base=bases[i];if(!base){err("mixin #"+i+" is null");}
lin=base._meta?base._meta.bases:[base];top=0;for(j=lin.length-1;j>=0;--j){proto=lin[j].prototype;if(!proto.hasOwnProperty("declaredClass")){proto.declaredClass="uniqName_"+(counter++);}
name=proto.declaredClass;if(!nameMap.hasOwnProperty(name)){nameMap[name]={count:0,refs:[],cls:lin[j]};++clsCount;}
rec=nameMap[name];if(top&&top!==rec){rec.refs.push(top);++top.count;}
top=rec;}
++top.count;roots[0].refs.push(top);}
while(roots.length){top=roots.pop();result.push(top.cls);--clsCount;while(refs=top.refs,refs.length==1){top=refs[0];if(!top||--top.count){top=0;break;}
result.push(top.cls);--clsCount;}
if(top){for(i=0,l=refs.length;i<l;++i){top=refs[i];if(!--top.count){roots.push(top);}}}}
if(clsCount){err("can't build consistent linearization");}
result[0]=base?base._meta&&base===result[result.length-base._meta.bases.length]?base._meta.bases.length:1:0;return result;}
function findInherited(self,caller,name){var meta=self.constructor._meta,bases=meta.bases,l=bases.length,i,f,opf,cache,currentBase,proto;name=name||caller.nom;if(!name){err("can't deduce a name to call inherited()");}
if(name=="constructor"?meta.chains.constructor!=="manual":meta.chains.hasOwnProperty(name)){err("calling chained method as inherited: "+name);}
cache=self._inherited;currentBase=bases[cache.pos];meta=currentBase&&currentBase._meta;proto=currentBase&&currentBase.prototype;if(!currentBase||cache.name!=name||!(meta?(meta.hidden[name]===caller||proto.hasOwnProperty(name)&&proto[name]===caller):(proto[name]===caller))){for(i=0;i<l;++i){currentBase=bases[i];meta=currentBase._meta;proto=currentBase.prototype;if(meta?(meta.hidden[name]===caller||proto.hasOwnProperty(name)&&proto[name]===caller):(proto[name]===caller)){break;}}
cache.name=name;cache.pos=i<l?i:-1;}
i=cache.pos;opf=op[name];while(++i<l){currentBase=bases[i];proto=currentBase.prototype;if(currentBase._meta){if(proto.hasOwnProperty(name)){f=proto[name];break;}}else{f=proto[name];if(f&&f!==opf){break;}}}
cache.pos=i;return i<l&&f||name!="constructor"&&opf;}
function getInherited(args,a){var name;if(typeof args=="string"){name=args;args=a;}
return findInherited(this,args.callee,name);}
function inherited(args,a,f){var name;if(typeof args=="string"){name=args;args=a;a=f;}
f=findInherited(this,args.callee,name);return f?f.apply(this,a||args):undefined;}
function isInstanceOf(cls){var bases=this.constructor._meta.bases;for(var i=0,l=bases.length;i<l;++i){if(bases[i]===cls){return true;}}
return this instanceof cls;}
function safeMixin(target,source){var name,t,i=0,l=d._extraNames.length;for(name in source){t=source[name];if((t!==op[name]||!(name in op))&&name!="constructor"){if(isF(t)){t.nom=name;}
target[name]=t;}}
for(;i<l;++i){name=d._extraNames[i];t=source[name];if((t!==op[name]||!(name in op))&&name!="constructor"){if(isF(t)){t.nom=name;}
target[name]=t;}}}
function extend(source){safeMixin(this.prototype,source);}
function chainedConstructor(bases,ctorSpecial){return function(){var a=arguments,args=a,a0=a[0],f,i,m,h,l=bases.length,preArgs;this._inherited={};if(ctorSpecial&&(a0&&a0.preamble||this.preamble)){preArgs=new Array(bases.length);preArgs[0]=a;for(i=0;;){a0=a[0];if(a0){f=a0.preamble;if(f){a=f.apply(this,a)||a;}}
f=bases[i].prototype;f=f.hasOwnProperty("preamble")&&f.preamble;if(f){a=f.apply(this,a)||a;}
if(++i==l){break;}
preArgs[i]=a;}}
for(i=l-1;i>=0;--i){f=bases[i];m=f._meta;if(m){h=m.hidden;f=h.hasOwnProperty("constructor")&&h.constructor;}
if(f){f.apply(this,preArgs?preArgs[i]:a);}}
f=this.postscript;if(f){f.apply(this,args);}};}
function simpleConstructor(bases){return function(){var a=arguments,f,i=0,l=bases.length;this._inherited={};for(;i<l;++i){f=bases[i];m=f._meta;if(m){h=m.hidden;f=h.hasOwnProperty("constructor")&&h.constructor;}
if(f){f.apply(this,a);break;}}
f=this.postscript;if(f){f.apply(this,a);}};}
function chain(name,bases,reversed){return function(){var b,m,h,f,i=0,l=bases.length,step=1;if(reversed){i=l-1;step=l=-1;}
for(;i!=l;i+=step){f=0;b=bases[i];m=b._meta;if(m){h=m.hidden;f=h.hasOwnProperty(name)&&h[name];}else{f=b.prototype[name];}
if(f){f.apply(this,arguments);}}};}
d.declare=function(className,superclass,props){var proto,i,t,ctor,name,bases,mixins=1,chains={};if(typeof className!="string"){props=superclass;superclass=className;className="";}
props=props||{};if(d.isArray(superclass)){bases=c3mro(superclass);t=bases[0];mixins=bases.length-t;superclass=bases[mixins];}else{bases=[0];if(superclass){t=superclass._meta;bases=bases.concat(t?t.bases:superclass);}}
if(superclass){if(superclass._meta){xtor.prototype=superclass._meta.chains;chains=new xtor;}
for(i=mixins-1;;--i){xtor.prototype=superclass.prototype;proto=new xtor;if(!i){break;}
t=bases[i];if(t._meta){mix(chains,t._meta.chains);mix(proto,t._meta.hidden);}else{mix(proto,t.prototype);}
ctor=new Function;ctor.superclass=superclass;ctor.prototype=proto;superclass=proto.constructor=ctor;}}else{proto={};}
safeMixin(proto,props);t=props.constructor;if(t!==op.constructor){t.nom="constructor";proto.constructor=t;}
xtor.prototype=0;if(proto.hasOwnProperty("-chains-")){mix(chains,proto["-chains-"]);}
bases[0]=ctor=chains.constructor==="manual"?simpleConstructor(bases):chainedConstructor(bases,!chains.hasOwnProperty("constructor"));ctor._meta={bases:bases,hidden:props,chains:chains};ctor.superclass=superclass&&superclass.prototype;ctor.extend=extend;ctor.prototype=proto;proto.constructor=ctor;proto.getInherited=getInherited;proto.inherited=inherited;proto.isInstanceOf=isInstanceOf;if(className){proto.declaredClass=className;d.setObject(className,ctor);}
for(name in chains){if(proto[name]&&typeof chains[name]=="string"&&name!="constructor"){t=proto[name]=chain(name,bases,chains[name]==="after");t.nom=name;}}
return ctor;};d.safeMixin=safeMixin;})();
dojo.provide("dojo._base.connect");dojo.require("dojo._base.lang");dojo._listener={getDispatcher:function(){return function(){var ap=Array.prototype,c=arguments.callee,ls=c._listeners,t=c.target;var r=t&&t.apply(this,arguments);var lls;if(!dojo.isRhino){lls=[].concat(ls);}else{lls=[];for(var i in ls){lls[i]=ls[i];}}
for(var i in lls){if(!(i in ap)){lls[i].apply(this,arguments);}}
return r;}},add:function(source,method,listener){source=source||dojo.global;var f=source[method];if(!f||!f._listeners){var d=dojo._listener.getDispatcher();d.target=f;d._listeners=[];f=source[method]=d;}
return f._listeners.push(listener);},remove:function(source,method,handle){var f=(source||dojo.global)[method];if(f&&f._listeners&&handle--){delete f._listeners[handle];}}};dojo.connect=function(obj,event,context,method,dontFix){var a=arguments,args=[],i=0;args.push(dojo.isString(a[0])?null:a[i++],a[i++]);var a1=a[i+1];args.push(dojo.isString(a1)||dojo.isFunction(a1)?a[i++]:null,a[i++]);for(var l=a.length;i<l;i++){args.push(a[i]);}
return dojo._connect.apply(this,args);}
dojo._connect=function(obj,event,context,method){var l=dojo._listener,h=l.add(obj,event,dojo.hitch(context,method));return[obj,event,h,l];}
dojo.disconnect=function(handle){if(handle&&handle[0]!==undefined){dojo._disconnect.apply(this,handle);delete handle[0];}}
dojo._disconnect=function(obj,event,handle,listener){listener.remove(obj,event,handle);}
dojo._topics={};dojo.subscribe=function(topic,context,method){return[topic,dojo._listener.add(dojo._topics,topic,dojo.hitch(context,method))];}
dojo.unsubscribe=function(handle){if(handle){dojo._listener.remove(dojo._topics,handle[0],handle[1]);}}
dojo.publish=function(topic,args){var f=dojo._topics[topic];if(f){f.apply(this,args||[]);}}
dojo.connectPublisher=function(topic,obj,event){var pf=function(){dojo.publish(topic,arguments);}
return(event)?dojo.connect(obj,event,pf):dojo.connect(obj,pf);};
dojo.provide("dojo._base.Deferred");dojo.require("dojo._base.lang");dojo.Deferred=function(canceller){this.chain=[];this.id=this._nextId();this.fired=-1;this.paused=0;this.results=[null,null];this.canceller=canceller;this.silentlyCancelled=false;this.isFiring=false;};dojo.extend(dojo.Deferred,{_nextId:(function(){var n=1;return function(){return n++;};})(),cancel:function(){var err;if(this.fired==-1){if(this.canceller){err=this.canceller(this);}else{this.silentlyCancelled=true;}
if(this.fired==-1){if(!(err instanceof Error)){var res=err;var msg="Deferred Cancelled";if(err&&err.toString){msg+=": "+err.toString();}
err=new Error(msg);err.dojoType="cancel";err.cancelResult=res;}
this.errback(err);}}else if((this.fired==0)&&(this.results[0]instanceof dojo.Deferred)){this.results[0].cancel();}},_resback:function(res){this.fired=((res instanceof Error)?1:0);this.results[this.fired]=res;this._fire();},_check:function(){if(this.fired!=-1){if(!this.silentlyCancelled){throw new Error("already called!");}
this.silentlyCancelled=false;return;}},callback:function(res){this._check();this._resback(res);},errback:function(res){this._check();if(!(res instanceof Error)){res=new Error(res);}
this._resback(res);},addBoth:function(cb,cbfn){var enclosed=dojo.hitch.apply(dojo,arguments);return this.addCallbacks(enclosed,enclosed);},addCallback:function(cb,cbfn){return this.addCallbacks(dojo.hitch.apply(dojo,arguments));},addErrback:function(cb,cbfn){return this.addCallbacks(null,dojo.hitch.apply(dojo,arguments));},addCallbacks:function(cb,eb){this.chain.push([cb,eb])
if(this.fired>=0&&!this.isFiring){this._fire();}
return this;},_fire:function(){this.isFiring=true;var chain=this.chain;var fired=this.fired;var res=this.results[fired];var self=this;var cb=null;while((chain.length>0)&&(this.paused==0)){var f=chain.shift()[fired];if(!f){continue;}
var func=function(){var ret=f(res);if(typeof ret!="undefined"){res=ret;}
fired=((res instanceof Error)?1:0);if(res instanceof dojo.Deferred){cb=function(res){self._resback(res);self.paused--;if((self.paused==0)&&(self.fired>=0)){self._fire();}}
this.paused++;}};if(dojo.config.debugAtAllCosts){func.call(this);}else{try{func.call(this);}catch(err){fired=1;res=err;}}}
this.fired=fired;this.results[fired]=res;this.isFiring=false;if((cb)&&(this.paused)){res.addBoth(cb);}}});
dojo.provide("dojo._base.json");dojo.fromJson=function(json){return eval("("+json+")");}
dojo._escapeString=function(str){return('"'+str.replace(/(["\\])/g,'\\$1')+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r");}
dojo.toJsonIndentStr="\t";dojo.toJson=function(it,prettyPrint,_indentStr){if(it===undefined){return"undefined";}
var objtype=typeof it;if(objtype=="number"||objtype=="boolean"){return it+"";}
if(it===null){return"null";}
if(dojo.isString(it)){return dojo._escapeString(it);}
var recurse=arguments.callee;var newObj;_indentStr=_indentStr||"";var nextIndent=prettyPrint?_indentStr+dojo.toJsonIndentStr:"";var tf=it.__json__||it.json;if(dojo.isFunction(tf)){newObj=tf.call(it);if(it!==newObj){return recurse(newObj,prettyPrint,nextIndent);}}
if(it.nodeType&&it.cloneNode){throw new Error("Can't serialize DOM nodes");}
var sep=prettyPrint?" ":"";var newLine=prettyPrint?"\n":"";if(dojo.isArray(it)){var res=dojo.map(it,function(obj){var val=recurse(obj,prettyPrint,nextIndent);if(typeof val!="string"){val="undefined";}
return newLine+nextIndent+val;});return"["+res.join(","+sep)+newLine+_indentStr+"]";}
if(objtype=="function"){return null;}
var output=[],key;for(key in it){var keyStr,val;if(typeof key=="number"){keyStr='"'+key+'"';}else if(typeof key=="string"){keyStr=dojo._escapeString(key);}else{continue;}
val=recurse(it[key],prettyPrint,nextIndent);if(typeof val!="string"){continue;}
output.push(newLine+nextIndent+keyStr+":"+sep+val);}
return"{"+output.join(","+sep)+newLine+_indentStr+"}";}
dojo.provide("dojo._base.Color");dojo.require("dojo._base.array");dojo.require("dojo._base.lang");(function(){var d=dojo;dojo.Color=function(color){if(color){this.setColor(color);}};dojo.Color.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:d.config.transparentColor||[255,255,255]};dojo.extend(dojo.Color,{r:255,g:255,b:255,a:1,_set:function(r,g,b,a){var t=this;t.r=r;t.g=g;t.b=b;t.a=a;},setColor:function(color){if(d.isString(color)){d.colorFromString(color,this);}else if(d.isArray(color)){d.colorFromArray(color,this);}else{this._set(color.r,color.g,color.b,color.a);if(!(color instanceof d.Color)){this.sanitize();}}
return this;},sanitize:function(){return this;},toRgb:function(){var t=this;return[t.r,t.g,t.b];},toRgba:function(){var t=this;return[t.r,t.g,t.b,t.a];},toHex:function(){var arr=d.map(["r","g","b"],function(x){var s=this[x].toString(16);return s.length<2?"0"+s:s;},this);return"#"+arr.join("");},toCss:function(includeAlpha){var t=this,rgb=t.r+", "+t.g+", "+t.b;return(includeAlpha?"rgba("+rgb+", "+t.a:"rgb("+rgb)+")";},toString:function(){return this.toCss(true);}});dojo.blendColors=function(start,end,weight,obj){var t=obj||new d.Color();d.forEach(["r","g","b","a"],function(x){t[x]=start[x]+(end[x]-start[x])*weight;if(x!="a"){t[x]=Math.round(t[x]);}});return t.sanitize();};dojo.colorFromRgb=function(color,obj){var m=color.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return m&&dojo.colorFromArray(m[1].split(/\s*,\s*/),obj);};dojo.colorFromHex=function(color,obj){var t=obj||new d.Color(),bits=(color.length==4)?4:8,mask=(1<<bits)-1;color=Number("0x"+color.substr(1));if(isNaN(color)){return null;}
d.forEach(["b","g","r"],function(x){var c=color&mask;color>>=bits;t[x]=bits==4?17*c:c;});t.a=1;return t;};dojo.colorFromArray=function(a,obj){var t=obj||new d.Color();t._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));if(isNaN(t.a)){t.a=1;}
return t.sanitize();};dojo.colorFromString=function(str,obj){var a=d.Color.named[str];return a&&d.colorFromArray(a,obj)||d.colorFromRgb(str,obj)||d.colorFromHex(str,obj);};})();
dojo.provide("dojo._base.window");dojo.doc=window["document"]||null;dojo.body=function(){return dojo.doc.body||dojo.doc.getElementsByTagName("body")[0];}
dojo.setContext=function(globalObject,globalDocument){dojo.global=globalObject;dojo.doc=globalDocument;};dojo.withGlobal=function(globalObject,callback,thisObject,cbArguments){var oldGlob=dojo.global;try{dojo.global=globalObject;return dojo.withDoc.call(null,globalObject.document,callback,thisObject,cbArguments);}finally{dojo.global=oldGlob;}}
dojo.withDoc=function(documentObject,callback,thisObject,cbArguments){var oldDoc=dojo.doc,oldLtr=dojo._bodyLtr,oldQ=dojo.isQuirks;try{dojo.doc=documentObject;delete dojo._bodyLtr;dojo.isQuirks=dojo.doc.compatMode=="BackCompat";if(thisObject&&typeof callback=="string"){callback=thisObject[callback];}
return callback.apply(thisObject,cbArguments||[]);}finally{dojo.doc=oldDoc;delete dojo._bodyLtr;if(oldLtr!==undefined){dojo._bodyLtr=oldLtr;}
dojo.isQuirks=oldQ;}};
dojo.provide("dojo._base.event");dojo.require("dojo._base.connect");(function(){var del=(dojo._event_listener={add:function(node,name,fp){if(!node){return;}
name=del._normalizeEventName(name);fp=del._fixCallback(name,fp);var oname=name;if(!dojo.isIE&&(name=="mouseenter"||name=="mouseleave")){var ofp=fp;name=(name=="mouseenter")?"mouseover":"mouseout";fp=function(e){if(!dojo.isDescendant(e.relatedTarget,node)){return ofp.call(this,e);}}}
node.addEventListener(name,fp,false);return fp;},remove:function(node,event,handle){if(node){event=del._normalizeEventName(event);if(!dojo.isIE&&(event=="mouseenter"||event=="mouseleave")){event=(event=="mouseenter")?"mouseover":"mouseout";}
node.removeEventListener(event,handle,false);}},_normalizeEventName:function(name){return name.slice(0,2)=="on"?name.slice(2):name;},_fixCallback:function(name,fp){return name!="keypress"?fp:function(e){return fp.call(this,del._fixEvent(e,this));};},_fixEvent:function(evt,sender){switch(evt.type){case"keypress":del._setKeyChar(evt);break;}
return evt;},_setKeyChar:function(evt){evt.keyChar=evt.charCode?String.fromCharCode(evt.charCode):'';evt.charOrCode=evt.keyChar||evt.keyCode;},_punctMap:{106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39}});dojo.fixEvent=function(evt,sender){return del._fixEvent(evt,sender);}
dojo.stopEvent=function(evt){evt.preventDefault();evt.stopPropagation();}
var node_listener=dojo._listener;dojo._connect=function(obj,event,context,method,dontFix){var isNode=obj&&(obj.nodeType||obj.attachEvent||obj.addEventListener);var lid=isNode?(dontFix?2:1):0,l=[dojo._listener,del,node_listener][lid];var h=l.add(obj,event,dojo.hitch(context,method));return[obj,event,h,lid];}
dojo._disconnect=function(obj,event,handle,listener){([dojo._listener,del,node_listener][listener]).remove(obj,event,handle);}
dojo.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:dojo.isSafari?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,copyKey:dojo.isMac&&!dojo.isAIR?(dojo.isSafari?91:224):17};var evtCopyKey=dojo.isMac?"metaKey":"ctrlKey";dojo.isCopyKey=function(e){return e[evtCopyKey];};if(dojo.isIE){dojo.mouseButtons={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,button){return e.button&button;},isLeft:function(e){return e.button&1;},isMiddle:function(e){return e.button&4;},isRight:function(e){return e.button&2;}};}else{dojo.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,button){return e.button==button;},isLeft:function(e){return e.button==0;},isMiddle:function(e){return e.button==1;},isRight:function(e){return e.button==2;}};}
if(dojo.isIE){var _trySetKeyCode=function(e,code){try{return(e.keyCode=code);}catch(e){return 0;}}
var iel=dojo._listener;var listenersName=(dojo._ieListenersName="_"+dojo._scopeName+"_listeners");if(!dojo.config._allow_leaks){node_listener=iel=dojo._ie_listener={handlers:[],add:function(source,method,listener){source=source||dojo.global;var f=source[method];if(!f||!f[listenersName]){var d=dojo._getIeDispatcher();d.target=f&&(ieh.push(f)-1);d[listenersName]=[];f=source[method]=d;}
return f[listenersName].push(ieh.push(listener)-1);},remove:function(source,method,handle){var f=(source||dojo.global)[method],l=f&&f[listenersName];if(f&&l&&handle--){delete ieh[l[handle]];delete l[handle];}}};var ieh=iel.handlers;}
dojo.mixin(del,{add:function(node,event,fp){if(!node){return;}
event=del._normalizeEventName(event);if(event=="onkeypress"){var kd=node.onkeydown;if(!kd||!kd[listenersName]||!kd._stealthKeydownHandle){var h=del.add(node,"onkeydown",del._stealthKeyDown);kd=node.onkeydown;kd._stealthKeydownHandle=h;kd._stealthKeydownRefs=1;}else{kd._stealthKeydownRefs++;}}
return iel.add(node,event,del._fixCallback(fp));},remove:function(node,event,handle){event=del._normalizeEventName(event);iel.remove(node,event,handle);if(event=="onkeypress"){var kd=node.onkeydown;if(--kd._stealthKeydownRefs<=0){iel.remove(node,"onkeydown",kd._stealthKeydownHandle);delete kd._stealthKeydownHandle;}}},_normalizeEventName:function(eventName){return eventName.slice(0,2)!="on"?"on"+eventName:eventName;},_nop:function(){},_fixEvent:function(evt,sender){if(!evt){var w=sender&&(sender.ownerDocument||sender.document||sender).parentWindow||window;evt=w.event;}
if(!evt){return(evt);}
evt.target=evt.srcElement;evt.currentTarget=(sender||evt.srcElement);evt.layerX=evt.offsetX;evt.layerY=evt.offsetY;var se=evt.srcElement,doc=(se&&se.ownerDocument)||document;var docBody=((dojo.isIE<6)||(doc["compatMode"]=="BackCompat"))?doc.body:doc.documentElement;var offset=dojo._getIeDocumentElementOffset();evt.pageX=evt.clientX+dojo._fixIeBiDiScrollLeft(docBody.scrollLeft||0)-offset.x;evt.pageY=evt.clientY+(docBody.scrollTop||0)-offset.y;if(evt.type=="mouseover"){evt.relatedTarget=evt.fromElement;}
if(evt.type=="mouseout"){evt.relatedTarget=evt.toElement;}
evt.stopPropagation=del._stopPropagation;evt.preventDefault=del._preventDefault;return del._fixKeys(evt);},_fixKeys:function(evt){switch(evt.type){case"keypress":var c=("charCode"in evt?evt.charCode:evt.keyCode);if(c==10){c=0;evt.keyCode=13;}else if(c==13||c==27){c=0;}else if(c==3){c=99;}
evt.charCode=c;del._setKeyChar(evt);break;}
return evt;},_stealthKeyDown:function(evt){var kp=evt.currentTarget.onkeypress;if(!kp||!kp[listenersName]){return;}
var k=evt.keyCode;var unprintable=k!=13&&k!=32&&k!=27&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey){if(k==3||k==13){return;}else if(c>95&&c<106){c-=48;}else if((!evt.shiftKey)&&(c>=65&&c<=90)){c+=32;}else{c=del._punctMap[c]||c;}}
var faux=del._synthesizeEvent(evt,{type:'keypress',faux:true,charCode:c});kp.call(evt.currentTarget,faux);evt.cancelBubble=faux.cancelBubble;evt.returnValue=faux.returnValue;_trySetKeyCode(evt,faux.keyCode);}},_stopPropagation:function(){this.cancelBubble=true;},_preventDefault:function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey){_trySetKeyCode(this,0);}
this.returnValue=false;}});dojo.stopEvent=function(evt){evt=evt||window.event;del._stopPropagation.call(evt);del._preventDefault.call(evt);}}
del._synthesizeEvent=function(evt,props){var faux=dojo.mixin({},evt,props);del._setKeyChar(faux);faux.preventDefault=function(){evt.preventDefault();};faux.stopPropagation=function(){evt.stopPropagation();};return faux;}
if(dojo.isOpera){dojo.mixin(del,{_fixEvent:function(evt,sender){switch(evt.type){case"keypress":var c=evt.which;if(c==3){c=99;}
c=c<41&&!evt.shiftKey?0:c;if(evt.ctrlKey&&!evt.shiftKey&&c>=65&&c<=90){c+=32;}
return del._synthesizeEvent(evt,{charCode:c});}
return evt;}});}
if(dojo.isWebKit){del._add=del.add;del._remove=del.remove;dojo.mixin(del,{add:function(node,event,fp){if(!node){return;}
var handle=del._add(node,event,fp);if(del._normalizeEventName(event)=="keypress"){handle._stealthKeyDownHandle=del._add(node,"keydown",function(evt){var k=evt.keyCode;var unprintable=k!=13&&k!=32&&(k<48||k>90)&&(k<96||k>111)&&(k<186||k>192)&&(k<219||k>222);if(unprintable||evt.ctrlKey){var c=unprintable?0:k;if(evt.ctrlKey){if(k==3||k==13){return;}else if(c>95&&c<106){c-=48;}else if(!evt.shiftKey&&c>=65&&c<=90){c+=32;}else{c=del._punctMap[c]||c;}}
var faux=del._synthesizeEvent(evt,{type:'keypress',faux:true,charCode:c});fp.call(evt.currentTarget,faux);}});}
return handle;},remove:function(node,event,handle){if(node){if(handle._stealthKeyDownHandle){del._remove(node,"keydown",handle._stealthKeyDownHandle);}
del._remove(node,event,handle);}},_fixEvent:function(evt,sender){switch(evt.type){case"keypress":if(evt.faux){return evt;}
var c=evt.charCode;c=c>=32?c:0;return del._synthesizeEvent(evt,{charCode:c,faux:true});}
return evt;}});}})();if(dojo.isIE){dojo._ieDispatcher=function(args,sender){var ap=Array.prototype,h=dojo._ie_listener.handlers,c=args.callee,ls=c[dojo._ieListenersName],t=h[c.target];var r=t&&t.apply(sender,args);var lls=[].concat(ls);for(var i in lls){var f=h[lls[i]];if(!(i in ap)&&f){f.apply(sender,args);}}
return r;}
dojo._getIeDispatcher=function(){return new Function(dojo._scopeName+"._ieDispatcher(arguments, this)");}
dojo._event_listener._fixCallback=function(fp){var f=dojo._event_listener._fixEvent;return function(e){return fp.call(this,f(e,this));};}}
dojo.require("dojo._base.lang");dojo.provide("dojo._base.html");try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}
if(dojo.isIE||dojo.isOpera){dojo.byId=function(id,doc){if(typeof id!="string"){return id;}
var _d=doc||dojo.doc,te=_d.getElementById(id);if(te&&(te.attributes.id.value==id||te.id==id)){return te;}else{var eles=_d.all[id];if(!eles||eles.nodeName){eles=[eles];}
var i=0;while((te=eles[i++])){if((te.attributes&&te.attributes.id&&te.attributes.id.value==id)||te.id==id){return te;}}}};}else{dojo.byId=function(id,doc){return(typeof id=="string")?(doc||dojo.doc).getElementById(id):id;};}
(function(){var d=dojo;var byId=d.byId;var _destroyContainer=null,_destroyDoc;d.addOnWindowUnload(function(){_destroyContainer=null;});dojo._destroyElement=dojo.destroy=function(node){node=byId(node);try{var doc=node.ownerDocument;if(!_destroyContainer||_destroyDoc!=doc){_destroyContainer=doc.createElement("div");_destroyDoc=doc;}
_destroyContainer.appendChild(node.parentNode?node.parentNode.removeChild(node):node);_destroyContainer.innerHTML="";}catch(e){}};dojo.isDescendant=function(node,ancestor){try{node=byId(node);ancestor=byId(ancestor);while(node){if(node==ancestor){return true;}
node=node.parentNode;}}catch(e){}
return false;};dojo.setSelectable=function(node,selectable){node=byId(node);if(d.isMozilla){node.style.MozUserSelect=selectable?"":"none";}else if(d.isKhtml||d.isWebKit){node.style.KhtmlUserSelect=selectable?"auto":"none";}else if(d.isIE){var v=(node.unselectable=selectable?"":"on");d.query("*",node).forEach("item.unselectable = '"+v+"'");}};var _insertBefore=function(node,ref){var parent=ref.parentNode;if(parent){parent.insertBefore(node,ref);}};var _insertAfter=function(node,ref){var parent=ref.parentNode;if(parent){if(parent.lastChild==ref){parent.appendChild(node);}else{parent.insertBefore(node,ref.nextSibling);}}};dojo.place=function(node,refNode,position){refNode=byId(refNode);if(typeof node=="string"){node=node.charAt(0)=="<"?d._toDom(node,refNode.ownerDocument):byId(node);}
if(typeof position=="number"){var cn=refNode.childNodes;if(!cn.length||cn.length<=position){refNode.appendChild(node);}else{_insertBefore(node,cn[position<0?0:position]);}}else{switch(position){case"before":_insertBefore(node,refNode);break;case"after":_insertAfter(node,refNode);break;case"replace":refNode.parentNode.replaceChild(node,refNode);break;case"only":d.empty(refNode);refNode.appendChild(node);break;case"first":if(refNode.firstChild){_insertBefore(node,refNode.firstChild);break;}
default:refNode.appendChild(node);}}
return node;}
dojo.boxModel="content-box";if(d.isIE){d.boxModel=document.compatMode=="BackCompat"?"border-box":"content-box";}
var gcs;if(d.isWebKit){gcs=function(node){var s;if(node.nodeType==1){var dv=node.ownerDocument.defaultView;s=dv.getComputedStyle(node,null);if(!s&&node.style){node.style.display="";s=dv.getComputedStyle(node,null);}}
return s||{};};}else if(d.isIE){gcs=function(node){return node.nodeType==1?node.currentStyle:{};};}else{gcs=function(node){return node.nodeType==1?node.ownerDocument.defaultView.getComputedStyle(node,null):{};};}
dojo.getComputedStyle=gcs;if(!d.isIE){d._toPixelValue=function(element,value){return parseFloat(value)||0;};}else{d._toPixelValue=function(element,avalue){if(!avalue){return 0;}
if(avalue=="medium"){return 4;}
if(avalue.slice&&avalue.slice(-2)=='px'){return parseFloat(avalue);}
with(element){var sLeft=style.left;var rsLeft=runtimeStyle.left;runtimeStyle.left=currentStyle.left;try{style.left=avalue;avalue=style.pixelLeft;}catch(e){avalue=0;}
style.left=sLeft;runtimeStyle.left=rsLeft;}
return avalue;}}
var px=d._toPixelValue;var astr="DXImageTransform.Microsoft.Alpha";var af=function(n,f){try{return n.filters.item(astr);}catch(e){return f?{}:null;}};dojo._getOpacity=d.isIE?function(node){try{return af(node).Opacity/100;}catch(e){return 1;}}:function(node){return gcs(node).opacity;};dojo._setOpacity=d.isIE?function(node,opacity){var ov=opacity*100;node.style.zoom=1.0;af(node,1).Enabled=!(opacity==1);if(!af(node)){node.style.filter+=" progid:"+astr+"(Opacity="+ov+")";}else{af(node,1).Opacity=ov;}
if(node.nodeName.toLowerCase()=="tr"){d.query("> td",node).forEach(function(i){d._setOpacity(i,opacity);});}
return opacity;}:function(node,opacity){return node.style.opacity=opacity;};var _pixelNamesCache={left:true,top:true};var _pixelRegExp=/margin|padding|width|height|max|min|offset/;var _toStyleValue=function(node,type,value){type=type.toLowerCase();if(d.isIE){if(value=="auto"){if(type=="height"){return node.offsetHeight;}
if(type=="width"){return node.offsetWidth;}}
if(type=="fontweight"){switch(value){case 700:return"bold";case 400:default:return"normal";}}}
if(!(type in _pixelNamesCache)){_pixelNamesCache[type]=_pixelRegExp.test(type);}
return _pixelNamesCache[type]?px(node,value):value;};var _floatStyle=d.isIE?"styleFloat":"cssFloat",_floatAliases={"cssFloat":_floatStyle,"styleFloat":_floatStyle,"float":_floatStyle};dojo.style=function(node,style,value){var n=byId(node),args=arguments.length,op=(style=="opacity");style=_floatAliases[style]||style;if(args==3){return op?d._setOpacity(n,value):n.style[style]=value;}
if(args==2&&op){return d._getOpacity(n);}
var s=gcs(n);if(args==2&&typeof style!="string"){for(var x in style){d.style(node,x,style[x]);}
return s;}
return(args==1)?s:_toStyleValue(n,style,s[style]||n.style[style]);}
dojo._getPadExtents=function(n,computedStyle){var
s=computedStyle||gcs(n),l=px(n,s.paddingLeft),t=px(n,s.paddingTop);return{l:l,t:t,w:l+px(n,s.paddingRight),h:t+px(n,s.paddingBottom)};}
dojo._getBorderExtents=function(n,computedStyle){var
ne="none",s=computedStyle||gcs(n),bl=(s.borderLeftStyle!=ne?px(n,s.borderLeftWidth):0),bt=(s.borderTopStyle!=ne?px(n,s.borderTopWidth):0);return{l:bl,t:bt,w:bl+(s.borderRightStyle!=ne?px(n,s.borderRightWidth):0),h:bt+(s.borderBottomStyle!=ne?px(n,s.borderBottomWidth):0)};}
dojo._getPadBorderExtents=function(n,computedStyle){var
s=computedStyle||gcs(n),p=d._getPadExtents(n,s),b=d._getBorderExtents(n,s);return{l:p.l+b.l,t:p.t+b.t,w:p.w+b.w,h:p.h+b.h};}
dojo._getMarginExtents=function(n,computedStyle){var
s=computedStyle||gcs(n),l=px(n,s.marginLeft),t=px(n,s.marginTop),r=px(n,s.marginRight),b=px(n,s.marginBottom);if(d.isWebKit&&(s.position!="absolute")){r=l;}
return{l:l,t:t,w:l+r,h:t+b};}
dojo._getMarginBox=function(node,computedStyle){var s=computedStyle||gcs(node),me=d._getMarginExtents(node,s);var l=node.offsetLeft-me.l,t=node.offsetTop-me.t,p=node.parentNode;if(d.isMoz){var sl=parseFloat(s.left),st=parseFloat(s.top);if(!isNaN(sl)&&!isNaN(st)){l=sl,t=st;}else{if(p&&p.style){var pcs=gcs(p);if(pcs.overflow!="visible"){var be=d._getBorderExtents(p,pcs);l+=be.l,t+=be.t;}}}}else if(d.isOpera||(d.isIE>7&&!d.isQuirks)){if(p){be=d._getBorderExtents(p);l-=be.l;t-=be.t;}}
return{l:l,t:t,w:node.offsetWidth+me.w,h:node.offsetHeight+me.h};}
dojo._getContentBox=function(node,computedStyle){var s=computedStyle||gcs(node),pe=d._getPadExtents(node,s),be=d._getBorderExtents(node,s),w=node.clientWidth,h;if(!w){w=node.offsetWidth,h=node.offsetHeight;}else{h=node.clientHeight,be.w=be.h=0;}
if(d.isOpera){pe.l+=be.l;pe.t+=be.t;};return{l:pe.l,t:pe.t,w:w-pe.w-be.w,h:h-pe.h-be.h};}
dojo._getBorderBox=function(node,computedStyle){var s=computedStyle||gcs(node),pe=d._getPadExtents(node,s),cb=d._getContentBox(node,s);return{l:cb.l-pe.l,t:cb.t-pe.t,w:cb.w+pe.w,h:cb.h+pe.h};}
dojo._setBox=function(node,l,t,w,h,u){u=u||"px";var s=node.style;if(!isNaN(l)){s.left=l+u;}
if(!isNaN(t)){s.top=t+u;}
if(w>=0){s.width=w+u;}
if(h>=0){s.height=h+u;}}
dojo._isButtonTag=function(node){return node.tagName=="BUTTON"||node.tagName=="INPUT"&&(node.getAttribute("type")||'').toUpperCase()=="BUTTON";}
dojo._usesBorderBox=function(node){var n=node.tagName;return d.boxModel=="border-box"||n=="TABLE"||d._isButtonTag(node);}
dojo._setContentSize=function(node,widthPx,heightPx,computedStyle){if(d._usesBorderBox(node)){var pb=d._getPadBorderExtents(node,computedStyle);if(widthPx>=0){widthPx+=pb.w;}
if(heightPx>=0){heightPx+=pb.h;}}
d._setBox(node,NaN,NaN,widthPx,heightPx);}
dojo._setMarginBox=function(node,leftPx,topPx,widthPx,heightPx,computedStyle){var s=computedStyle||gcs(node),bb=d._usesBorderBox(node),pb=bb?_nilExtents:d._getPadBorderExtents(node,s);if(d.isWebKit){if(d._isButtonTag(node)){var ns=node.style;if(widthPx>=0&&!ns.width){ns.width="4px";}
if(heightPx>=0&&!ns.height){ns.height="4px";}}}
var mb=d._getMarginExtents(node,s);if(widthPx>=0){widthPx=Math.max(widthPx-pb.w-mb.w,0);}
if(heightPx>=0){heightPx=Math.max(heightPx-pb.h-mb.h,0);}
d._setBox(node,leftPx,topPx,widthPx,heightPx);}
var _nilExtents={l:0,t:0,w:0,h:0};dojo.marginBox=function(node,box){var n=byId(node),s=gcs(n),b=box;return!b?d._getMarginBox(n,s):d._setMarginBox(n,b.l,b.t,b.w,b.h,s);}
dojo.contentBox=function(node,box){var n=byId(node),s=gcs(n),b=box;return!b?d._getContentBox(n,s):d._setContentSize(n,b.w,b.h,s);}
var _sumAncestorProperties=function(node,prop){if(!(node=(node||0).parentNode)){return 0}
var val,retVal=0,_b=d.body();while(node&&node.style){if(gcs(node).position=="fixed"){return 0;}
val=node[prop];if(val){retVal+=val-0;if(node==_b){break;}}
node=node.parentNode;}
return retVal;}
dojo._docScroll=function(){var n=d.global;return"pageXOffset"in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=d.doc.documentElement,n.clientHeight?{x:d._fixIeBiDiScrollLeft(n.scrollLeft),y:n.scrollTop}:(n=d.body(),{x:n.scrollLeft||0,y:n.scrollTop||0}));};dojo._isBodyLtr=function(){return"_bodyLtr"in d?d._bodyLtr:d._bodyLtr=(d.body().dir||d.doc.documentElement.dir||"ltr").toLowerCase()=="ltr";}
dojo._getIeDocumentElementOffset=function(){var de=d.doc.documentElement;if(d.isIE<8){var r=de.getBoundingClientRect();var l=r.left,t=r.top;if(d.isIE<7){l+=de.clientLeft;t+=de.clientTop;}
return{x:l<0?0:l,y:t<0?0:t};}else{return{x:0,y:0};}};dojo._fixIeBiDiScrollLeft=function(scrollLeft){var dd=d.doc;if(d.isIE<8&&!d._isBodyLtr()){var de=d.isQuirks?dd.body:dd.documentElement;return scrollLeft+de.clientWidth-de.scrollWidth;}
return scrollLeft;}
dojo._abs=dojo.position=function(node,includeScroll){var db=d.body(),dh=db.parentNode,ret;node=byId(node);if(node["getBoundingClientRect"]){ret=node.getBoundingClientRect();ret={x:ret.left,y:ret.top,w:ret.right-ret.left,h:ret.bottom-ret.top};if(d.isIE){var offset=d._getIeDocumentElementOffset();ret.x-=offset.x+(d.isQuirks?db.clientLeft+db.offsetLeft:0);ret.y-=offset.y+(d.isQuirks?db.clientTop+db.offsetTop:0);}else if(d.isFF==3){var cs=gcs(dh);ret.x-=px(dh,cs.marginLeft)+px(dh,cs.borderLeftWidth);ret.y-=px(dh,cs.marginTop)+px(dh,cs.borderTopWidth);}}else{ret={x:0,y:0,w:node.offsetWidth,h:node.offsetHeight};if(node["offsetParent"]){ret.x-=_sumAncestorProperties(node,"scrollLeft");ret.y-=_sumAncestorProperties(node,"scrollTop");var curnode=node;do{var n=curnode.offsetLeft,t=curnode.offsetTop;ret.x+=isNaN(n)?0:n;ret.y+=isNaN(t)?0:t;cs=gcs(curnode);if(curnode!=node){if(d.isMoz){ret.x+=2*px(curnode,cs.borderLeftWidth);ret.y+=2*px(curnode,cs.borderTopWidth);}else{ret.x+=px(curnode,cs.borderLeftWidth);ret.y+=px(curnode,cs.borderTopWidth);}}
if(d.isMoz&&cs.position=="static"){var parent=curnode.parentNode;while(parent!=curnode.offsetParent){var pcs=gcs(parent);if(pcs.position=="static"){ret.x+=px(curnode,pcs.borderLeftWidth);ret.y+=px(curnode,pcs.borderTopWidth);}
parent=parent.parentNode;}}
curnode=curnode.offsetParent;}while((curnode!=dh)&&curnode);}else if(node.x&&node.y){ret.x+=isNaN(node.x)?0:node.x;ret.y+=isNaN(node.y)?0:node.y;}}
if(includeScroll){var scroll=d._docScroll();ret.x+=scroll.x;ret.y+=scroll.y;}
return ret;}
dojo.coords=function(node,includeScroll){var n=byId(node),s=gcs(n),mb=d._getMarginBox(n,s);var abs=d.position(n,includeScroll);mb.x=abs.x;mb.y=abs.y;return mb;}
var _propNames={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},_attrNames={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"},_forcePropNames={innerHTML:1,className:1,htmlFor:d.isIE,value:1};var _fixAttrName=function(name){return _attrNames[name.toLowerCase()]||name;};var _hasAttr=function(node,name){var attr=node.getAttributeNode&&node.getAttributeNode(name);return attr&&attr.specified;};dojo.hasAttr=function(node,name){var lc=name.toLowerCase();return _forcePropNames[_propNames[lc]||name]||_hasAttr(byId(node),_attrNames[lc]||name);}
var _evtHdlrMap={},_ctr=0,_attrId=dojo._scopeName+"attrid",_roInnerHtml={col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1};dojo.attr=function(node,name,value){node=byId(node);var args=arguments.length,prop;if(args==2&&typeof name!="string"){for(var x in name){d.attr(node,x,name[x]);}
return node;}
var lc=name.toLowerCase(),propName=_propNames[lc]||name,forceProp=_forcePropNames[propName],attrName=_attrNames[lc]||name;if(args==3){do{if(propName=="style"&&typeof value!="string"){d.style(node,value);break;}
if(propName=="innerHTML"){if(d.isIE&&node.tagName.toLowerCase()in _roInnerHtml){d.empty(node);node.appendChild(d._toDom(value,node.ownerDocument));}else{node[propName]=value;}
break;}
if(d.isFunction(value)){var attrId=d.attr(node,_attrId);if(!attrId){attrId=_ctr++;d.attr(node,_attrId,attrId);}
if(!_evtHdlrMap[attrId]){_evtHdlrMap[attrId]={};}
var h=_evtHdlrMap[attrId][propName];if(h){d.disconnect(h);}else{try{delete node[propName];}catch(e){}}
_evtHdlrMap[attrId][propName]=d.connect(node,propName,value);break;}
if(forceProp||typeof value=="boolean"){node[propName]=value;break;}
node.setAttribute(attrName,value);}while(false);return node;}
value=node[propName];if(forceProp&&typeof value!="undefined"){return value;}
if(propName!="href"&&(typeof value=="boolean"||d.isFunction(value))){return value;}
return _hasAttr(node,attrName)?node.getAttribute(attrName):null;}
dojo.removeAttr=function(node,name){byId(node).removeAttribute(_fixAttrName(name));}
dojo.getEffectiveAttrValue=function(node,name){node=byId(node);var lc=name.toLowerCase(),propName=_propNames[lc]||name;if((propName in node)&&propName!="href"){return node[propName];}
var attrName=_attrNames[lc]||name;return _hasAttr(node,attrName)?node.getAttribute(attrName):null;}
dojo.create=function(tag,attrs,refNode,pos){var doc=d.doc;if(refNode){refNode=byId(refNode);doc=refNode.ownerDocument;}
if(typeof tag=="string"){tag=doc.createElement(tag);}
if(attrs){d.attr(tag,attrs);}
if(refNode){d.place(tag,refNode,pos);}
return tag;}
d.empty=d.isIE?function(node){node=byId(node);for(var c;c=node.lastChild;){d.destroy(c);}}:function(node){byId(node).innerHTML="";};var tagWrap={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},reTag=/<\s*([\w\:]+)/,masterNode={},masterNum=0,masterName="__"+d._scopeName+"ToDomId";for(var param in tagWrap){var tw=tagWrap[param];tw.pre=param=="option"?'<select multiple="multiple">':"<"+tw.join("><")+">";tw.post="</"+tw.reverse().join("></")+">";}
d._toDom=function(frag,doc){doc=doc||d.doc;var masterId=doc[masterName];if(!masterId){doc[masterName]=masterId=++masterNum+"";masterNode[masterId]=doc.createElement("div");}
frag+="";var match=frag.match(reTag),tag=match?match[1].toLowerCase():"",master=masterNode[masterId],wrap,i,fc,df;if(match&&tagWrap[tag]){wrap=tagWrap[tag];master.innerHTML=wrap.pre+frag+wrap.post;for(i=wrap.length;i;--i){master=master.firstChild;}}else{master.innerHTML=frag;}
if(master.childNodes.length==1){return master.removeChild(master.firstChild);}
df=doc.createDocumentFragment();while(fc=master.firstChild){df.appendChild(fc);}
return df;}
var _className="className";dojo.hasClass=function(node,classStr){return((" "+byId(node)[_className]+" ").indexOf(" "+classStr+" ")>=0);};var spaces=/\s+/,a1=[""],str2array=function(s){if(typeof s=="string"||s instanceof String){if(s.indexOf(" ")<0){a1[0]=s;return a1;}else{return s.split(spaces);}}
return s;};dojo.addClass=function(node,classStr){node=byId(node);classStr=str2array(classStr);var cls=" "+node[_className]+" ";for(var i=0,len=classStr.length,c;i<len;++i){c=classStr[i];if(c&&cls.indexOf(" "+c+" ")<0){cls+=c+" ";}}
node[_className]=d.trim(cls);};dojo.removeClass=function(node,classStr){node=byId(node);var cls;if(classStr!==undefined){classStr=str2array(classStr);cls=" "+node[_className]+" ";for(var i=0,len=classStr.length;i<len;++i){cls=cls.replace(" "+classStr[i]+" "," ");}
cls=d.trim(cls);}else{cls="";}
if(node[_className]!=cls){node[_className]=cls;}};dojo.toggleClass=function(node,classStr,condition){if(condition===undefined){condition=!d.hasClass(node,classStr);}
d[condition?"addClass":"removeClass"](node,classStr);};})();
dojo.provide("dojo._base.NodeList");dojo.require("dojo._base.lang");dojo.require("dojo._base.array");(function(){var d=dojo;var ap=Array.prototype,aps=ap.slice,apc=ap.concat;var tnl=function(a,parent,NodeListCtor){if(!a.sort){a=aps.call(a,0);}
var ctor=NodeListCtor||this._NodeListCtor||d._NodeListCtor;a.constructor=ctor;dojo._mixin(a,ctor.prototype);a._NodeListCtor=ctor;return parent?a._stash(parent):a;};var loopBody=function(f,a,o){a=[0].concat(aps.call(a,0));o=o||d.global;return function(node){a[0]=node;return f.apply(o,a);};};var adaptAsForEach=function(f,o){return function(){this.forEach(loopBody(f,arguments,o));return this;};};var adaptAsMap=function(f,o){return function(){return this.map(loopBody(f,arguments,o));};};var adaptAsFilter=function(f,o){return function(){return this.filter(loopBody(f,arguments,o));};};var adaptWithCondition=function(f,g,o){return function(){var a=arguments,body=loopBody(f,a,o);if(g.call(o||d.global,a)){return this.map(body);}
this.forEach(body);return this;};};var magicGuard=function(a){return a.length==1&&(typeof a[0]=="string");};var orphan=function(node){var p=node.parentNode;if(p){p.removeChild(node);}};dojo.NodeList=function(){return tnl(Array.apply(null,arguments));};d._NodeListCtor=d.NodeList;var nl=d.NodeList,nlp=nl.prototype;nl._wrap=nlp._wrap=tnl;nl._adaptAsMap=adaptAsMap;nl._adaptAsForEach=adaptAsForEach;nl._adaptAsFilter=adaptAsFilter;nl._adaptWithCondition=adaptWithCondition;d.forEach(["slice","splice"],function(name){var f=ap[name];nlp[name]=function(){return this._wrap(f.apply(this,arguments),name=="slice"?this:null);};});d.forEach(["indexOf","lastIndexOf","every","some"],function(name){var f=d[name];nlp[name]=function(){return f.apply(d,[this].concat(aps.call(arguments,0)));};});d.forEach(["attr","style"],function(name){nlp[name]=adaptWithCondition(d[name],magicGuard);});d.forEach(["connect","addClass","removeClass","toggleClass","empty","removeAttr"],function(name){nlp[name]=adaptAsForEach(d[name]);});dojo.extend(dojo.NodeList,{_normalize:function(content,refNode){var parse=content.parse===true?true:false;if(typeof content.template=="string"){var templateFunc=content.templateFunc||(dojo.string&&dojo.string.substitute);content=templateFunc?templateFunc(content.template,content):content;}
var type=(typeof content);if(type=="string"||type=="number"){content=dojo._toDom(content,(refNode&&refNode.ownerDocument));if(content.nodeType==11){content=dojo._toArray(content.childNodes);}else{content=[content];}}else if(!dojo.isArrayLike(content)){content=[content];}else if(!dojo.isArray(content)){content=dojo._toArray(content);}
if(parse){content._runParse=true;}
return content;},_cloneNode:function(node){return node.cloneNode(true);},_place:function(ary,refNode,position,useClone){if(refNode.nodeType!=1&&position=="only"){return;}
var rNode=refNode,tempNode;var length=ary.length;for(var i=length-1;i>=0;i--){var node=(useClone?this._cloneNode(ary[i]):ary[i]);if(ary._runParse&&dojo.parser&&dojo.parser.parse){if(!tempNode){tempNode=rNode.ownerDocument.createElement("div");}
tempNode.appendChild(node);dojo.parser.parse(tempNode);node=tempNode.firstChild;while(tempNode.firstChild){tempNode.removeChild(tempNode.firstChild);}}
if(i==length-1){dojo.place(node,rNode,position);}else{rNode.parentNode.insertBefore(node,rNode);}
rNode=node;}},_stash:function(parent){this._parent=parent;return this;},end:function(){if(this._parent){return this._parent;}else{return new this._NodeListCtor();}},concat:function(item){var t=d.isArray(this)?this:aps.call(this,0),m=d.map(arguments,function(a){return a&&!d.isArray(a)&&(a.constructor===NodeList||a.constructor==this._NodeListCtor)?aps.call(a,0):a;});return this._wrap(apc.apply(t,m),this);},map:function(func,obj){return this._wrap(d.map(this,func,obj),this);},forEach:function(callback,thisObj){d.forEach(this,callback,thisObj);return this;},coords:adaptAsMap(d.coords),position:adaptAsMap(d.position),place:function(queryOrNode,position){var item=d.query(queryOrNode)[0];return this.forEach(function(node){d.place(node,item,position);});},orphan:function(simpleFilter){return(simpleFilter?d._filterQueryResult(this,simpleFilter):this).forEach(orphan);},adopt:function(queryOrListOrNode,position){return d.query(queryOrListOrNode).place(this[0],position)._stash(this);},query:function(queryStr){if(!queryStr){return this;}
var ret=this.map(function(node){return d.query(queryStr,node).filter(function(subNode){return subNode!==undefined;});});return this._wrap(apc.apply([],ret),this);},filter:function(simpleFilter){var a=arguments,items=this,start=0;if(typeof simpleFilter=="string"){items=d._filterQueryResult(this,a[0]);if(a.length==1){return items._stash(this);}
start=1;}
return this._wrap(d.filter(items,a[start],a[start+1]),this);},addContent:function(content,position){content=this._normalize(content,this[0]);for(var i=0,node;node=this[i];i++){this._place(content,node,position,i>0);}
return this;},instantiate:function(declaredClass,properties){var c=d.isFunction(declaredClass)?declaredClass:d.getObject(declaredClass);properties=properties||{};return this.forEach(function(node){new c(properties,node);});},at:function(){var t=new this._NodeListCtor();d.forEach(arguments,function(i){if(this[i]){t.push(this[i]);}},this);return t._stash(this);}});nl.events=["blur","focus","change","click","error","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","submit"];d.forEach(nl.events,function(evt){var _oe="on"+evt;nlp[_oe]=function(a,b){return this.connect(_oe,a,b);}});})();
if(typeof dojo!="undefined"){dojo.provide("dojo._base.query");dojo.require("dojo._base.NodeList");dojo.require("dojo._base.lang");}else if(!this["acme"]&&!this["queryPortability"]){(function(){acme={trim:function(str){str=str.replace(/^\s+/,'');for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}
return str;},forEach:function(arr,callback,thisObject){if(!arr||!arr.length){return;}
for(var i=0,l=arr.length;i<l;++i){callback.call(thisObject||window,arr[i],i,arr);}},byId:function(id,doc){if(typeof id=="string"){return(doc||document).getElementById(id);}else{return id;}},doc:document,NodeList:Array};var n=navigator;var dua=n.userAgent;var dav=n.appVersion;var tv=parseFloat(dav);acme.isOpera=(dua.indexOf("Opera")>=0)?tv:undefined;acme.isKhtml=(dav.indexOf("Konqueror")>=0)?tv:undefined;acme.isWebKit=parseFloat(dua.split("WebKit/")[1])||undefined;acme.isChrome=parseFloat(dua.split("Chrome/")[1])||undefined;var index=Math.max(dav.indexOf("WebKit"),dav.indexOf("Safari"),0);if(index&&!acme.isChrome){acme.isSafari=parseFloat(dav.split("Version/")[1]);if(!acme.isSafari||parseFloat(dav.substr(index+7))<=419.3){acme.isSafari=2;}}
if(document.all&&!acme.isOpera){acme.isIE=parseFloat(dav.split("MSIE ")[1])||undefined;}
Array._wrap=function(arr){return arr;};})();};(function(d){var trim=d.trim;var each=d.forEach;var qlc=d._NodeListCtor=d.NodeList;var getDoc=function(){return d.doc;};var cssCaseBug=((d.isWebKit||d.isMozilla)&&((getDoc().compatMode)=="BackCompat"));var childNodesName=!!getDoc().firstChild["children"]?"children":"childNodes";var specials=">~+";var caseSensitive=false;var yesman=function(){return true;};var getQueryParts=function(query){if(specials.indexOf(query.slice(-1))>=0){query+=" * "}else{query+=" ";}
var ts=function(s,e){return trim(query.slice(s,e));}
var queryParts=[];var inBrackets=-1,inParens=-1,inMatchFor=-1,inPseudo=-1,inClass=-1,inId=-1,inTag=-1,lc="",cc="",pStart;var x=0,ql=query.length,currentPart=null,_cp=null;var endTag=function(){if(inTag>=0){var tv=(inTag==x)?null:ts(inTag,x);currentPart[(specials.indexOf(tv)<0)?"tag":"oper"]=tv;inTag=-1;}}
var endId=function(){if(inId>=0){currentPart.id=ts(inId,x).replace(/\\/g,"");inId=-1;}}
var endClass=function(){if(inClass>=0){currentPart.classes.push(ts(inClass+1,x).replace(/\\/g,""));inClass=-1;}}
var endAll=function(){endId();endTag();endClass();}
var endPart=function(){endAll();if(inPseudo>=0){currentPart.pseudos.push({name:ts(inPseudo+1,x)});}
currentPart.loops=(currentPart.pseudos.length||currentPart.attrs.length||currentPart.classes.length);currentPart.oquery=currentPart.query=ts(pStart,x);currentPart.otag=currentPart.tag=(currentPart["oper"])?null:(currentPart.tag||"*");if(currentPart.tag){currentPart.tag=currentPart.tag.toUpperCase();}
if(queryParts.length&&(queryParts[queryParts.length-1].oper)){currentPart.infixOper=queryParts.pop();currentPart.query=currentPart.infixOper.query+" "+currentPart.query;}
queryParts.push(currentPart);currentPart=null;}
for(;lc=cc,cc=query.charAt(x),x<ql;x++){if(lc=="\\"){continue;}
if(!currentPart){pStart=x;currentPart={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return(caseSensitive)?this.otag:this.tag;}};inTag=x;}
if(inBrackets>=0){if(cc=="]"){if(!_cp.attr){_cp.attr=ts(inBrackets+1,x);}else{_cp.matchFor=ts((inMatchFor||inBrackets+1),x);}
var cmf=_cp.matchFor;if(cmf){if((cmf.charAt(0)=='"')||(cmf.charAt(0)=="'")){_cp.matchFor=cmf.slice(1,-1);}}
currentPart.attrs.push(_cp);_cp=null;inBrackets=inMatchFor=-1;}else if(cc=="="){var addToCc=("|~^$*".indexOf(lc)>=0)?lc:"";_cp.type=addToCc+cc;_cp.attr=ts(inBrackets+1,x-addToCc.length);inMatchFor=x+1;}}else if(inParens>=0){if(cc==")"){if(inPseudo>=0){_cp.value=ts(inParens+1,x);}
inPseudo=inParens=-1;}}else if(cc=="#"){endAll();inId=x+1;}else if(cc=="."){endAll();inClass=x;}else if(cc==":"){endAll();inPseudo=x;}else if(cc=="["){endAll();inBrackets=x;_cp={};}else if(cc=="("){if(inPseudo>=0){_cp={name:ts(inPseudo+1,x),value:null}
currentPart.pseudos.push(_cp);}
inParens=x;}else if((cc==" ")&&(lc!=cc)){endPart();}}
return queryParts;};var agree=function(first,second){if(!first){return second;}
if(!second){return first;}
return function(){return first.apply(window,arguments)&&second.apply(window,arguments);}};var getArr=function(i,arr){var r=arr||[];if(i){r.push(i);}
return r;};var _isElement=function(n){return(1==n.nodeType);};var blank="";var _getAttr=function(elem,attr){if(!elem){return blank;}
if(attr=="class"){return elem.className||blank;}
if(attr=="for"){return elem.htmlFor||blank;}
if(attr=="style"){return elem.style.cssText||blank;}
return(caseSensitive?elem.getAttribute(attr):elem.getAttribute(attr,2))||blank;};var attrs={"*=":function(attr,value){return function(elem){return(_getAttr(elem,attr).indexOf(value)>=0);}},"^=":function(attr,value){return function(elem){return(_getAttr(elem,attr).indexOf(value)==0);}},"$=":function(attr,value){var tval=" "+value;return function(elem){var ea=" "+_getAttr(elem,attr);return(ea.lastIndexOf(value)==(ea.length-value.length));}},"~=":function(attr,value){var tval=" "+value+" ";return function(elem){var ea=" "+_getAttr(elem,attr)+" ";return(ea.indexOf(tval)>=0);}},"|=":function(attr,value){var valueDash=" "+value+"-";return function(elem){var ea=" "+_getAttr(elem,attr);return((ea==value)||(ea.indexOf(valueDash)==0));}},"=":function(attr,value){return function(elem){return(_getAttr(elem,attr)==value);}}};var _noNES=(typeof getDoc().firstChild.nextElementSibling=="undefined");var _ns=!_noNES?"nextElementSibling":"nextSibling";var _ps=!_noNES?"previousElementSibling":"previousSibling";var _simpleNodeTest=(_noNES?_isElement:yesman);var _lookLeft=function(node){while(node=node[_ps]){if(_simpleNodeTest(node)){return false;}}
return true;};var _lookRight=function(node){while(node=node[_ns]){if(_simpleNodeTest(node)){return false;}}
return true;};var getNodeIndex=function(node){var root=node.parentNode;var i=0,tret=root[childNodesName],ci=(node["_i"]||-1),cl=(root["_l"]||-1);if(!tret){return-1;}
var l=tret.length;if(cl==l&&ci>=0&&cl>=0){return ci;}
root["_l"]=l;ci=-1;for(var te=root["firstElementChild"]||root["firstChild"];te;te=te[_ns]){if(_simpleNodeTest(te)){te["_i"]=++i;if(node===te){ci=i;}}}
return ci;};var isEven=function(elem){return!((getNodeIndex(elem))%2);};var isOdd=function(elem){return((getNodeIndex(elem))%2);};var pseudos={"checked":function(name,condition){return function(elem){return!!d.attr(elem,"checked");}},"first-child":function(){return _lookLeft;},"last-child":function(){return _lookRight;},"only-child":function(name,condition){return function(node){if(!_lookLeft(node)){return false;}
if(!_lookRight(node)){return false;}
return true;};},"empty":function(name,condition){return function(elem){var cn=elem.childNodes;var cnl=elem.childNodes.length;for(var x=cnl-1;x>=0;x--){var nt=cn[x].nodeType;if((nt===1)||(nt==3)){return false;}}
return true;}},"contains":function(name,condition){var cz=condition.charAt(0);if(cz=='"'||cz=="'"){condition=condition.slice(1,-1);}
return function(elem){return(elem.innerHTML.indexOf(condition)>=0);}},"not":function(name,condition){var p=getQueryParts(condition)[0];var ignores={el:1};if(p.tag!="*"){ignores.tag=1;}
if(!p.classes.length){ignores.classes=1;}
var ntf=getSimpleFilterFunc(p,ignores);return function(elem){return(!ntf(elem));}},"nth-child":function(name,condition){var pi=parseInt;if(condition=="odd"){return isOdd;}else if(condition=="even"){return isEven;}
if(condition.indexOf("n")!=-1){var tparts=condition.split("n",2);var pred=tparts[0]?((tparts[0]=='-')?-1:pi(tparts[0])):1;var idx=tparts[1]?pi(tparts[1]):0;var lb=0,ub=-1;if(pred>0){if(idx<0){idx=(idx%pred)&&(pred+(idx%pred));}else if(idx>0){if(idx>=pred){lb=idx-idx%pred;}
idx=idx%pred;}}else if(pred<0){pred*=-1;if(idx>0){ub=idx;idx=idx%pred;}}
if(pred>0){return function(elem){var i=getNodeIndex(elem);return(i>=lb)&&(ub<0||i<=ub)&&((i%pred)==idx);}}else{condition=idx;}}
var ncount=pi(condition);return function(elem){return(getNodeIndex(elem)==ncount);}}};var defaultGetter=(d.isIE)?function(cond){var clc=cond.toLowerCase();if(clc=="class"){cond="className";}
return function(elem){return(caseSensitive?elem.getAttribute(cond):elem[cond]||elem[clc]);}}:function(cond){return function(elem){return(elem&&elem.getAttribute&&elem.hasAttribute(cond));}};var getSimpleFilterFunc=function(query,ignores){if(!query){return yesman;}
ignores=ignores||{};var ff=null;if(!("el"in ignores)){ff=agree(ff,_isElement);}
if(!("tag"in ignores)){if(query.tag!="*"){ff=agree(ff,function(elem){return(elem&&(elem.tagName==query.getTag()));});}}
if(!("classes"in ignores)){each(query.classes,function(cname,idx,arr){var re=new RegExp("(?:^|\\s)"+cname+"(?:\\s|$)");ff=agree(ff,function(elem){return re.test(elem.className);});ff.count=idx;});}
if(!("pseudos"in ignores)){each(query.pseudos,function(pseudo){var pn=pseudo.name;if(pseudos[pn]){ff=agree(ff,pseudos[pn](pn,pseudo.value));}});}
if(!("attrs"in ignores)){each(query.attrs,function(attr){var matcher;var a=attr.attr;if(attr.type&&attrs[attr.type]){matcher=attrs[attr.type](a,attr.matchFor);}else if(a.length){matcher=defaultGetter(a);}
if(matcher){ff=agree(ff,matcher);}});}
if(!("id"in ignores)){if(query.id){ff=agree(ff,function(elem){return(!!elem&&(elem.id==query.id));});}}
if(!ff){if(!("default"in ignores)){ff=yesman;}}
return ff;};var _nextSibling=function(filterFunc){return function(node,ret,bag){while(node=node[_ns]){if(_noNES&&(!_isElement(node))){continue;}
if((!bag||_isUnique(node,bag))&&filterFunc(node)){ret.push(node);}
break;}
return ret;}};var _nextSiblings=function(filterFunc){return function(root,ret,bag){var te=root[_ns];while(te){if(_simpleNodeTest(te)){if(bag&&!_isUnique(te,bag)){break;}
if(filterFunc(te)){ret.push(te);}}
te=te[_ns];}
return ret;}};var _childElements=function(filterFunc){filterFunc=filterFunc||yesman;return function(root,ret,bag){var te,x=0,tret=root[childNodesName];while(te=tret[x++]){if(_simpleNodeTest(te)&&(!bag||_isUnique(te,bag))&&(filterFunc(te,x))){ret.push(te);}}
return ret;};};var _isDescendant=function(node,root){var pn=node.parentNode;while(pn){if(pn==root){break;}
pn=pn.parentNode;}
return!!pn;};var _getElementsFuncCache={};var getElementsFunc=function(query){var retFunc=_getElementsFuncCache[query.query];if(retFunc){return retFunc;}
var io=query.infixOper;var oper=(io?io.oper:"");var filterFunc=getSimpleFilterFunc(query,{el:1});var qt=query.tag;var wildcardTag=("*"==qt);var ecs=getDoc()["getElementsByClassName"];if(!oper){if(query.id){filterFunc=(!query.loops&&wildcardTag)?yesman:getSimpleFilterFunc(query,{el:1,id:1});retFunc=function(root,arr){var te=d.byId(query.id,(root.ownerDocument||root));if(!te||!filterFunc(te)){return;}
if(9==root.nodeType){return getArr(te,arr);}else{if(_isDescendant(te,root)){return getArr(te,arr);}}}}else if(ecs&&/\{\s*\[native code\]\s*\}/.test(String(ecs))&&query.classes.length&&!cssCaseBug){filterFunc=getSimpleFilterFunc(query,{el:1,classes:1,id:1});var classesString=query.classes.join(" ");retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByClassName(classesString);while((te=tret[x++])){if(filterFunc(te,root)&&_isUnique(te,bag)){ret.push(te);}}
return ret;};}else if(!wildcardTag&&!query.loops){retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByTagName(query.getTag());while((te=tret[x++])){if(_isUnique(te,bag)){ret.push(te);}}
return ret;};}else{filterFunc=getSimpleFilterFunc(query,{el:1,tag:1,id:1});retFunc=function(root,arr,bag){var ret=getArr(0,arr),te,x=0;var tret=root.getElementsByTagName(query.getTag());while((te=tret[x++])){if(filterFunc(te,root)&&_isUnique(te,bag)){ret.push(te);}}
return ret;};}}else{var skipFilters={el:1};if(wildcardTag){skipFilters.tag=1;}
filterFunc=getSimpleFilterFunc(query,skipFilters);if("+"==oper){retFunc=_nextSibling(filterFunc);}else if("~"==oper){retFunc=_nextSiblings(filterFunc);}else if(">"==oper){retFunc=_childElements(filterFunc);}}
return _getElementsFuncCache[query.query]=retFunc;};var filterDown=function(root,queryParts){var candidates=getArr(root),qp,x,te,qpl=queryParts.length,bag,ret;for(var i=0;i<qpl;i++){ret=[];qp=queryParts[i];x=candidates.length-1;if(x>0){bag={};ret.nozip=true;}
var gef=getElementsFunc(qp);while(te=candidates[x--]){gef(te,ret,bag);}
if(!ret.length){break;}
candidates=ret;}
return ret;};var _queryFuncCacheDOM={},_queryFuncCacheQSA={};var getStepQueryFunc=function(query){var qparts=getQueryParts(trim(query));if(qparts.length==1){var tef=getElementsFunc(qparts[0]);return function(root){var r=tef(root,new qlc());if(r){r.nozip=true;}
return r;}}
return function(root){return filterDown(root,qparts);}};var nua=navigator.userAgent;var wk="WebKit/";var is525=(d.isWebKit&&(nua.indexOf(wk)>0)&&(parseFloat(nua.split(wk)[1])>528));var noZip=d.isIE?"commentStrip":"nozip";var qsa="querySelectorAll";var qsaAvail=(!!getDoc()[qsa]&&(!d.isSafari||(d.isSafari>3.1)||is525));var getQueryFunc=function(query,forceDOM){if(qsaAvail){var qsaCached=_queryFuncCacheQSA[query];if(qsaCached&&!forceDOM){return qsaCached;}}
var domCached=_queryFuncCacheDOM[query];if(domCached){return domCached;}
var qcz=query.charAt(0);var nospace=(-1==query.indexOf(" "));if((query.indexOf("#")>=0)&&(nospace)){forceDOM=true;}
var useQSA=(qsaAvail&&(!forceDOM)&&(specials.indexOf(qcz)==-1)&&(!d.isIE||(query.indexOf(":")==-1))&&(!(cssCaseBug&&(query.indexOf(".")>=0)))&&(query.indexOf(":contains")==-1)&&(query.indexOf("|=")==-1));if(useQSA){var tq=(specials.indexOf(query.charAt(query.length-1))>=0)?(query+" *"):query;return _queryFuncCacheQSA[query]=function(root){try{if(!((9==root.nodeType)||nospace)){throw"";}
var r=root[qsa](tq);r[noZip]=true;return r;}catch(e){return getQueryFunc(query,true)(root);}}}else{var parts=query.split(/\s*,\s*/);return _queryFuncCacheDOM[query]=((parts.length<2)?getStepQueryFunc(query):function(root){var pindex=0,ret=[],tp;while((tp=parts[pindex++])){ret=ret.concat(getStepQueryFunc(tp)(root));}
return ret;});}};var _zipIdx=0;var _nodeUID=d.isIE?function(node){if(caseSensitive){return(node.getAttribute("_uid")||node.setAttribute("_uid",++_zipIdx)||_zipIdx);}else{return node.uniqueID;}}:function(node){return(node._uid||(node._uid=++_zipIdx));};var _isUnique=function(node,bag){if(!bag){return 1;}
var id=_nodeUID(node);if(!bag[id]){return bag[id]=1;}
return 0;};var _zipIdxName="_zipIdx";var _zip=function(arr){if(arr&&arr.nozip){return(qlc._wrap)?qlc._wrap(arr):arr;}
var ret=new qlc();if(!arr||!arr.length){return ret;}
if(arr[0]){ret.push(arr[0]);}
if(arr.length<2){return ret;}
_zipIdx++;if(d.isIE&&caseSensitive){var szidx=_zipIdx+"";arr[0].setAttribute(_zipIdxName,szidx);for(var x=1,te;te=arr[x];x++){if(arr[x].getAttribute(_zipIdxName)!=szidx){ret.push(te);}
te.setAttribute(_zipIdxName,szidx);}}else if(d.isIE&&arr.commentStrip){try{for(var x=1,te;te=arr[x];x++){if(_isElement(te)){ret.push(te);}}}catch(e){}}else{if(arr[0]){arr[0][_zipIdxName]=_zipIdx;}
for(var x=1,te;te=arr[x];x++){if(arr[x][_zipIdxName]!=_zipIdx){ret.push(te);}
te[_zipIdxName]=_zipIdx;}}
return ret;};d.query=function(query,root){qlc=d._NodeListCtor;if(!query){return new qlc();}
if(query.constructor==qlc){return query;}
if(typeof query!="string"){return new qlc(query);}
if(typeof root=="string"){root=d.byId(root);if(!root){return new qlc();}}
root=root||getDoc();var od=root.ownerDocument||root.documentElement;caseSensitive=(root.contentType&&root.contentType=="application/xml")||(d.isOpera&&(root.doctype||od.toString()=="[object XMLDocument]"))||(!!od)&&(d.isIE?od.xml:(root.xmlVersion||od.xmlVersion));var r=getQueryFunc(query)(root);if(r&&r.nozip&&!qlc._wrap){return r;}
return _zip(r);}
d.query.pseudos=pseudos;d._filterQueryResult=function(nodeList,simpleFilter){var tmpNodeList=new d._NodeListCtor();var filterFunc=getSimpleFilterFunc(getQueryParts(simpleFilter)[0]);for(var x=0,te;te=nodeList[x];x++){if(filterFunc(te)){tmpNodeList.push(te);}}
return tmpNodeList;}})(this["queryPortability"]||this["acme"]||dojo);
dojo.provide("dojo._base.xhr");dojo.require("dojo._base.Deferred");dojo.require("dojo._base.json");dojo.require("dojo._base.lang");dojo.require("dojo._base.query");(function(){var _d=dojo,cfg=_d.config;function setValue(obj,name,value){if(value===null){return;}
var val=obj[name];if(typeof val=="string"){obj[name]=[val,value];}else if(_d.isArray(val)){val.push(value);}else{obj[name]=value;}}
dojo.fieldToObject=function(inputNode){var ret=null;var item=_d.byId(inputNode);if(item){var _in=item.name;var type=(item.type||"").toLowerCase();if(_in&&type&&!item.disabled){if(type=="radio"||type=="checkbox"){if(item.checked){ret=item.value}}else if(item.multiple){ret=[];_d.query("option",item).forEach(function(opt){if(opt.selected){ret.push(opt.value);}});}else{ret=item.value;}}}
return ret;}
dojo.formToObject=function(formNode){var ret={};var exclude="file|submit|image|reset|button|";_d.forEach(dojo.byId(formNode).elements,function(item){var _in=item.name;var type=(item.type||"").toLowerCase();if(_in&&type&&exclude.indexOf(type)==-1&&!item.disabled){setValue(ret,_in,_d.fieldToObject(item));if(type=="image"){ret[_in+".x"]=ret[_in+".y"]=ret[_in].x=ret[_in].y=0;}}});return ret;}
dojo.objectToQuery=function(map){var enc=encodeURIComponent;var pairs=[];var backstop={};for(var name in map){var value=map[name];if(value!=backstop[name]){var assign=enc(name)+"=";if(_d.isArray(value)){for(var i=0;i<value.length;i++){pairs.push(assign+enc(value[i]));}}else{pairs.push(assign+enc(value));}}}
return pairs.join("&");}
dojo.formToQuery=function(formNode){return _d.objectToQuery(_d.formToObject(formNode));}
dojo.formToJson=function(formNode,prettyPrint){return _d.toJson(_d.formToObject(formNode),prettyPrint);}
dojo.queryToObject=function(str){var ret={};var qp=str.split("&");var dec=decodeURIComponent;_d.forEach(qp,function(item){if(item.length){var parts=item.split("=");var name=dec(parts.shift());var val=dec(parts.join("="));if(typeof ret[name]=="string"){ret[name]=[ret[name]];}
if(_d.isArray(ret[name])){ret[name].push(val);}else{ret[name]=val;}}});return ret;}
dojo._blockAsync=false;var handlers=_d._contentHandlers=dojo.contentHandlers={text:function(xhr){return xhr.responseText;},json:function(xhr){return _d.fromJson(xhr.responseText||null);},"json-comment-filtered":function(xhr){if(!dojo.config.useCommentedJson){console.warn("Consider using the standard mimetype:application/json."
+" json-commenting can introduce security issues. To"
+" decrease the chances of hijacking, use the standard the 'json' handler and"
+" prefix your json with: {}&&\n"
+"Use djConfig.useCommentedJson=true to turn off this message.");}
var value=xhr.responseText;var cStartIdx=value.indexOf("\/*");var cEndIdx=value.lastIndexOf("*\/");if(cStartIdx==-1||cEndIdx==-1){throw new Error("JSON was not comment filtered");}
return _d.fromJson(value.substring(cStartIdx+2,cEndIdx));},javascript:function(xhr){return _d.eval(xhr.responseText);},xml:function(xhr){var result=xhr.responseXML;if(_d.isIE&&(!result||!result.documentElement)){var ms=function(n){return"MSXML"+n+".DOMDocument";}
var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];_d.some(dp,function(p){try{var dom=new ActiveXObject(p);dom.async=false;dom.loadXML(xhr.responseText);result=dom;}catch(e){return false;}
return true;});}
return result;},"json-comment-optional":function(xhr){if(xhr.responseText&&/^[^{\[]*\/\*/.test(xhr.responseText)){return handlers["json-comment-filtered"](xhr);}else{return handlers["json"](xhr);}}};dojo._ioSetArgs=function(args,canceller,okHandler,errHandler){var ioArgs={args:args,url:args.url};var formObject=null;if(args.form){var form=_d.byId(args.form);var actnNode=form.getAttributeNode("action");ioArgs.url=ioArgs.url||(actnNode?actnNode.value:null);formObject=_d.formToObject(form);}
var miArgs=[{}];if(formObject){miArgs.push(formObject);}
if(args.content){miArgs.push(args.content);}
if(args.preventCache){miArgs.push({"dojo.preventCache":new Date().valueOf()});}
ioArgs.query=_d.objectToQuery(_d.mixin.apply(null,miArgs));ioArgs.handleAs=args.handleAs||"text";var d=new _d.Deferred(canceller);d.addCallbacks(okHandler,function(error){return errHandler(error,d);});var ld=args.load;if(ld&&_d.isFunction(ld)){d.addCallback(function(value){return ld.call(args,value,ioArgs);});}
var err=args.error;if(err&&_d.isFunction(err)){d.addErrback(function(value){return err.call(args,value,ioArgs);});}
var handle=args.handle;if(handle&&_d.isFunction(handle)){d.addBoth(function(value){return handle.call(args,value,ioArgs);});}
if(cfg.ioPublish&&_d.publish&&ioArgs.args.ioPublish!==false){d.addCallbacks(function(res){_d.publish("/dojo/io/load",[d,res]);return res;},function(res){_d.publish("/dojo/io/error",[d,res]);return res;});d.addBoth(function(res){_d.publish("/dojo/io/done",[d,res]);return res;});}
d.ioArgs=ioArgs;return d;}
var _deferredCancel=function(dfd){dfd.canceled=true;var xhr=dfd.ioArgs.xhr;var _at=typeof xhr.abort;if(_at=="function"||_at=="object"||_at=="unknown"){xhr.abort();}
var err=dfd.ioArgs.error;if(!err){err=new Error("xhr cancelled");err.dojoType="cancel";}
return err;}
var _deferredOk=function(dfd){var ret=handlers[dfd.ioArgs.handleAs](dfd.ioArgs.xhr);return ret===undefined?null:ret;}
var _deferError=function(error,dfd){if(!dfd.ioArgs.args.failOk){console.error(error);}
return error;}
var _inFlightIntvl=null;var _inFlight=[];var _pubCount=0;var _checkPubCount=function(dfd){if(_pubCount<=0){_pubCount=0;if(cfg.ioPublish&&_d.publish&&(!dfd||dfd&&dfd.ioArgs.args.ioPublish!==false)){_d.publish("/dojo/io/stop");}}};var _watchInFlight=function(){var now=(new Date()).getTime();if(!_d._blockAsync){for(var i=0,tif;i<_inFlight.length&&(tif=_inFlight[i]);i++){var dfd=tif.dfd;var func=function(){if(!dfd||dfd.canceled||!tif.validCheck(dfd)){_inFlight.splice(i--,1);_pubCount-=1;}else if(tif.ioCheck(dfd)){_inFlight.splice(i--,1);tif.resHandle(dfd);_pubCount-=1;}else if(dfd.startTime){if(dfd.startTime+(dfd.ioArgs.args.timeout||0)<now){_inFlight.splice(i--,1);var err=new Error("timeout exceeded");err.dojoType="timeout";dfd.errback(err);dfd.cancel();_pubCount-=1;}}};if(dojo.config.debugAtAllCosts){func.call(this);}else{try{func.call(this);}catch(e){dfd.errback(e);}}}}
_checkPubCount(dfd);if(!_inFlight.length){clearInterval(_inFlightIntvl);_inFlightIntvl=null;return;}}
dojo._ioCancelAll=function(){try{_d.forEach(_inFlight,function(i){try{i.dfd.cancel();}catch(e){}});}catch(e){}}
if(_d.isIE){_d.addOnWindowUnload(_d._ioCancelAll);}
_d._ioNotifyStart=function(dfd){if(cfg.ioPublish&&_d.publish&&dfd.ioArgs.args.ioPublish!==false){if(!_pubCount){_d.publish("/dojo/io/start");}
_pubCount+=1;_d.publish("/dojo/io/send",[dfd]);}}
_d._ioWatch=function(dfd,validCheck,ioCheck,resHandle){var args=dfd.ioArgs.args;if(args.timeout){dfd.startTime=(new Date()).getTime();}
_inFlight.push({dfd:dfd,validCheck:validCheck,ioCheck:ioCheck,resHandle:resHandle});if(!_inFlightIntvl){_inFlightIntvl=setInterval(_watchInFlight,50);}
if(args.sync){_watchInFlight();}}
var _defaultContentType="application/x-www-form-urlencoded";var _validCheck=function(dfd){return dfd.ioArgs.xhr.readyState;}
var _ioCheck=function(dfd){return 4==dfd.ioArgs.xhr.readyState;}
var _resHandle=function(dfd){var xhr=dfd.ioArgs.xhr;if(_d._isDocumentOk(xhr)){dfd.callback(dfd);}else{var err=new Error("Unable to load "+dfd.ioArgs.url+" status:"+xhr.status);err.status=xhr.status;err.responseText=xhr.responseText;dfd.errback(err);}}
dojo._ioAddQueryToUrl=function(ioArgs){if(ioArgs.query.length){ioArgs.url+=(ioArgs.url.indexOf("?")==-1?"?":"&")+ioArgs.query;ioArgs.query=null;}}
dojo.xhr=function(method,args,hasBody){var dfd=_d._ioSetArgs(args,_deferredCancel,_deferredOk,_deferError);var ioArgs=dfd.ioArgs;var xhr=dfd.ioArgs.xhr=_d._xhrObj(dfd.ioArgs.args);if(!xhr){dfd.cancel();return dfd;}
if("postData"in args){ioArgs.query=args.postData;}else if("putData"in args){ioArgs.query=args.putData;}else if("rawBody"in args){ioArgs.query=args.rawBody;}else if((arguments.length>2&&!hasBody)||"POST|PUT".indexOf(method.toUpperCase())==-1){_d._ioAddQueryToUrl(dfd.ioArgs);}
xhr.open(method,ioArgs.url,args.sync!==true,args.user||undefined,args.password||undefined);if(args.headers){for(var hdr in args.headers){if(hdr.toLowerCase()==="content-type"&&!args.contentType){args.contentType=args.headers[hdr];}else if(args.headers[hdr]){xhr.setRequestHeader(hdr,args.headers[hdr]);}}}
xhr.setRequestHeader("Content-Type",args.contentType||_defaultContentType);if(!args.headers||!("X-Requested-With"in args.headers)){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}
_d._ioNotifyStart(dfd);if(dojo.config.debugAtAllCosts){xhr.send(ioArgs.query);}else{try{xhr.send(ioArgs.query);}catch(e){dfd.ioArgs.error=e;dfd.cancel();}}
_d._ioWatch(dfd,_validCheck,_ioCheck,_resHandle);xhr=null;return dfd;}
dojo.xhrGet=function(args){return _d.xhr("GET",args);}
dojo.rawXhrPost=dojo.xhrPost=function(args){return _d.xhr("POST",args,true);}
dojo.rawXhrPut=dojo.xhrPut=function(args){return _d.xhr("PUT",args,true);}
dojo.xhrDelete=function(args){return _d.xhr("DELETE",args);}})();
dojo.provide("dojo._base.fx");dojo.require("dojo._base.Color");dojo.require("dojo._base.connect");dojo.require("dojo._base.lang");dojo.require("dojo._base.html");(function(){var d=dojo;var _mixin=d._mixin;dojo._Line=function(start,end){this.start=start;this.end=end;};dojo._Line.prototype.getValue=function(n){return((this.end-this.start)*n)+this.start;};dojo.Animation=function(args){_mixin(this,args);if(d.isArray(this.curve)){this.curve=new d._Line(this.curve[0],this.curve[1]);}};d._Animation=d.Animation;d.extend(dojo.Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var _p=this._percent,_e=this.easing;return _e?_e(_p):_p;},_fire:function(evt,args){var a=args||[];if(this[evt]){if(d.config.debugAtAllCosts){this[evt].apply(this,a);}else{try{this[evt].apply(this,a);}catch(e){console.error("exception in animation handler for:",evt);console.error(e);}}}
return this;},play:function(delay,gotoStart){var _t=this;if(_t._delayTimer){_t._clearTimer();}
if(gotoStart){_t._stopTimer();_t._active=_t._paused=false;_t._percent=0;}else if(_t._active&&!_t._paused){return _t;}
_t._fire("beforeBegin",[_t.node]);var de=delay||_t.delay,_p=dojo.hitch(_t,"_play",gotoStart);if(de>0){_t._delayTimer=setTimeout(_p,de);return _t;}
_p();return _t;},_play:function(gotoStart){var _t=this;if(_t._delayTimer){_t._clearTimer();}
_t._startTime=new Date().valueOf();if(_t._paused){_t._startTime-=_t.duration*_t._percent;}
_t._endTime=_t._startTime+_t.duration;_t._active=true;_t._paused=false;var value=_t.curve.getValue(_t._getStep());if(!_t._percent){if(!_t._startRepeatCount){_t._startRepeatCount=_t.repeat;}
_t._fire("onBegin",[value]);}
_t._fire("onPlay",[value]);_t._cycle();return _t;},pause:function(){var _t=this;if(_t._delayTimer){_t._clearTimer();}
_t._stopTimer();if(!_t._active){return _t;}
_t._paused=true;_t._fire("onPause",[_t.curve.getValue(_t._getStep())]);return _t;},gotoPercent:function(percent,andPlay){var _t=this;_t._stopTimer();_t._active=_t._paused=true;_t._percent=percent;if(andPlay){_t.play();}
return _t;},stop:function(gotoEnd){var _t=this;if(_t._delayTimer){_t._clearTimer();}
if(!_t._timer){return _t;}
_t._stopTimer();if(gotoEnd){_t._percent=1;}
_t._fire("onStop",[_t.curve.getValue(_t._getStep())]);_t._active=_t._paused=false;return _t;},status:function(){if(this._active){return this._paused?"paused":"playing";}
return"stopped";},_cycle:function(){var _t=this;if(_t._active){var curr=new Date().valueOf();var step=(curr-_t._startTime)/(_t._endTime-_t._startTime);if(step>=1){step=1;}
_t._percent=step;if(_t.easing){step=_t.easing(step);}
_t._fire("onAnimate",[_t.curve.getValue(step)]);if(_t._percent<1){_t._startTimer();}else{_t._active=false;if(_t.repeat>0){_t.repeat--;_t.play(null,true);}else if(_t.repeat==-1){_t.play(null,true);}else{if(_t._startRepeatCount){_t.repeat=_t._startRepeatCount;_t._startRepeatCount=0;}}
_t._percent=0;_t._fire("onEnd",[_t.node]);!_t.repeat&&_t._stopTimer();}}
return _t;},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer;}});var ctr=0,_globalTimerList=[],timer=null,runner={run:function(){}};d.extend(d.Animation,{_startTimer:function(){if(!this._timer){this._timer=d.connect(runner,"run",this,"_cycle");ctr++;}
if(!timer){timer=setInterval(d.hitch(runner,"run"),this.rate);}},_stopTimer:function(){if(this._timer){d.disconnect(this._timer);this._timer=null;ctr--;}
if(ctr<=0){clearInterval(timer);timer=null;ctr=0;}}});var _makeFadeable=d.isIE?function(node){var ns=node.style;if(!ns.width.length&&d.style(node,"width")=="auto"){ns.width="auto";}}:function(){};dojo._fade=function(args){args.node=d.byId(args.node);var fArgs=_mixin({properties:{}},args),props=(fArgs.properties.opacity={});props.start=!("start"in fArgs)?function(){return+d.style(fArgs.node,"opacity")||0;}:fArgs.start;props.end=fArgs.end;var anim=d.animateProperty(fArgs);d.connect(anim,"beforeBegin",d.partial(_makeFadeable,fArgs.node));return anim;};dojo.fadeIn=function(args){return d._fade(_mixin({end:1},args));};dojo.fadeOut=function(args){return d._fade(_mixin({end:0},args));};dojo._defaultEasing=function(n){return 0.5+((Math.sin((n+1.5)*Math.PI))/2);};var PropLine=function(properties){this._properties=properties;for(var p in properties){var prop=properties[p];if(prop.start instanceof d.Color){prop.tempColor=new d.Color();}}};PropLine.prototype.getValue=function(r){var ret={};for(var p in this._properties){var prop=this._properties[p],start=prop.start;if(start instanceof d.Color){ret[p]=d.blendColors(start,prop.end,r,prop.tempColor).toCss();}else if(!d.isArray(start)){ret[p]=((prop.end-start)*r)+start+(p!="opacity"?prop.units||"px":0);}}
return ret;};dojo.animateProperty=function(args){var n=args.node=d.byId(args.node);if(!args.easing){args.easing=d._defaultEasing;}
var anim=new d.Animation(args);d.connect(anim,"beforeBegin",anim,function(){var pm={};for(var p in this.properties){if(p=="width"||p=="height"){this.node.display="block";}
var prop=this.properties[p];if(d.isFunction(prop)){prop=prop(n);}
prop=pm[p]=_mixin({},(d.isObject(prop)?prop:{end:prop}));if(d.isFunction(prop.start)){prop.start=prop.start(n);}
if(d.isFunction(prop.end)){prop.end=prop.end(n);}
var isColor=(p.toLowerCase().indexOf("color")>=0);function getStyle(node,p){var v={height:node.offsetHeight,width:node.offsetWidth}[p];if(v!==undefined){return v;}
v=d.style(node,p);return(p=="opacity")?+v:(isColor?v:parseFloat(v));}
if(!("end"in prop)){prop.end=getStyle(n,p);}else if(!("start"in prop)){prop.start=getStyle(n,p);}
if(isColor){prop.start=new d.Color(prop.start);prop.end=new d.Color(prop.end);}else{prop.start=(p=="opacity")?+prop.start:parseFloat(prop.start);}}
this.curve=new PropLine(pm);});d.connect(anim,"onAnimate",d.hitch(d,"style",anim.node));return anim;};dojo.anim=function(node,properties,duration,easing,onEnd,delay){return d.animateProperty({node:node,duration:duration||d.Animation.prototype.duration,properties:properties,easing:easing,onEnd:onEnd}).play(delay||0);};})();
dojo.provide("dojo._base.browser");dojo.require("dojo._base.window");dojo.require("dojo._base.connect");dojo.require("dojo._base.event");dojo.require("dojo._base.html");dojo.require("dojo._base.NodeList");dojo.require("dojo._base.query");dojo.require("dojo._base.xhr");dojo.require("dojo._base.fx");dojo.forEach(dojo.config.require,function(i){dojo["require"](i);});
dojo.provide("dojo.fx.easing");dojo.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}
return-1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}
n-=2;return(Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return-1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}
n-=2;return-1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;};n-=2;return(Math.pow(n,5)+2)/2;},sineIn:function(n){return-1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return-1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return(n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return(n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}
if(n==1){return 1;}
n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}
--n;return(-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return-1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return-1/2*(Math.sqrt(1-Math.pow(n,2))-1);}
n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return(Math.pow(n,2)*((s+1)*n-s))/2;}
n-=2;return(Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}
var p=.3;var s=p/4;n=n-1;return-1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}
var p=.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0)return 0;n=n*2;if(n==2)return 1;var p=.3*1.5;var s=p/4;if(n<1){n-=1;return-.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}
n-=1;return.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return(1-dojo.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+.75;}else if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+.984375;}
return l;},bounceInOut:function(n){if(n<0.5){return dojo.fx.easing.bounceIn(n*2)/2;}
return(dojo.fx.easing.bounceOut(n*2-1)/2)+0.5;}};
dojo.provide("dojo.string");dojo.string.rep=function(str,num){if(num<=0||!str){return"";}
var buf=[];for(;;){if(num&1){buf.push(str);}
if(!(num>>=1)){break;}
str+=str;}
return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch='0';}
var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(template,map,transform,thisObject){thisObject=thisObject||dojo.global;transform=transform?dojo.hitch(thisObject,transform):function(v){return v;};return template.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(match,key,format){var value=dojo.getObject(key,false,map);if(format){value=dojo.getObject(format,false,thisObject).call(thisObject,value,key);}
return transform(value,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,'');for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}
return str;};
dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(str,except){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(except&&except.indexOf(ch)!=-1){return ch;}
return"\\"+ch;});}
dojo.regexp.buildGroupRE=function(arr,re,nonCapture){if(!(arr instanceof Array)){return re(arr);}
var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}
return dojo.regexp.group(b.join("|"),nonCapture);}
dojo.regexp.group=function(expression,nonCapture){return"("+(nonCapture?"?:":"")+expression+")";}
dojo.provide("dojo.cookie");dojo.require("dojo.regexp");dojo.cookie=function(name,value,props){var c=document.cookie;if(arguments.length==1){var matches=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined;}else{props=props||{};var exp=props.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=props.expires=d;}
if(exp&&exp.toUTCString){props.expires=exp.toUTCString();}
value=encodeURIComponent(value);var updatedCookie=name+"="+value,propName;for(propName in props){updatedCookie+="; "+propName;var propValue=props[propName];if(propValue!==true){updatedCookie+="="+propValue;}}
document.cookie=updatedCookie;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled"in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}
return navigator.cookieEnabled;};
dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(returnWrappers){this.pairs=[];this.returnWrappers=returnWrappers||false;}
dojo.extend(dojo.AdapterRegistry,{register:function(name,check,wrap,directReturn,override){this.pairs[((override)?"unshift":"push")]([name,check,wrap,directReturn]);},match:function(){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[1].apply(this,arguments)){if((pair[3])||(this.returnWrappers)){return pair[2];}else{return pair[2].apply(this,arguments);}}}
throw new Error("No match found");},unregister:function(name){for(var i=0;i<this.pairs.length;i++){var pair=this.pairs[i];if(pair[0]==name){this.pairs.splice(i,1);return true;}}
return false;}});
dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(fname,onloadstr,uri){if(window[fname]){return window[fname];}
if(window.frames[fname]){return window.frames[fname];}
var cframe=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"
+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"
+" to the path on your domain to blank.html");}
turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}
var ifrstr=dojo.isIE?'<iframe name="'+fname+'" src="'+turi+'" onload="'+onloadstr+'">':'iframe';cframe=dojo.doc.createElement(ifrstr);with(cframe){name=fname;setAttribute("name",fname);id=fname;}
dojo.body().appendChild(cframe);window[fname]=cframe;with(cframe.style){if(!(dojo.isSafari<3)){position="absolute";}
left=top="1px";height=width="1px";visibility="hidden";}
if(!dojo.isIE){this.setSrc(cframe,turi,true);cframe.onload=new Function(onloadstr);}
return cframe;},setSrc:function(iframe,src,replace){try{if(!replace){if(dojo.isWebKit){iframe.location=src;}else{frames[iframe.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit>521){idoc=iframe.contentWindow.document;}else if(dojo.isSafari){idoc=iframe.document;}else{idoc=iframe.contentWindow;}
if(!idoc){iframe.location=src;return;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(iframeNode){var doc=iframeNode.contentDocument||(((iframeNode.name)&&(iframeNode.document)&&(dojo.doc.getElementsByTagName("iframe")[iframeNode.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[iframeNode.name].contentWindow.document)))||((iframeNode.name)&&(dojo.doc.frames[iframeNode.name])&&(dojo.doc.frames[iframeNode.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}
var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var value=null;try{var ioArgs=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var handleAs=ioArgs.handleAs;value=ifd;if(handleAs!="html"){if(handleAs=="xml"){if(dojo.isIE){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var xmlText=(dii._frame.contentWindow.document).documentElement.innerText;xmlText=xmlText.replace(/>\s+</g,"><");xmlText=dojo.trim(xmlText);var fauxXhr={responseText:xmlText};value=dojo._contentHandlers["xml"](fauxXhr);}}else{value=ifd.getElementsByTagName("textarea")[0].value;if(handleAs=="json"){value=dojo.fromJson(value);}else if(handleAs=="javascript"){value=dojo.eval(value);}}}}catch(e){value=e;}finally{ioArgs._callNext();}
return value;},function(error,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return error;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}}
this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return!dfd.ioArgs["_hasError"];},function(dfd){return(!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}
do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}
var ioArgs=dfd.ioArgs;var args=ioArgs.args;ioArgs._contentToClean=[];var fn=dojo.byId(args["form"]);var content=args["content"]||{};if(fn){if(content){var pHandler=function(name,value){var tn;if(dojo.isIE){tn=dojo.doc.createElement("<input type='hidden' name='"+name+"'>");}else{tn=dojo.doc.createElement("input");tn.type="hidden";tn.name=name;}
tn.value=value;fn.appendChild(tn);ioArgs._contentToClean.push(name);};for(var x in content){var val=content[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){pHandler(x,val[i]);}}else{if(!fn[x]){pHandler(x,val);}else{fn[x].value=val;}}}}
var actnNode=fn.getAttributeNode("action");var mthdNode=fn.getAttributeNode("method");var trgtNode=fn.getAttributeNode("target");if(args["url"]){ioArgs._originalAction=actnNode?actnNode.value:null;if(actnNode){actnNode.value=args.url;}else{fn.setAttribute("action",args.url);}}
if(!mthdNode||!mthdNode.value){if(mthdNode){mthdNode.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}
ioArgs._originalTarget=trgtNode?trgtNode.value:null;if(trgtNode){trgtNode.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}
fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var tmpUrl=args.url+(args.url.indexOf("?")>-1?"&":"?")+ioArgs.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,tmpUrl,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}
var ioArgs=dfd.ioArgs;var args=ioArgs.args;var fNode=dojo.byId(args.form);if(fNode){var toClean=ioArgs._contentToClean;for(var i=0;i<toClean.length;i++){var key=toClean[i];for(var j=0;j<fNode.childNodes.length;j++){var chNode=fNode.childNodes[j];if(chNode.name==key){dojo.destroy(chNode);break;}}}
if(ioArgs["_originalAction"]){fNode.setAttribute("action",ioArgs._originalAction);}
if(ioArgs["_originalTarget"]){fNode.setAttribute("target",ioArgs._originalTarget);fNode.target=ioArgs._originalTarget;}}
ioArgs._finished=true;}}
dojo.provide("dijit._base.place");dojo.require("dojo.AdapterRegistry");dijit.getViewport=function(){var scrollRoot=(dojo.doc.compatMode=='BackCompat')?dojo.body():dojo.doc.documentElement;var scroll=dojo._docScroll();return{w:scrollRoot.clientWidth,h:scrollRoot.clientHeight,l:scroll.x,t:scroll.y};};dijit.placeOnScreen=function(node,pos,corners,padding){var choices=dojo.map(corners,function(corner){var c={corner:corner,pos:{x:pos.x,y:pos.y}};if(padding){c.pos.x+=corner.charAt(1)=='L'?padding.x:-padding.x;c.pos.y+=corner.charAt(0)=='T'?padding.y:-padding.y;}
return c;});return dijit._place(node,choices);}
dijit._place=function(node,choices,layoutNode){var view=dijit.getViewport();if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(node);}
var best=null;dojo.some(choices,function(choice){var corner=choice.corner;var pos=choice.pos;if(layoutNode){layoutNode(node,choice.aroundCorner,corner);}
var style=node.style;var oldDisplay=style.display;var oldVis=style.visibility;style.visibility="hidden";style.display="";var mb=dojo.marginBox(node);style.display=oldDisplay;style.visibility=oldVis;var startX=(corner.charAt(1)=='L'?pos.x:Math.max(view.l,pos.x-mb.w)),startY=(corner.charAt(0)=='T'?pos.y:Math.max(view.t,pos.y-mb.h)),endX=(corner.charAt(1)=='L'?Math.min(view.l+view.w,startX+mb.w):pos.x),endY=(corner.charAt(0)=='T'?Math.min(view.t+view.h,startY+mb.h):pos.y),width=endX-startX,height=endY-startY,overflow=(mb.w-width)+(mb.h-height);if(best==null||overflow<best.overflow){best={corner:corner,aroundCorner:choice.aroundCorner,x:startX,y:startY,w:width,h:height,overflow:overflow};}
return!overflow;});node.style.left=best.x+"px";node.style.top=best.y+"px";if(best.overflow&&layoutNode){layoutNode(node,best.aroundCorner,best.corner);}
return best;}
dijit.placeOnScreenAroundNode=function(node,aroundNode,aroundCorners,layoutNode){aroundNode=dojo.byId(aroundNode);var oldDisplay=aroundNode.style.display;aroundNode.style.display="";var aroundNodePos=dojo.position(aroundNode,true);aroundNode.style.display=oldDisplay;return dijit._placeOnScreenAroundRect(node,aroundNodePos.x,aroundNodePos.y,aroundNodePos.w,aroundNodePos.h,aroundCorners,layoutNode);};dijit.placeOnScreenAroundRectangle=function(node,aroundRect,aroundCorners,layoutNode){return dijit._placeOnScreenAroundRect(node,aroundRect.x,aroundRect.y,aroundRect.width,aroundRect.height,aroundCorners,layoutNode);};dijit._placeOnScreenAroundRect=function(node,x,y,width,height,aroundCorners,layoutNode){var choices=[];for(var nodeCorner in aroundCorners){choices.push({aroundCorner:nodeCorner,corner:aroundCorners[nodeCorner],pos:{x:x+(nodeCorner.charAt(1)=='L'?0:width),y:y+(nodeCorner.charAt(0)=='T'?0:height)}});}
return dijit._place(node,choices,layoutNode);};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x"in x&&"y"in x&&"width"in x&&"height"in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(node,aroundElement,aroundCorners,layoutNode){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAlignment=function(position,leftToRight){var align={};dojo.forEach(position,function(pos){switch(pos){case"after":align[leftToRight?"BR":"BL"]=leftToRight?"BL":"BR";break;case"before":align[leftToRight?"BL":"BR"]=leftToRight?"BR":"BL";break;case"below":align[leftToRight?"BL":"BR"]=leftToRight?"TL":"TR";align[leftToRight?"BR":"BL"]=leftToRight?"TR":"TL";break;case"above":default:align[leftToRight?"TL":"TR"]=leftToRight?"BL":"BR";align[leftToRight?"TR":"TL"]=leftToRight?"BR":"BL";break;}});return align;};dijit.getPopupAroundAlignment=function(position,leftToRight){var align={};dojo.forEach(position,function(pos){switch(pos){case"after":align[leftToRight?"BR":"BL"]=leftToRight?"BL":"BR";break;case"before":align[leftToRight?"BL":"BR"]=leftToRight?"BR":"BL";break;case"below":align[leftToRight?"BL":"BR"]=leftToRight?"TL":"TR";align[leftToRight?"BR":"BL"]=leftToRight?"TR":"TL";break;case"above":default:align[leftToRight?"TL":"TR"]=leftToRight?"BL":"BR";align[leftToRight?"TR":"TL"]=leftToRight?"BR":"BL";break;}});return align;};
kit=dojo;if(!window.opus){var opus={};}
opus.nop=function(){};opus.nob={};opus.registry={add:opus.nop};kit.keys.MACDELETE=63272;
opus.splitUnits=function(inValue){if(inValue===undefined||inValue===null||inValue===""||inValue=="auto"){return null;}else{var m=String(inValue).match(/([\+\-\.0-9]*)(\D*)/);var v={value:Number(m[1]||0),units:m[2]||"px"};return v;}};opus.clamp=function(v,mn,mx){if(mn){v=Math.max(mn,v);}
if(mx){v=Math.min(mx,v);}
return v;};opus.round=function(v){return Math.round(v*1000)/1000;};opus.reindex=function(inObject,inPropMap){var x;for(var n in inObject){x=inPropMap[n];if(x){inObject[x]=inObject[n];delete inObject[n];}}};opus.isNativeKeyTarget=function(e){var tagName=e.target.tagName;for(var i in opus.isNativeKeyTarget.tags){if(tagName==i){return true;}}}
opus.isNativeKeyTarget.tags={"INPUT":1,"TEXTAREA":1,"SELECT":1,"OBJECT":1,"CANVAS":1};opus.argify=function(inSearch){var args=inSearch.slice(1).split("&");for(var i=0,a,nv;a=args[i];i++){nv=args[i]=a.split("=");args[nv[0]]=nv.length>1?nv[1]:true;}
return args;};opus.job=function(inJobName,inJob,inWait){opus.job.stop(inJobName);opus.job._jobs[inJobName]=setTimeout(function(){opus.job.stop(inJobName);inJob();},inWait);};opus.job.stop=function(inJobName){if(opus.job._jobs[inJobName]){clearTimeout(opus.job._jobs[inJobName]);delete opus.job._jobs[inJobName];}};opus.job._jobs={};opus.path={pattern:/\$([^\/\\]*)(\/)?/g,rewrite:function(inPath){var working,result=inPath;do{working=false;result=result.replace(this.pattern,function(macro,name){working=true;var path=opus.paths[name];return path?(path.charAt(path.length-1)=="/"?path:path+"/"):"";});}while(working);return result;},getExtension:function(inPath){var n=inPath;var i=n.lastIndexOf(".");if((i>=0)&&(i>=n.lastIndexOf("/"))){return n.slice(i-n.length);}
return"";},getName:function(inPath){var n=inPath;var i=n.lastIndexOf("/")+1;if(i){n=n.slice(i-n.length);}
var i=n.lastIndexOf(".");if(i>=0){n=n.slice(0,i-n.length);}
return n;},getFolder:function(inPath){var n=inPath;var i=n.lastIndexOf("/")+1;if(i){return n.slice(0,i-n.length);}
return"";},isRelative:function(inPath){return((inPath[0]!="/")&&(inPath[0]!="$")&&(inPath.slice(0,5)!="http:"));}};opus.findScript=function(inName){var l=inName.length;var scripts=document.getElementsByTagName("script");for(var i=0,s,src;(s=scripts[i]);i++){src=s.getAttribute("src");if(src&&src.slice(-l)==inName){return src.slice(0,-l);}}};if(!opus.paths){opus.paths={};}
if(!opus.paths.opus){opus.args=opus.argify(location.search);opus.paths.opus=opus.findScript("opus-m.js");}
opus.declare=function(className,props){var dd=arguments.callee;var superclass=props.isa;var mixins=props.mixins;delete props.mixins;if(mixins){dojo.forEach(mixins,function(m,i){if(!m){throw(className+": mixin #"+i+" is null");}
superclass=dd._delegate(superclass,m);});}
var ctor=dd._delegate(superclass);props=props||{};ctor.extend(props);var init=props.hasOwnProperty("constructor")?props.constructor:null;dojo.extend(ctor,{declaredClass:className,_constructor:init});ctor.prototype.constructor=ctor;return dojo.setObject(className,ctor);};dojo.mixin(opus.declare,{_delegate:function(base,mixin){var dd=opus.declare,bp=(base||0).prototype,mp=mixin?mixin.prototype:null;var ctor=dd._makeCtor();dojo.mixin(ctor,{superclass:bp,mixin:mp,extend:dd._extend});if(base){ctor.prototype=dojo._delegate(bp);}
dojo.extend(ctor,dd._core,mp,{_constructor:null,preamble:null});ctor.prototype.constructor=ctor;ctor.prototype.declaredClass=(bp||0).declaredClass+'_'+(mp?mp.declaredClass:"Object");return ctor;},_extend:function(props){var i,fn;for(i in props){if(dojo.isFunction(fn=props[i])&&!0[i]){fn.nom=i;fn.ctor=this;}}
dojo.extend(this,props);},_makeCtor:function(){return function(){this._construct(arguments);};},_core:{_construct:function(args){var c=args.callee,s=c.superclass,ct=s&&s.constructor,m=c.mixin,mct=m&&m.constructor,a=args,ii,fn;if(ct&&ct.apply){ct.apply(this,a);}
if(mct&&mct.apply){mct.apply(this,a);}
if((ii=c.prototype._constructor)){ii.apply(this,args);}
if(this.constructor.prototype==c.prototype&&(ct=this.postscript)){ct.apply(this,args);}},_findMixin:function(mixin){var c=this.constructor,p,m;while(c){p=c.superclass;m=c.mixin;if(m==mixin||(m instanceof mixin.constructor)){return p;}
if(m&&m._findMixin&&(m=m._findMixin(mixin))){return m;}
c=p&&p.constructor;}},_findMethod:function(name,method,ptype,has){var p=ptype,c,m,f;do{c=p.constructor;m=c.mixin;if(m&&(m=this._findMethod(name,method,m,has))){return m;}
if((f=p[name])&&(has==(f==method))){return p;}
p=c.superclass;}while(p);return!has&&(p=this._findMixin(ptype))&&this._findMethod(name,method,p,has);},inherited:function(name,args,newArgs){var a=arguments;if(typeof a[0]!="string"){newArgs=args;args=name;name=args.callee.nom;}
a=newArgs||args;var c=args.callee,p=this.constructor.prototype,fn,mp;if(this[name]!=c||p[name]==c){mp=(c.ctor||0).superclass||this._findMethod(name,c,p,true);if(!mp){throw(this.declaredClass+': inherited method "'+name+'" mismatch');}
p=this._findMethod(name,c,mp,false);}
fn=p&&p[name];if(!fn){throw(mp.declaredClass+': inherited method "'+name+'" not found');}
return fn.apply(this,a);}}});
opus.Class=function(inName,inProperties){var ctor=opus.declare(inName,inProperties);var statics=inProperties.statics;delete inProperties.statics;kit.mixin(ctor,statics);var isa=inProperties.isa;if(isa&&isa.subclass){isa.subclass(ctor,inProperties);}
return ctor;};opus.hasProperties=function(inObject){for(var n in inObject){return true;}};opus.apply=function(inObject,inMethod,inArgs){if(inObject){if(kit.isString(inMethod)){inMethod=inObject[inMethod];}
if(inMethod){return inMethod.apply(inObject,inArgs||[]);}}};opus.difference=function(inObjectA,inObjectB){var p$={};for(var n in inObjectA){if(inObjectA[n]!=inObjectB[n]){p$[n]=inObjectA[n];}}
return p$;};opus.combine=function(inObjectA,inObjectB){var aValue,bValue;for(var name in inObjectB){bValue=inObjectB[name];if(kit.isFunction(aValue)||kit.isFunction(bValue)||!kit.isObject(bValue)){inObjectA[name]=bValue;}else{aValue=inObjectA[name];if(kit.isObject(aValue)){opus.combine(aValue,bValue);}else{inObjectA[name]=kit.clone(bValue);}}}};opus.Class("opus.Object",{published:{},setProperty:function(inName,inValue){var fn='set'+inName.charAt(0).toUpperCase()+inName.slice(1);if(this[fn]){this[fn](inValue);}},getProperty:function(inName){var fn='get'+inName.charAt(0).toUpperCase()+inName.slice(1);if(this[fn]){return this[fn]();}},propertyChanged:function(inName,inValue){},getPublishedProperties:function(){return this.constructor.getPublishedProperties();},publishProperty:function(inName,inInfo){this.published[inName]=inInfo;opus.Object.publishProperty(this,inName,inInfo);},__console:function(inMethod,inArgs){if(console.firebug){console[inMethod].apply(console,inArgs);}else{console.log.call(console,inArgs.join(" "));}},_console:function(inMethod,inArgs){this.__console(inMethod,[inArgs.callee.caller.ctor.prototype.declaredClass+"."+inArgs.callee.caller.nom+"(): "].concat(dojo._toArray(inArgs)));},log:function(){this._console("log",arguments);},warn:function(){this._console("warn",arguments);},error:function(){this._console("error",arguments);}});kit.mixin(opus.Object,{_makeSetter:function(inName,icf,ocf){return function(inValue){this[inName]=inValue;if(this[icf]){this[icf](inName,inValue);}
if(this[ocf]){this[ocf](inName,this[inName]);}
this.propertyChanged(inName,this[inName]);};},_makeGetter:function(inName){return function(){return this[inName];};},_makeHandler:function(inName){return function(){if(this.dispatch){var cbn=this[inName];if(cbn){return this.dispatch(cbn,arguments);}}};},publishProperty:function(inObject,inName,inInfo){if(kit.isString(inInfo)||(typeof inInfo=="number")||(typeof inInfo=="boolean")){inInfo={value:inInfo};}
var o=inObject;if(inInfo.event){var h=this._makeHandler(inName);h.nom=inInfo.event;o[inInfo.event]=h;}{var cap=inName.charAt(0).toUpperCase()+inName.slice(1);var ocf=inName+"Changed";var icf=inInfo.onchange;var fn="set"+cap;if(!o[fn]||o[fn].auto){o[fn]=this._makeSetter(inName,icf,ocf);o[fn].auto=true;}
fn="get"+cap;if(!o[fn]){o[fn]=this._makeGetter(inName);}
if("value"in inInfo){o[inName]=inInfo.value;}}
return inInfo;},publishProperties:function(inCtor,inProperties){for(var n in inProperties){inProperties[n]=this.publishProperty(inCtor.prototype,n,inProperties[n]);}},statics:{subclass:function(inCtor,inProperties){kit.mixin(inCtor,opus.Object.statics);opus.Object.publishProperties(inCtor,inProperties.published||inProperties.publish);},getPublishedProperties:function(){var published={},p=this.prototype;var stack=[];while(p){if(p.published){stack.push(p.published);}
p=p.constructor.superclass;}
while(stack.length){opus.combine(published,stack.pop());}
return published;}}});kit.mixin(opus.Object,opus.Object.statics);
opus.$={};opus.findConstructorForType=function(inTypeName){var type=inTypeName||"Component";return kit.getObject("opus."+type)||kit.getObject(type);};opus._notifiedMissing={};opus.createComponent=function(inComponentProps){var ctor=opus.findConstructorForType(inComponentProps.type);if(!ctor){if(!opus._notifiedMissing[inComponentProps.type]){opus._notifiedMissing[inComponentProps.type]=true;console.log('opus.createComponent: "'+inComponentProps.type+'" not found.');}
ctor=opus.Control;}
return new ctor(inComponentProps);};opus.Class("opus.Updateable",{beginUpdate:function(){this._updating=true;},isUpdating:function(){return this._updating;},endUpdate:function(){this._updating=false;}});opus.Class("opus.Component",{isa:opus.Object,mixins:[opus.Updateable],toString:function(){return(this.name||"(anon)")+": "+this.type;},published:{name:{value:"",group:"Common"}},owner:null,components:null,constructor:function(inConfiguration){this.$={};},postscript:function(inConfig){this.importProperties(inConfig||opus.nob);this.create();this.postCreate();},importProperties:function(inConfig){if(inConfig){for(var n in inConfig){this[n]=inConfig[n];}}
if(!this.type){this.type=this.declaredClass.replace(/opus\./g,'');}},create:function(){this.createComponents(this.components,{owner:this});this.components=this.$;},postCreate:function(){this.ownerChanged();if(!this.owner||this.owner.readied){this.ready();}},ready:function(){if(!this.name){this.nameComponent(this);}
this.generateGlobalId();this.registerGlobalId(this);for(var n in this.$){this.$[n].ready();}
this.readied=true;},destructor:function(){opus.destroying=true;this.unregisterGlobalId(this);this.destructComponents();if(this.owner){this.owner.removeComponent(this);}
this.destroyed=true;opus.destroying=false;},destructComponents:function(){do{var n=null;for(n in this.$){this.$[n].destructor();break;}}while(n);this.components=this.$={};},destroy:function(){this.markForDestroy();this.destructor();this.notifyUpdate("destroy");},destroyComponents:function(){this.markForDestroy();this.destructComponents();this.unMarkForDestroy();},markForDestroy:function(){if(!this._destroying){this._destroying=true;this.markComponentsForDestroy();}},markComponentsForDestroy:function(){for(var n in this.$){this.$[n].markForDestroy();}},unMarkForDestroy:function(){this._destroying=false;}});opus.Component.extend({ownerChanged:function(){if(this.owner){this.owner.addComponent(this);}},setName:function(inName){if(this.owner&&!this.owner.renameComponent(this,inName)){return;}
this.name=inName;this.nameChanged(inName);},nameChanged:function(){this.notifyUpdate("nameChanged");},findDispatchTarget:function(inName){if(this.owner[inName]){return this.owner;}else return this.owner.dispatchProxy||this.owner;},dispatch:function(inName,inArguments){var target=this.findDispatchTarget(inName);if(target){var fn=target[inName];if(fn){return fn.apply(target,[this].concat(kit._toArray(inArguments)));}}},addComponent:function(inComponent){if(!inComponent.name){this.nameComponent(inComponent);}
this.$[inComponent.name]=inComponent;},removeComponent:function(inComponent){delete this.$[inComponent.name];},renameComponent:function(inComponent,inName){if(this.$[inName]){return false;}
delete this.$[inComponent.name];this.$[inName]=inComponent;return true;},nameComponent:function(inComponent){var prefix=(inComponent.type||"notype").split(".").pop();prefix=prefix.charAt(0).toLowerCase()+prefix.slice(1);this._componentNameMap=this._componentNameMap||{};var i=this._componentNameMap[prefix]||1;for(var name;Boolean(this.$[name=prefix+String(i)]);i++){}
this._componentNameMap[prefix]=Number(i)+1;inComponent.name=name;},getRootComponent:function(){return this.owner?this.owner.getRootComponent():this;},findComponent:function(inName){var c=this.$[inName];return(c||!this.owner)?c:this.owner.findComponent(inName);},findProperty:function(inName){var p=this[inName];return(p||!this.owner)?p:this.owner.findProperty(inName);},rewritePath:function(inPath){return opus.path.rewrite(inPath);},isDesigning:function(){return false;}});opus.Component.extend({generateGlobalId:function(){this.globalId=this.owner?this.owner.globalId+"-"+this.name:this.name;},registerGlobalId:function(inComponent){if(!inComponent.noEvents){opus.$[inComponent.globalId]=inComponent;}},unregisterGlobalId:function(inComponent){delete opus.$[inComponent.globalId];}});opus.Component.extend({adjustSubcomponentProps:function(inProps){if(!inProps.type){inProps.type=this.defaultType;}
inProps.owner=inProps.owner||this.childOwner||this.owner||this;},installComponent:function(inComponent,inChildProps){},createComponent:function(inConfiguration,inDefault){var props={};if(inDefault){props=kit.mixin(props,inDefault);}
kit.mixin(props,inConfiguration);this.adjustSubcomponentProps(props);return opus.createComponent(props);},createComponents:function(inComponents,inChildProps){for(var i=0,c;inComponents&&(c=inComponents[i]);i++){if(c instanceof opus.Component){this.installComponent(c,inChildProps);}else{this.createComponent(c,inChildProps);}}},notifyUpdate:function(inUpdateInfo){if(this.owner&&this.readied&&(!this._destroying||this.destroyed)){this.owner.componentUpdated(this,inUpdateInfo);}},componentUpdated:function(inComponent,inUpdateInfo){}});opus.Component.extend({exportProperties:function(){var props={},v,p,p$=this.getPublishedProperties();for(var n in p$){p=p$[n];if(!p.noExport){v=this.getProperty(n);if(v!=this.constructor.prototype[n]){props[n]=v;}}}
props.type=this.type||this.declaredClass.split(".").pop();return props;},exportComponents:function(inRoot){var comps=[],c;if(this==inRoot){for(var i in this.$){c=this.$[i];if(this.shouldExportComponent(c,inRoot)){comps.push(c.exportComponent(inRoot));}}}
return comps;},shouldExportComponent:function(inComponent,inRoot){return(inComponent.owner==inRoot)&&!inComponent.noExport;},exportComponent:function(inRoot){var props=this.exportProperties();var comps=this.exportComponents(inRoot||this);if(comps.length){props.components=comps;}
return props;},write:function(inRoot){return this.exportComponent(inRoot);},serialize:function(inRoot){return kit.toJson(this.write(inRoot),true);}});
opus.Class("opus.DomNode",{node:null,_append:function(){if(this.node){var pn=kit.byId(this.parentNode);if(pn){pn.appendChild(this.node);}}},_remove:function(){if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},setNode:function(inNode){var n=kit.byId(inNode);if(n!=this.node){this._remove();this.node=n;this._append();}},setParentNode:function(inParentNode){if(!inParentNode){this._remove();}
this.parentNode=inParentNode;this._append();},addChildNode:function(inNode){this.node.appendChild(inNode);},insertNodeAt:function(inNode,inAt){var sib=this.node.childNodes[inAt];this.node.insertBefore(inNode,sib);},show:function(){this.node.style.display="";},hide:function(){this.node.style.display="none";},attributesToNode:function(inAttributes){for(var n in inAttributes){var v=inAttributes[n];if(n=="className"){n="class";}
if(v===null){this.node.removeAttribute(n);}else{this.node.setAttribute(n,v);}}},stylesToNode:function(inStyles){this.node.style.cssText=opus.stylesToHtml(inStyles);},boxToNode:function(inBox){var s=this.node.style,u="px";if(("w"in inBox)&&inBox.w>=0){s.width=inBox.w+u;}
if(("h"in inBox)&&inBox.h>=0){s.height=inBox.h+u;}
if(inBox.l!==undefined){s.left=inBox.l+u;}
if(inBox.t!==undefined){s.top=inBox.t+u;}}});opus.Class("opus.AbstractDomNodeBuilder",{isa:opus.DomNode,content:"",nodeTag:"div",getContent:function(){return this.content;},getDomStyles:function(){},getDomAttributes:function(){},generateHtml:function(){var c=this.getContent();var h='<'
+this.nodeTag
+opus.attributesToHtml(this.getDomAttributes())
+' style="'+opus.stylesToHtml(this.getDomStyles())+'"';if(this.nodeTag=="img"){h+='/>';}else{h+='>'
+c
+'</'+this.nodeTag+'>';}
return h;},renderDomAttributes:function(){this.attributesToNode(this.getDomAttributes());},renderDomStyles:function(){this.stylesToNode(this.getDomStyles());},renderDomContent:function(){this.node.innerHTML=this.getContent();},renderDom:function(){this.renderDomAttributes();this.renderDomStyles();this.renderDomContent();},renderNode:function(){this.setNode(document.createElement(this.nodeTag));this.renderDom();},render:function(){if(this.node){this.renderDom();}else{this.renderNode();}}});opus.Class("opus.DomNodeBuilder",{isa:opus.AbstractDomNodeBuilder,constructor:function(){this.domStyles={};this.domAttributes={};},getDomStyles:function(){return this.domStyles;},getDomAttributes:function(){return this.domAttributes;}});opus.stylesToHtml=function(inStyles){var n,v,h='';for(n in inStyles){v=inStyles[n];if(v!==null&&v!==undefined&&v!==""){if(kit.isIE&&n=='opacity'){if(v>=0.99){continue;}
n='filter';v="progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.floor(v*100)+")";}
h+=n+':'+v+';';}}
return h;};opus.attributesToHtml=function(inAttributes){var n,v,h='';for(n in inAttributes){v=inAttributes[n];if(n=="className"){n="class";}
if(v!==null){h+=' '+n+'="'+v+'"';}}
return h;};
opus.Class("opus.Style",{defaultStyles:{padding:"",margin:"",border:"",bold:false,italic:false,underline:false,position:"absolute"},nullClient:{styleChanged:function(){}},constructor:function(inClient){this.styles=kit.clone(this.defaultStyles);this.runtimeStyles={};this.client=inClient||this.nullClient;},getComputedStyle:function(){var cs=kit.mixin({},this.styles);kit.mixin(cs,this.runtimeStyles);return cs;},_combineStyles:function(inStyles,inNew){for(var n in inNew){var v=inNew[n];if(v===null){delete inStyles[n];}else{inStyles[n]=v;}}},_addStyles:function(inStyles){this._combineStyles(this.styles,inStyles);},addStyles:function(inStyles){this._addStyles(inStyles);this.stylesChanged();},_addRuntimeStyles:function(inStyles){this._combineStyles(this.runtimeStyles,inStyles);},addRuntimeStyles:function(inStyles){this._addRuntimeStyles(inStyles);this.stylesChanged();},stylesChanged:function(){this.client.styleChanged();},exportProperties:function(){return opus.difference(this.styles,this.defaultStyles);}});
opus.Box={add:function(ioBoxA,inBoxB){ioBoxA.l+=("l"in inBoxB)?inBoxB.l:0;ioBoxA.t+=("t"in inBoxB)?inBoxB.t:0;ioBoxA.w+=("w"in inBoxB)?inBoxB.w:0;ioBoxA.h+=("h"in inBoxB)?inBoxB.h:0;return ioBoxA;},grow:function(inBox,inAmount){return{l:inBox.l-inAmount,t:inBox.t-inAmount,w:inBox.w+inAmount+inAmount,h:inBox.h+inAmount+inAmount};},inside:function(inX,inY,inBox){return(inX>inBox.l&&inX<inBox.r&&inY>inBox.t&&inY<inBox.b);}};opus.Class("opus.Bounds",{isa:opus.Object,boundsDirty:true,sizeDirty:true,constructor:function(inClient){this.client=inClient;},dirty:function(){this.boundsDirty=this.sizeDirty=true;},boundsChanged:function(){this.client.boundsChanged();},doSetBounds:function(inL,inT,inW,inH){if(!isNaN(inL)&&this.l!=inL){this.l=inL;this.boundsDirty=true;}
if(!isNaN(inT)&&this.t!=inT){this.t=inT;this.boundsDirty=true;}
if(inW>=0&&this.w!=inW){this.w=inW;this.boundsDirty=this.sizeDirty=true;}
if(inH>=0&&this.h!=inH){this.h=inH;this.boundsDirty=this.sizeDirty=true;}
this.b=this.t+this.h;this.r=this.l+this.w;this.boundsChanged();},setBounds:function(inL,inT,inW,inH){if(arguments.length==1){this.doSetBounds(inL.l,inL.t,inL.w,inL.h);}else{this.doSetBounds(inL,inT,inW,inH);}},getBounds:function(){return{l:this.l,t:this.t,w:this.w,h:this.h,r:this.r,b:this.b};}});opus.Class("opus.StyledBounds",{isa:opus.Bounds,constructor:function(){this.paddingExtents={l:0,t:0,r:0,b:0};this.borderExtents={l:0,t:0,r:0,b:0};this.marginExtents={l:0,t:0,r:0,b:0};this.superMarginExtents={l:0,t:0,r:0,b:0};this.nonClientExtents={w:0,h:0};this.scrollbarExtents={w:0,h:0};},_sides:{Left:"l",Top:"t",Right:"r",Bottom:"b"},setExtents:function(inStyle,inName){var v=Number(inStyle[inName]);var ex=this[inName+"Extents"]={l:v,t:v,r:v,b:v};var ss=this._sides;for(var s in ss){var ns=inName+s;if(ns in inStyle){ex[ss[s]]=inStyle[ns];}}
ex.w=ex.l+ex.r;ex.h=ex.t+ex.b;},updateMetrics:function(inStyle){this.setExtents(inStyle,"border");this.setExtents(inStyle,"padding");this.setExtents(inStyle,"margin");this._updateMetrics();},_updateMetrics:function(){var sme=this.superMarginExtents;sme.w=sme.l+sme.r;sme.h=sme.t+sme.b;var me=this.marginExtents;me.w=me.l+me.r;me.h=me.t+me.b;var pe=this.paddingExtents;var be=this.borderExtents;var nce=this.nonClientExtents;nce.w=sme.w+me.w+pe.w+be.w;nce.h=sme.h+me.h+pe.h+be.h;},getClientBounds:function(){return{l:this.paddingExtents.l,t:this.paddingExtents.t,w:this.w-this.nonClientExtents.w-this.scrollbarExtents.w,h:this.h-this.nonClientExtents.h-this.scrollbarExtents.h};},setClientSize:function(inSize){inSize.w+=this.nonClientExtents.w+this.scrollbarExtents.w;inSize.h+=this.nonClientExtents.h+this.scrollbarExtents.h;this.setBounds(inSize);},clientToMarginSize:function(inSize){inSize.w+=this.nonClientExtents.w+this.scrollbarExtents.w;inSize.h+=this.nonClientExtents.h+this.scrollbarExtents.h;return inSize;},getStrictBounds:function(){return{l:this.l,t:this.t,w:this.w-this.nonClientExtents.w,h:this.h-this.nonClientExtents.h};},getNonClientEdges:function(){var ex={};for(var i=0,n;(n=['l','t','r','b'][i]);i++){ex[n]=this.marginExtents[n]+this.borderExtents[n]+this.paddingExtents[n];}
return ex;},addDomOffset:function(ioBox){ioBox.l+=this.marginExtents.l+this.borderExtents.l;ioBox.t+=this.marginExtents.t+this.borderExtents.t;}});
opus._importPropMap={l:"left",t:"top",r:"right",b:"bottom",w:"width",h:"height",style:"styles",vAlign:"verticalAlign",hAlign:"horizontalAlign"};opus._exportPropMap={left:"l",top:"t",right:"r",bottom:"b",width:"w",height:"h",verticalAlign:"vAlign",horizontalAlign:"hAlign"};opus.Class("opus.Control",{isa:opus.Component,mixins:[opus.AbstractDomNodeBuilder],published:{hint:{value:null,group:"Common"},showing:{value:true,group:"Common"},content:{value:"",noInspect:true,group:"Common"},textSelection:{value:"",options:["","none","text"],noInspect:true},left:{value:null,onchange:"geometryChanged",group:"Geometry"},right:{value:null,onchange:"geometryChanged",group:"Geometry"},width:{value:null,onchange:"geometryChanged",group:"Geometry"},top:{value:null,onchange:"geometryChanged",group:"Geometry"},bottom:{value:null,onchange:"geometryChanged",group:"Geometry"},height:{value:null,onchange:"geometryChanged",group:"Geometry"},plane:{value:0,onchange:"styleChanged",group:"Geometry"},horizontalAlign:{value:"",onchange:"alignmentChanged",options:["","left","center","right"],group:"Geometry"},verticalAlign:{value:"",onchange:"alignmentChanged",options:["","top","center","bottom"],group:"Geometry"},style:{noExport:true,editor:{type:"StyleEditor"}},inFlow:{value:true,noInspect:true},_struts:{noExport:true,editor:{type:"SpringStrutEditor"},group:"Resize Behavior"},_size_ops:{noExport:true,editor:{type:"SizeOperations"},group:"Sizing Tools"},onclick:{event:"clickHandler"},ondblclick:{event:"dblclickHandler"},onmouseover:{event:"mouseoverHandler"},onmouseout:{event:"mouseoutHandler"},onmousedown:{event:"mousedownHandler"},onmouseup:{event:"mouseupHandler"},oncontextmenu:{event:"contextmenuHandler"},onshowingchanged:{event:"doShowingChanged"}},defaultStyles:{borderColor:"lightblue"},constructor:function(){this.style=new opus.Style(this);this.bounds=new opus.StyledBounds(this);},importProperties:function(inProps){opus.reindex(inProps,opus._importPropMap);this.style.addStyles(this.defaultStyles);this.style.addStyles(this.styles);if(inProps.styles){this.style.addStyles(inProps.styles);delete inProps.styles;}
this.inherited(arguments);},create:function(){this.inherited(arguments);},postCreate:function(){this.setManager(this.manager);this.parseGeometry();this.inherited(arguments);},destructor:function(){var selfDestroy=!this.isAncestorDestroying();if(selfDestroy){this.setNode(null);}
var p=this.parent;this.setManager(null);if(selfDestroy&&p){p.reflow();}
this.inherited(arguments);},isAncestorDestroying:function(){return this.parent&&(this.parent._destroying||this.parent.isAncestorDestroying());},isDesigning:function(){if("_designing"in this){return this._designing;}
var d=false;if(opus["Designer"]){var p=this.manager;while(p&&!d){d=p instanceof opus.Designer;p=p.manager;}}
this._designing=d;return d;},show:function(){this.setShowing(true);},hide:function(){this.setShowing(false);},showingChanged:function(){this.doShowingChanged();this.styleChanged();this.reflowParent();},textSelectionChanged:function(){this.attributesChanged();this.styleChanged();}});opus.Control.extend({setManager:function(inManager){if(this.manager){this.manager.removeControl(this);}
this.manager=inManager;if(this.manager){this.manager.addControl(this);}},reflowParent:function(){if(!this.isUpdating()){if(this.parent){this.parent.reflow();}else{this.renderBounds();}}}});opus.Control.extend({setParent:function(inParent){if(this.parent){this.parent.removeChild(this);}
this.parent=inParent;if(this.parent){this.parent.addChild(this);}},getRootControl:function(){return this.parent?this.parent.getRootControl():this;},isDescendantOf:function(inAncestor){var p=this;while(p&&p!=inAncestor){p=p.parent;}
return inAncestor&&(p==inAncestor);},findProperty:function(inName){var p=this[inName];return p?p:this.parent?this.parent.findProperty(inName):this.owner?this.owner.findProperty(inName):null;}});opus.Control.extend({parseGeometry:function(){this._left=opus.splitUnits(this.left);this._top=opus.splitUnits(this.top);this._width=opus.splitUnits(this.width);this._height=opus.splitUnits(this.height);this._right=opus.splitUnits(this.right);this._bottom=opus.splitUnits(this.bottom);},setGeometry:function(inGeometry){this.left=inGeometry.l;this.top=inGeometry.t;this.right=inGeometry.r;this.bottom=inGeometry.b;this.width=inGeometry.w;this.height=inGeometry.h;this.geometryChanged();},geometryChanged:function(){this.parseGeometry();this.reflowParent();},alignmentChanged:function(){this.bounds.sizeDirty=true;this.reflowParent();}});opus.Control.extend({setBounds:function(){this.bounds.setBounds.apply(this.bounds,arguments);if(this.bounds.boundsDirty){this.renderBounds();}},getBounds:function(){var b=this.bounds.getBounds();if(this.node){if(isNaN(b.l)){b.l=this.node.offsetLeft;}
if(isNaN(b.t)){b.t=this.node.offsetTop;}
if(!(b.w>0)){b.w=this.node.offsetWidth;}
if(!(b.h>0)){b.h=this.node.offsetHeight;}
b.r=b.l+b.w;b.b=b.t+b.h;}
return b;},getClientBounds:function(){return this.bounds.getClientBounds();},addDomOffset:function(ioBox){this.bounds.addDomOffset(ioBox);},addScrollOffset:function(ioBox){ioBox.l-=this.node.scrollLeft;ioBox.t-=this.node.scrollTop;},calcFrameOffset:function(inAncestor,inInside){var p=this;var off={l:0,t:0};if(!this.node){return off;}
if(inInside){p.addDomOffset(off);}
while(p&&p!=inAncestor){if(!("l"in p.bounds)){if(p.node){off.l+=p.node.offsetLeft;}}else{off.l+=p.bounds.l;}
if(!("t"in p.bounds)){if(p.node){off.t+=p.node.offsetTop;}}else{off.t+=p.bounds.t;}
p=p.parent;if(p){p.addScrollOffset(off);}
if(p&&p!=inAncestor){p.addDomOffset(off);}}
return off;}});opus.Control.extend({boundsChanged:function(){},contentChanged:function(){this.renderContent();},styleChanged:function(){var s=this.style.getComputedStyle();this.bounds.updateMetrics(s);this.boundsChanged();this.renderStyles();},attributesChanged:function(){this.renderAttributes();},canRender:function(){return!this.isUpdating()&&Boolean(this.node);},renderNode:function(){if(this.parent){this.parent.doFlow();this.setParentNode(this.parent.node);}
this.inherited(arguments);this.nodeRendered();},renderDom:function(){this.renderAttributes();this.renderStyles();this.renderContent();},renderAttributes:function(){if(this.canRender()){this.renderDomAttributes();}},renderStyles:function(){if(this.canRender()){this.renderDomStyles();this.stylesRendered();}},renderContent:function(){if(this.canRender()){this.renderDomContent();this.contentRendered();}},getDomAttributes:function(){var a$={id:this.globalId,ctype:this.declaredClass,onfocus:"opus.bubble(arguments[0])",onblur:"opus.bubble(arguments[0])",onscroll:"opus.bubble(arguments[0])",title:this.hint};if(kit.isIE&&this.textSelection){a$.onSelectStart=this.textSelection=="none"?"return false;":"return true;";}
kit.mixin(a$,this.attributes);this.modifyDomAttributes(a$);return a$;},modifyDomAttributes:function(inAttributes){},_expandStyleValue:function(inValues,inName,inDefault,inUnits){var r=[],v;for(var p in{Top:1,Right:1,Bottom:1,Left:1}){v=inValues[inName+p];r.push((v===undefined?inDefault:v)+inUnits);}
return r.join(" ");},getDomStyles:function(){var s=this.style.getComputedStyle();var s$={position:s.position,"float":s.float,overflow:s.overflow||(s.clip&&"hidden"),"overflow-x":s.overflowX,"overflow-y":s.overflowY,display:this.showing?s.display:"none",opacity:s.opacity,cursor:s.cursor,"z-index":(s.zIndex||this.plane)?this.plane*100+(s.zIndex||0):null,"background-color":s.bgColor,"background-image":s.bgImage?'url('+this.rewritePath(s.bgImage)+')':null,"background-repeat":s.bgRepeat||null,"background-position":s.bgPosition||null,"border-style":s.borderStyle||"solid","color":s.textColor||s.color,"text-align":s.textAlign,"text-decoration":s.underline?"underline":"","font-weight":s.bold?"bold":"","font-style":s.italic?"italic":"","font-family":s.fontFamily,"font-size":s.fontSize,"white-space":s.oneLine?"nowrap":s.whiteSpace,"vertical-align":s.verticalAlign};this.getBoundsStyles(s$,s);s$["-moz-user-select"]=s$["-webkit-user-select"]=this.textSelection;var fn=this._expandStyleValue;s$.padding=fn(s,"padding",s.padding||0,"px");s$["border-width"]=fn(s,"border",s.border||0,"px");s$["border-color"]=fn(s,"borderColor",s.borderColor||"inherit","");s$.margin=fn(s,"margin",s.margin||0,"px");var ns$=this.modifyDomStyles(s$,s);return ns$||s$;},getBoundsStyles:function(inStyles,inComputedStyles){var b=this.bounds.getStrictBounds();kit.mixin(inStyles,{left:isNaN(b.l)?null:b.l+"px",top:isNaN(b.t)?null:b.t+"px",width:b.w>=0?b.w+"px":null,height:b.h>=0?b.h+"px":null,right:inComputedStyles.right,bottom:inComputedStyles.bottom,"line-height":inComputedStyles.oneLine&&b.h>=0?b.h+"px":null});},modifyDomStyles:function(inStyles,inComputedStyles){},renderBounds:function(){if(this.canRender()){var b=this.bounds.getStrictBounds();this.boxToNode(b);var s=this.style.getComputedStyle();if(s.position){this.node.style.position=s.position;}
if(s["float"]){this.node.style.cssFloat=this.node.style.styleFloat=s["float"];}
if(s.oneLine&&b.h>=0){this.node.style.lineHeight=b.h+"px";}
this.boundsRendered();}},boundsRendered:function(){this.bounds.boundsDirty=false;},stylesRendered:function(){this.boundsRendered();},contentRendered:function(){},nodeRendered:function(){if(this.globalId){this.setNode(this.globalId);}},getNode:function(){if(!this.node){this.setNode(this.globalId);}
return this.node;}});opus.Control.extend({exportProperties:function(){var props=this.inherited(arguments);opus.reindex(props,opus._exportPropMap);if(this.parent&&props.type==this.parent.defaultControlType){delete props.type;}
var styles=opus.difference(this.style.exportProperties(),this.defaultStyles);if(opus.hasProperties(styles)){props.styles=styles;}
return props;}});
opus.layoutRegistry={layoutMap:{},register:function(inName,inCtor){this.layoutMap[inName]=new inCtor();},fetch:function(inName){return this.layoutMap[inName]||(this._def=(this._def||new opus.Layout()));}};opus.extentToPx=function extentToPx(inExtent,inSpan){return(!inExtent)?0:(inExtent.units!="%")?inExtent.value:inExtent.value*inSpan*0.01;};opus.pxToExtent=function pxToExtent(inPx,inSpan,inExtent){return(!inExtent||inExtent.units!="%")?Math.round(inPx):opus.round(inPx/inSpan*100)+"%";};opus.Class("opus.Layout",{isa:opus.Object,styles:{position:"static"},flow:function(inC$,inB,inContainer){inContainer.flowing=true;try{this._flow(inC$,inB,inContainer);}finally{inContainer.flowing=false;}},_flow:function(inC$,inB,inContainer){for(var i=0,c,b;(c=inC$[i]);i++){c.style._addRuntimeStyles(this.styles);b=this.geometryToBounds(c,inB,inContainer);c.bounds.setBounds(b);if(c.flow){c.flow();}}},geometryToBounds:function(c,cb,p){var b={};if(c._width){b.w=opus.extentToPx(c._width,cb.w);}
if(c._height){b.h=opus.extentToPx(c._height,cb.h);}
b.l=opus.extentToPx(c._left,cb.w)+cb.l;b.t=opus.extentToPx(c._top,cb.h)+cb.t;if(c._right){var rpx=opus.extentToPx(c._right,cb.w);if(c._left){var lpx=b.l-cb.l;if(c._width){b.l+=((cb.w-lpx-rpx)-b.w)/2;}else{b.w=cb.w-lpx-rpx;}}else{b.l=cb.w-rpx-b.w+cb.l;}}
switch(c.horizontalAlign){case'left':b.l=cb.l;break;case'right':b.l=cb.w-b.w;break;case'center':b.l=Math.max(cb.l,(cb.w-b.w)/2);break;}
if(c._bottom){var bpx=opus.extentToPx(c._bottom,cb.h);if(c._top){var tpx=b.t-cb.t;if(c._height){b.t+=((cb.h-tpx-bpx)-b.h)/2;}else{b.h=cb.h-tpx-bpx;}}else{b.t=cb.h-bpx-b.h+cb.t;}}
switch(c.verticalAlign){case'top':b.t=cb.t;break;case'bottom':b.t=cb.h-b.h;break;case'center':b.t=Math.max(cb.t,(cb.h-b.h)/2);break;}
return b;}});opus.Class("opus.layout.Relative",{isa:opus.Layout,styles:{position:"relative"},geometryToBounds:function(c,cb,p){c.top=null;var b=this.inherited(arguments);b.l-=cb.l;delete b.t;if(c.node){c.node.style.top="";}
return b;}});opus.layoutRegistry.register("relative",opus.layout.Relative);opus.Class("opus.layout.None",{isa:opus.Layout,_flow:function(inC$,inB,inContainer){for(var i=0,c;(c=inC$[i]);i++){c.style._addRuntimeStyles(this.styles);if(c.flow){c.flow();}}}});opus.layoutRegistry.register("none",opus.layout.None);opus.Class("opus.layout.Inline",{isa:opus.layout.None,styles:{position:"static",display:"inline"}});opus.layoutRegistry.register("inline",opus.layout.Inline);
opus.Class("opus.layout.Absolute",{isa:opus.Layout,styles:{position:"absolute"},constructor:function(){this.hints=[];},_flow:function(inC$,inB,inContainer){this.maxw=0;this.inherited(arguments);},geometryToBounds:function(c,cb,p){var b=this.inherited(arguments);this.maxR=Math.max(this.maxR,b.l+b.w);return b;}});opus.layoutRegistry.register("absolute",opus.layout.Absolute);
opus.Class("opus.layout.HBox",{isa:opus.Layout,styles:{position:"absolute"},_try_flow:function(inC$,inContainer){var b={};var cb=inContainer.getClientBounds();var ex=this.calcExtents(inC$,cb,inContainer);cb.w=Math.round(ex.free*ex.elastic);var maxh=0,l=cb.l;for(var i=0,c;c=inC$[i];i++){c.style._addRuntimeStyles(this.styles);b=this.geometryToBounds(c,cb,inContainer);b.l=l;c.bounds.setBounds(b);if(c.flow){c.flow();}
l+=c.bounds.w;maxh=Math.max(maxh,c.bounds.h);}
b.maxh=maxh;return b;},_flow:function(inC$,inB,inContainer){var c=inContainer;c.bounds.scrollbarExtents={h:c._overflowed?17:0,w:0};var b=this._try_flow(inC$,c);if(c.scroll!==false){var overflow=((c.horizontalAlign!="fit"||c.width!="auto")&&b.l>inB.w+inB.l+8)?"auto":null;if(Boolean(overflow)!=Boolean(c._overflowed)){c._overflowed=!c._overflowed;c.bounds.scrollbarExtents={h:c._overflowed?17:0,w:0};b=this._try_flow(inC$,c);}
var ox=c.style.styles.overflowX;if(!(ox==overflow)){c.style.addRuntimeStyles({overflowX:overflow});c.bounds.dirty();}}
if(c.horizontalAlign=="fit"||c.width=="auto"){c.bounds.setClientSize({w:b.l-inB.l});}
if(c.verticalAlign=="fit"||c.height=="auto"){c.bounds.setClientSize({h:b.maxh});}},calcExtents:function(inC$,inB,inContainer){var fixed=0,elastic=0;for(var i=0,c;c=inC$[i];i++){if(c._width){if(c._width.units=="%"){elastic+=c._width.value;}else{fixed+=c._width.value}}}
return{fixed:fixed,free:inB.w-fixed,elastic:(elastic>100)?100.0/elastic:1.0}},suggest:function(inHit,ioSuggest,inB,inDrag){kit.mixin(ioSuggest,{i:0,l:0,t:inB.t,h:inB.h,w:2});for(var i=0,c;c=this.dropList[i];i++){if(inHit.l<(c.bounds.l+c.bounds.w/2)){ioSuggest.i=i;ioSuggest.l=c.bounds.l-1;return;}
ioSuggest.i=i+1;ioSuggest.l=c.bounds.l+c.bounds.w;}}});opus.layoutRegistry.register("hbox",opus.layout.HBox);opus.layoutRegistry.register("columns",opus.layout.HBox);opus.Class("opus.layout.VBox",{isa:opus.Layout,styles:{position:"absolute"},_try_flow:function(inC$,inContainer){var cb=inContainer.getClientBounds();var b={l:cb.l,t:cb.t};for(var i=0,c,gb;c=inC$[i];i++){if(c.height=="auto"){gb=this.geometryToBounds(c,cb,inContainer);c.bounds.setBounds({w:gb.w});if(c.flow){c.flow();}}}
var ex=this.calcExtents(inC$,cb,inContainer);cb.h=ex.free*ex.elastic;var maxw=0,t=b.t;for(var i=0,c;c=inC$[i];i++){c.style._addRuntimeStyles(this.styles);b=this.geometryToBounds(c,cb,inContainer);b.h=b.h||0;b.t=t;c.bounds.setBounds(b);if(c.flow){c.flow();}
t+=c.bounds.h;maxw=Math.max(maxw,c.bounds.w);}
b.t=t;b.maxw=maxw;return b;},_flow:function(inC$,inB,inContainer){var c=inContainer;c.bounds.scrollbarExtents={w:c._overflowed?17:0,h:0};var b=this._try_flow(inC$,c);if(c.scroll!==false){var overflow=((c.verticalAlign!="fit"&&c.height!="auto")&&b.t>inB.h+inB.t+8)?"auto":null;if(Boolean(overflow)!=Boolean(c._overflowed)){c._overflowed=!c._overflowed;c.bounds.scrollbarExtents={w:c._overflowed?17:0,h:0};b=this._try_flow(inC$,c);}
var oy=c.style.styles.overflowY;if(!(oy==overflow)){c.style.addRuntimeStyles({overflowY:overflow});c.bounds.dirty();}}
if(c.verticalAlign=="fit"||c.height=="auto"){var h=b.t-inB.t;if(h<=0){if(c.isDesigning()){h=null;}}
c.bounds.setClientSize({h:h});}
if(c.horizontalAlign=="fit"||c.width=="auto"){c.bounds.setClientSize({w:b.maxw});}
if(c.parent&&(c.width=="auto"||c.height=="auto")&&!c.parent.flowing&&c.bounds.sizeDirty){c.bounds.sizeDirty=false;c.parent.reflow();}},calcExtents:function(inC$,inB,inContainer){var fixed=0,elastic=0;for(var i=0,c;c=inC$[i];i++){if(c.height=="auto"){fixed+=c.bounds.h;}else if(c._height){if(c._height.units=="%"){elastic+=c._height.value;}else{fixed+=c._height.value}}}
return{fixed:fixed,free:inB.h-fixed,elastic:(elastic>100)?100.0/elastic:1.0}},suggest:function(inHit,ioSuggest,inB,inDrag){kit.mixin(ioSuggest,{i:0,t:inB.t,l:inB.l,w:inB.w,h:2});for(var i=0,c;c=this.dropList[i];i++){if(inHit.t<(c.bounds.t+c.bounds.h/2)){ioSuggest.i=i;ioSuggest.t=c.bounds.t-1;return;}
ioSuggest.i=i+1;ioSuggest.t=c.bounds.t+c.bounds.h;}}});opus.layoutRegistry.register("vbox",opus.layout.VBox);opus.layoutRegistry.register("rows",opus.layout.VBox);
opus.Class("opus.layout.Float",{isa:opus.layout.Relative,styles:{float:"left",position:"relative"},geometryToBounds:function(c,cb,p){var b=this.inherited(arguments);delete b.l;return b;}});opus.layoutRegistry.register("float",opus.layout.Float);
opus.Class("opus.layout.Grid",{isa:opus.Layout,published:{layoutCellWidth:{value:100},layoutCellHeight:{value:100}},getLayoutCellWidth:function(inContainer){return inContainer.layoutCellWidth||this.layoutCellWidth;},getLayoutCellHeight:function(inContainer){return inContainer.layoutCellHeight||this.layoutCellHeight;},_flow:function(inC$,inB,inContainer){var cr=inContainer;var ex=this.calcExtents(inC$,inB,cr);cr.bounds.scrollbarExtents={w:ex.overflow?17:0,h:0};if(cr.height=="auto"){cr.bounds.setClientSize({h:ex.h});}else if(cr.scroll){if(cr.style.styles.overflowY!=ex.overflow){cr.style.addStyles({overflowY:ex.overflow});cr.bounds.boundsDirty=cr.bounds.sizeDirty=true;}}
var cb=cr.getClientBounds();var cw=this.getLayoutCellWidth(cr);var ch=this.getLayoutCellHeight(cr);var ew=0;if(cr.layoutStretchColumns||this.layoutStretchColumns){cw=cb.w/ex.columns;}else{ew=(cb.w-ex.columns*cw)/2;}
var b={t:cb.t,l:cb.l+ew,w:cw,h:ch};for(var i=0,c;c=inC$[i];i++){c.bounds.setBounds(b);if(c.flow){c.flow();}
b.l+=cw;if(i%ex.columns==ex.columns-1){b.l=cb.l+ew;b.t+=ch;}}},calcHeight:function(inC$,inContainer,inCols){var rows=Math.ceil(inC$.length/inCols);return rows*this.getLayoutCellHeight(inContainer);},calcExtents:function(inC$,inB,inContainer){var w=inB.w+inContainer.bounds.scrollbarExtents.w;var cw=this.getLayoutCellWidth(inContainer);var ch=this.getLayoutCellHeight(inContainer);var columns=Math.max(Math.floor(w/cw),1);var h=this.calcHeight(inC$,inContainer,columns);var overflow=(h>inB.h);if(overflow&&inContainer.height!="auto"){columns=Math.max(Math.floor((w-17)/cw),1);}
return{columns:columns,h:h,overflow:overflow?"auto":null};}});opus.layoutRegistry.register("grid",opus.layout.Grid);
opus.Class("opus.ContainerBase",{isa:opus.Control,defaultControlType:"Control",defaultContainerType:"Container",constructor:function(inProps){this.c$=[];},create:function(){this.inherited(arguments);this.createChrome(this.chrome);this.createControls(this.controls);},importProperties:function(inProps){opus.reindex(inProps,{layout:"layoutKind"});this.inherited(arguments);},installComponent:function(inComponent,inChildProps){this.inherited(arguments);if(inComponent instanceof opus.Control){inComponent.setManager(this);}},createChrome:function(inChrome){if(inChrome){this.createComponents(inChrome,{owner:this});}},createControls:function(inControls){if(inControls){this.createComponents(inControls);}},destructor:function(){this.destructControls();this.inherited(arguments);this.c$=null;},destructControls:function(){var c$=[].concat(this.getControls());for(var i=0,c;(c=c$[i]);i++){c.destructor();}},destroyControls:function(){this.markForDestroy();this.destructControls();this.unMarkForDestroy();this.reflow();this.renderContent();},markForDestroy:function(){if(!this._destroying){this.markControlsForDestroy();}
this.inherited(arguments);},markControlsForDestroy:function(inList){var m$=this.getControls();for(var i=0,c;(c=m$[i]);i++){c.markForDestroy();}}});opus.ContainerBase.extend({getControlParent:function(){return this.controlParent||this.$.client||this;},isContainerClient:function(){return this.owner&&this.owner.getControlParent&&(this.owner.getControlParent()==this);},addControl:function(inControl){var p=(inControl.owner==this)?this:this.getControlParent();inControl.setParent(p);},removeControl:function(inControl){inControl.setParent(null);},getControls:function(){var c$;if(this.$.client){c$=this.$.client.c$;if(!c$){console.error("Container.getControls: tried to get c$ on a non-container 'client' object (which has no controls)");c$=[];}
return c$;}else{if(!this.c$){console.error("Container.getControls: tried to get c$ on a container that has been destroyed");return[];}
c$=[];for(var i=0,c;(c=this.c$[i]);i++){if(c.owner!=this){c$.push(c);}}
return c$;}},indexOf:function(inControl){var c$=this.getControls();for(var i=0,c;(c=c$[i]);i++){if(c==inControl){return i;}}
return-1;},controlAtIndex:function(inIndex){return(this.getControls())[inIndex];}});opus.ContainerBase.extend({adjustSubcomponentProps:function(inProps){if(!inProps.type){inProps.type=inProps.controls?this.defaultContainerType:this.defaultControlType;}
if(!inProps.manager){inProps.manager=this;}
this.inherited(arguments);},addChild:function(inChild){this.c$.push(inChild);},removeChild:function(inChild){var i=this.indexOfChild(inChild);if(i>=0){this.c$.splice(i,1);}},indexOfChild:function(inChild){for(var i=0,c;(c=this.c$[i]);i++){if(c==inChild){return i;}}
return-1;},moveChild:function(inChild,inBeforeIndex){this.removeChild(inChild);this.c$.splice(inBeforeIndex,0,inChild);}});opus.ContainerBase.extend({getContent:function(){var h='';for(var i=0,c;(c=this.c$[i]);i++){h+=c.generateHtml();}
return h;},contentRendered:function(){this.inherited(arguments);this.nodesRendered();},nodesRendered:function(){for(var i=0,c;(c=this.c$[i]);i++){c.nodeRendered();c.contentRendered();c.stylesRendered();}}});opus.ContainerBase.extend({exportProperties:function(){var props=this.inherited(arguments);return props;},shouldExportComponent:function(inComponent,inRoot){return this.inherited(arguments)&&!((inComponent instanceof opus.Control)&&inComponent.parent);},shouldExportChild:function(inChild,inRoot){return(inChild.owner==inRoot)&&!inChild.noExport;},exportControls:function(inRoot){var children=[];var c$=this.getControls();for(var i=0,c;(c=c$[i]);i++){if(this.shouldExportChild(c,inRoot)){children.push(c.exportComponent(inRoot));}}
return children;},exportComponent:function(inRoot){var props=this.inherited(arguments);var controls=this.exportControls(inRoot||this);if(controls.length){props.controls=controls;}
return props;}});opus.Class("opus.Container",{isa:opus.ContainerBase,published:{content:{noExport:true},layoutKind:{value:"absolute",XnoInspect:true},dropTarget:{value:false,noInspect:true},scroll:{value:false}},defaultStyles:{overflow:"hidden",borderColor:"lightblue"},create:function(){this.inherited(arguments);this.layout=this.layout||opus.layoutRegistry.fetch(this.layoutKind);},layoutKindChanged:function(){this.layout=opus.layoutRegistry.fetch(this.layoutKind);this.reflow();},geometryChanged:function(){if(this.width=="auto"||this.height=="auto"){this.invalidateFlow();}
this.inherited(arguments);},validateFlow:function(){this.bounds.sizeDirty=false;},invalidateFlow:function(){this.bounds.sizeDirty=true;},isFlowInvalid:function(){return this.bounds.sizeDirty;},doFlow:function(){if(this.layout&&!this.isUpdating()){this.validateFlow();opus.flowCount++;var f$=this.buildFlowList();this.layout.flow(f$,this.getClientBounds(),this);}},flow:function(){if(this.isFlowInvalid()){this.doFlow();}},reflow:function(){if(!this.readied){return;}
opus.reflowing=true;try{this.doFlow();this.updateFlowBounds();}finally{opus.reflowing=false;}},updateFlowBounds:function(){if(this.bounds.boundsDirty){this.renderBounds();}
for(var i=0,c;(c=this.c$[i]);i++){if(c.bounds.boundsDirty){c.renderBounds();if(c.updateFlowBounds){c.updateFlowBounds();}}}},buildFlowList:function(){var fl=[];for(var i=0,c;(c=this.c$[i]);i++){if(c.inFlow!==false&&c.showing!==false){fl.push(c);}}
return fl;},setBounds:function(){this.bounds.setBounds.apply(this.bounds,arguments);if(this.bounds.sizeDirty){this.doFlow();this.updateFlowBounds();}
if(this.bounds.boundsDirty){this.renderBounds();}}});opus.Container.extend({dropTarget:false,canDrag:function(inDrag){},canDrop:function(inDrag){return true;},dragEnter:function(inDrag){this.layout.dragEnter(inDrag);},dragOver:function(inDrag){this.layout.dragOver(inDrag);},dragLeave:function(inDrag){this.layout.dragLeave(inDrag);},dragDrop:function(inDrag){this.layout.dragDrop(inDrag);},dropControl:function(inChild,inDropInfo,inOwner){var c=inChild,p=null;if(c instanceof opus.Control){p=c.parent;c.setManager(this);if(p){p.reflow();}}else{c=this.createComponent(c,{owner:inOwner});if(c.setCaption){c.setCaption(c.name);}}
c=this.controlDropped(c,inDropInfo);c.notifyUpdate("componentDropped");return c;},controlDropped:function(inChild,inDropInfo){inChild.parent.dropChild(inChild,inDropInfo);return inChild;},dropChild:function(inChild,inDropInfo){this.moveChild(inChild,inDropInfo.i);if(!inChild.node){inChild.renderNode();inChild.parentNode=null;}
this.insertNodeAt(inChild.node,inDropInfo.i);this.layout.dragBoundsToGeometry(inChild,{l:inDropInfo.l,t:inDropInfo.t});this.reflow();}});
opus.Class("opus.View",{isa:opus.Container,defaultStyles:{position:"relative"},minWidth:0,minHeight:0,constructor:function(){document.body.style.overflow="hidden";document.body.style.minHeight="64px";this._resizeConnect=kit.connect(window,"resize",this,"resize");},destructor:function(){kit.disconnect(this._resizeConnect);this.inherited(arguments);},ready:function(){this.inherited(arguments);this.render();},render:function(){opus.viewRender=true;try{if(!this.parentNode){this.setParentNode(document.body);}else{this.parentNode=kit.byId(this.parentNode);}
this.adjustSize();this.inherited(arguments);}finally{opus.viewRender=false;}},getSizeNode:function(){return this.parentNode;},adjustSize:function(){var n=this.getSizeNode();if(n){if(n.clientWidth==0||n.clientHeight==0){return;}
this.setBounds({w:Math.max(n.clientWidth,this.minWidth),h:Math.max(n.clientHeight,this.minHeight)});}},resize:function(){if(kit.isWebKit){setTimeout(kit.hitch(this,"adjustSize"),100);}else{this.adjustSize();}}});
opus.bubble=function(e){if(e){opus.dispatcher.dispatch(kit.fixEvent(e));}};opus.Class("opus.Dispatcher",{isa:opus.Object,constructor:function(){this.captures=[];kit.addOnLoad(kit.hitch(this,"connect"));},events:["click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","mousemove","keypress","keyup","keydown","focus","blur","paste","change","load","error","scroll"],connect:function(){this.connects=[];this.node=document.body;for(var i=0,n;(n=this.events[i]);i++){this.connects.push(kit.connect(this.node,"on"+n,this,"dispatch"));}
this.connects.push(kit.connect(window,"onbeforeunload",this,"dispatch"));this.node._dispatcher=true;},disconnect:function(){kit.forEach(this.connects,kit.disconnect);},findDispatchTarget:function(inNode){var t,n=inNode;try{while(n&&!t){t=opus.$[n.id];n=n.parentNode;}}catch(x){}
return t;},dispatchBubble:function(e,c){while(c){if(this.dispatchToTarget(e,c,"")===true){return true;}
c=c.parent;}
return false;},dispatchToTarget:function(e,c,suffix){var isMouseOverOut=(e.type=="mouseover"||e.type=="mouseout");if(isMouseOverOut){if(this.shouldIgnoreMouseOverOut(e,c)){return true;}
var synth={type:"child"+e.type,dispatchTarget:e.dispatchTarget};this.dispatchBubble(synth,c.parent);}
var fn=e.type+"Handler"+suffix;if(c[fn]&&!c.noEvents){if(c[fn](e,e.dispatchTarget)!==true){return false;}
return true;}},shouldIgnoreMouseOverOut:function(e,c){var rdt=this.findDispatchTarget(e.relatedTarget);return rdt&&rdt.isDescendantOf(c);},dispatch:function(e){e.cap=e.type.charAt(0).toUpperCase()+e.type.slice(1);var c=this.findDispatchTarget(e.target);e.dispatchTarget=c;var captured=false;if(this.captureTarget&&(e.type!="load")&&(e.type!="error")){if(!c||!c.isDescendantOf(this.captureTarget)){c=this.captureTarget;captured=true;}}
if(c){var handled=this.dispatchBubble(e,c);if(captured&&(e.type=="mouseout"||this.forwardEvents)){handled=this.forward(e);}}},forward:function(e){var c=e.dispatchTarget;return c&&this.dispatchBubble(e,c);},capture:function(inTarget,inShouldForward){if(this.captureTarget){this.captures.push(this.captureTarget);}
this.forwardEvents=inShouldForward;this.captureTarget=inTarget;},release:function(){this.captureTarget=this.captures.pop();}});opus.dispatcher=new opus.Dispatcher();
opus.Class("opus.Drag",{isa:opus.Component,hysteresis:3,create:function(){this.inherited(arguments);this.dispatcher=opus.dispatcher;},start:function(e){this.starting=true;this.dragging=false;this.dispatcher.capture(this);if(e){this.track(e);}
this.startEvent(e);},startEvent:function(e){},track:function(e){this.px=e.pageX;this.py=e.pageY;if(this.starting){this.px0=this.px;this.py0=this.py;this.starting=false;}
this.dx=this.dpx=this.px-this.px0;this.dy=this.dpy=this.py-this.py0;if(!this.dragging){if(Math.sqrt(this.dx*this.dx+this.dy*this.dy)>=this.hysteresis){this.startDragging();}}},startDragging:function(){this.dragging=true;},mousemoveHandler:function(e){this.track(e);if(this.dragging){this.drag(e);this.dragEvent(e);}},drag:function(e){},dragEvent:function(e){},mouseupHandler:function(e){if(this.dragging){this.drop(e);}
this.finish();},drop:function(e){this.dropEvent(e);},dropEvent:function(e){},finish:function(){this.dispatcher.release(this);this.finishEvent();},finishEvent:function(){}});opus.Class("opus.ScrimDrag",{isa:opus.Drag,useScrim:true,create:function(){this.inherited(arguments);this.childOwner=this;},ready:function(){this.inherited(arguments);this.root=this.owner.getRootControl();},startDragging:function(){this.inherited(arguments);if(this.useScrim){this.startScrim();}},startScrim:function(){if(!this.scrim){this.scrim=this.createComponent({name:"scrim",type:"Control",parent:this.root,inFlow:false,showing:false,styles:{bgColor:"transparent",zIndex:10000,cursor:this.cursor}});this.scrim.render();}
this.scrim.setBounds(this.root.getClientBounds());this.scrim.show();},finish:function(){this.inherited(arguments);if(this.scrim){this.scrim.hide();}}});opus.Class("opus.AvatarDrag",{isa:opus.ScrimDrag,avatarChrome:{type:"Sprite",spriteList:"$opus-Aristo/images/aristoGradient_16_30_x",autoWidth:false,spriteCol:0,spriteRow:0,height:32,content:"avatar",showing:false,inFlow:false,styles:{padding:4,border:1,textColor:"black",textAlign:"center",zIndex:5000,whiteSpace:"nowrap"}},offsetX:22,offsetY:-32,create:function(){this.inherited(arguments);this.avatar=this.createComponent(this.avatarChrome,{parentNode:document.body});this.avatar.render();},setAvatarContent:function(inContent){this.avatar.setContent(inContent);if(Boolean(inContent)!=this.avatar.showing){this.avatar.setShowing(Boolean(inContent));}},updateAvatarPosition:function(){this.avatar.setBounds({l:this.px+this.offsetX,t:this.py+this.offsetY});},start:function(e){this.inherited(arguments);this.updateAvatarPosition();if(this.avatar.content){this.avatar.show();}},drag:function(){this.inherited(arguments);this.updateAvatarPosition();},finish:function(){this.avatar.hide();this.inherited(arguments);}});
opus.loader={flights:0,inflight:0,resources:[],timeout:5000,create:function(){this.inherited(arguments);},appendToHead:function(inNode){var head=document.getElementsByTagName("head")[0];head.appendChild(inNode);},makeNode:function(inTag,inAttrs){var n=document.createElement(inTag);for(var i in inAttrs){n[i]=inAttrs[i];}
return n;},makeScriptNode:function(inUrl){return this.makeNode("script",{type:"text/javascript",src:inUrl});},writeCssTag:function(inUrl){var t='<link rel = "stylesheet" type="text/css" href="'+inUrl+'">';this.emitTag(t);},writeJsTag:function(inUrl){var t='<scrip'+'t type="text/javascript" src="'+inUrl+'"></scrip'+'t>';this.emitTag(t);},emitTag:function(inTag){document.write(inTag);},loadCss:function(inUrl){if(this.domReady){this.appendToHead(this.makeNode("link",{rel:"stylesheet",type:"text/css",href:inUrl}));}else{this.writeCssTag(inUrl);}},loadScript:function(inUrl){if(this.domReady){this.appendToHead(this.makeNode("script",{type:"text/javascript",src:inUrl}));}else{this.writeJsTag(inUrl);}},needResource:function(inResource){var need=(kit.indexOf(this.resources,inResource)==-1)
if(need){this.resources.push(inResource);}
return need;},request:function(inResources){for(var i=0,r,css;r=inResources[i];i++){if(this.needResource(r)){css=(r.slice(-4)==".css");this[css?"loadCss":"loadScript"](r);}}},loadScriptCb:function(inUrl,inCallback){var n=this.makeScriptNode(inUrl);var response=function(){clearTimeout(job);if(kit.isIE){n.onreadystatechange=null;}else{n.onload=n.onerror=null;}
inCallback();};if(kit.isIE){n.onreadystatechange=function(){if(this.readyState=='loaded'||this.readyState=='complete'){response();}};}else{n.onload=n.onerror=response;}
this.appendToHead(n);var job=setTimeout(function(){console.warn("timing out ("+job+")");response();},this.timeout);},loadResourceCb:function(inUrl,inCallback){inUrl=opus.path.rewrite(inUrl);if(this.needResource(inUrl)){css=(inUrl.slice(-4)==".css");if(css){this.loadCss(inUrl);}else{this.loadScriptCb(inUrl,inCallback);return;}}else{}
inCallback();},requestParallel:function(inResources,inComplete){inComplete=inComplete||opus.nop;var count=inResources.length;this.inflight+=count;var x=Math.floor(Math.random()*999)+1000;var response=function(e){opus.loader.inflight--;count--;if(count==0){inComplete();}};for(var i=0,r;r=inResources[i];i++){this.loadResourceCb(r,response);}},requestSerial:function(inResources,inComplete){inComplete=inComplete||opus.nop;var count=inResources.length;if(this.inflight==0){this.flights=0;}
this.inflight+=count;this.flights=Math.max(this.flights,this.inflight);var x=Math.floor(Math.random()*999)+1000;var inflight_quo;var request=function(r){var ol=opus.loader;ol.updateStatus(r);inflight_quo=ol.inflight-1;if(r.shift){ol.requestParallel(r,response);}else{ol.loadResourceCb(r,response);}};var response=function(e){opus.loader.inflight--;next();};var last_quo=-1;var next=function(){if(opus.loader.inflight>inflight_quo){if(last_quo!=inflight_quo){last_quo=inflight_quo;}
setTimeout(next,100);}else{opus.loader.updateStatus();if(inResources.length){request(inResources.shift());}else{inComplete();}}};request(inResources.shift());},whenReady:function(inCallback){var job=setInterval(function(){if(opus.loader.inflight==0){clearInterval(job);inCallback();}},100);},updateStatus:function(r){this.status(this.flights?(this.flights-this.inflight)/this.flights:0,r);},status:function(inStatus,inResourceOrNull){}};dojo.addOnLoad(function(){opus.loader.domReady=true;opus.loader.makeDependsList=function(inDepends){var parts,name,folder;for(var i=0,l;l=inDepends[i];i++){if(l.indexOf(".css")==-1&&l.indexOf(".js")==-1){parts=l.split("/");name=parts.pop();folder=parts.join("/")+(parts.length?"/":"");opus.paths[name]=folder;inDepends[i]=folder+name+"-depends.js";}}
return inDepends;}
opus.depends=function(inGoop){if(inGoop.paths){for(var n in inGoop.paths){opus.paths[n]=inGoop.paths[n];}}
var nobuild=function(){if(inGoop.nobuild){opus.loader.requestSerial(opus.loader.makeDependsList(inGoop.nobuild));}}
if(inGoop.build){opus.loader.requestSerial(opus.loader.makeDependsList(inGoop.build),nobuild);}else{nobuild();}}});
opus.json={_block:function(p,inDent){p=p.join(",\n");var j=(p?"\n"+p+"\n"+inDent:"");return j;},obj:function(inObj,inDent){var p=[],pp,v;for(var n in inObj){v=inObj[n];if(n=="isa"){v=v.prototype.declaredClass;}else{v=this.value(v,inDent+"\t");}
pp=inDent+"\t"+n+': '+v;p.push(pp);}
return"{"+this._block(p,inDent)+"}";},array:function(inObj,inDent){var p=[],pp;for(var i=0,v;v=inObj[i];i++){pp=inDent+"\t"+this.value(v,inDent+"\t");p.push(pp);}
return"["+this._block(p,inDent)+"]";},value:function(v,inDent){var t=(v===null||v===undefined)?"":typeof v;switch(t){case"string":v=v.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,"\\\"");return'"'+v+'"';break;case"function":var lines=v.toString();lines=lines.replace(/\n*\r/g,"\n");lines=lines.replace(/(^\.\.\.\.)|[\.\t]+(\.\.\.\.)/g,"\t");lines=lines.split("\n");return lines.join("\n"+inDent);break;case"object":return(v.constructor==Array)?this.array(v,inDent):this.obj(v,inDent);default:return v;break;}},to:function(inObj){return this.obj(inObj,"");},from:function(inJson){return eval(inJson);}};
opus.Gizmo=function(inConfig){var factory=kit.getObject(inConfig.name);if(factory){kit.mixin(factory.config,inConfig);}else{factory=kit.setObject(inConfig.name,opus._createGizmoFactory(inConfig));}
return factory;};opus._createGizmoClass=function(inConfig){var isa=opus.findConstructorForType(inConfig.type);if(isa.isFactory){isa=opus._createGizmoClass(isa.config);}
inConfig.isa=isa;opus.reindex(inConfig,opus._importPropMap);return opus.Class(inConfig.name,inConfig);};opus._gizmoFactory=function(inProps){var ctor=opus._createGizmoClass(inConfig);var obj=new ctor(inProps);return obj;};opus._createGizmoFactory=function(inConfig){var factory=function(inProps){var ctor=opus._createGizmoClass(inConfig);var obj=new ctor(inProps);return obj;};factory.config=inConfig;factory.isFactory=true;return factory;};
opus.Class("opus.Scrim",{isa:opus.Control,showing:false,inFlow:false,defaultStyles:{bgColor:"lightblue",opacity:0.2,zIndex:100000,cursor:"busy"},create:function(){this.inherited(arguments);this.render();},showingChanged:function(){if(this.showing){this.adaptClientBounds();}},adaptClientBounds:function(){if(this.owner){this.setBounds(this.owner.getClientBounds());}}});
opus.animate={fadeIn:function(inControl){kit._fade({onBegin:kit.hitch(inControl,"show"),node:inControl.node,start:0,end:1,duration:200}).play();},fadeOut:function(inControl){kit._fade({onEnd:kit.hitch(inControl,"hide"),node:inControl.node,start:1,end:0,duration:200}).play();},flyIn:function(inControl){var h=inControl.bounds.h;var t=inControl.bounds.t;kit.animateProperty({onBegin:kit.hitch(inControl,"show"),node:inControl.node,duration:h*2,properties:{top:{start:-h,end:t}},easing:dojo.fx.easing.bounceOut}).play();},flyOut:function(inControl){kit.animateProperty({onEnd:kit.hitch(inControl,"hide"),node:inControl.node,duration:400,properties:{top:{start:inControl.bounds.t,end:-1000}}}).play();},_fade:function(inProperty,inControl,inStart,inEnd){var args={node:inControl.node,duration:300,properties:{}};args.properties[inProperty]={start:inStart,end:inEnd};kit.animateProperty(args).play();},fadeBgColor:function(inControl,inStart,inEnd){this._fade("backgroundColor",inControl,inStart,inEnd);},mouseoutEvent:function(inControl,inStart,inEnd){this.fadeBgColor(inControl,inStart,inEnd);},fadeBorder:function(inControl,inStart,inEnd){this._fade("borderWidth",inControl,inStart,inEnd);},fadeBorderColor:function(inControl,inStart,inEnd){this._fade("borderColor",inControl,inStart,inEnd);}};
opus.Class("opus.SpriteRegistry",{isa:opus.Component,constructor:function(){this.childOwner=this;},fetch:function(inName){var sl=this.$[inName];if(!sl){var url=(inName=="none")?"":inName+".png";var parsed=inName.split("_");sl=this.createComponent({name:inName,type:"SpriteList",url:url,spriteWidth:Number(parsed[1])||16,spriteHeight:Number(parsed[2])||16,repeatX:(parsed[3]=="x"),repeatY:(parsed[3]=="y")});}
return sl;}});opus.spriteRegistry=new opus.SpriteRegistry();opus.Class("opus.SpriteList",{isa:opus.Component,published:{url:{value:""},basePath:{value:""},spriteWidth:{value:16},spriteHeight:{value:16},colCount:{value:1},repeatX:{value:false},repeatY:{value:false}},imageSrc:"",carrierImage:"blank.png",create:function(){this.inherited(arguments);this.carrierImageSrc=opus.path.rewrite('$opus-controls/images/'+this.carrierImage);this.urlChanged();},urlChanged:function(){this.imageSrc=this.url;},requireSprite:function(){if(!this.image){this.image=new Image();this.image.src=this.imageSrc;}},getBackgroundStyle:function(inCol,inRow){return{"background-image":this.url?'url('+this.imageSrc+') ':'',"background-repeat":(this.repeatX&&this.repeatY?"repeat":(this.repeatX?"repeat-x":(this.repeatY?"repeat-y":"no-repeat"))),"background-position":(-inCol*this.spriteWidth)+"px "+(-inRow*this.spriteHeight)+"px"};},getSpriteHtml:function(inCol,inRow,inInline){if(inCol<0||inRow<0){return"";}
this.requireSprite();var h=inInline?'<img src="'+this.carrierImageSrc+'"':'<div';h+=' style="'
+'width:'+this.spriteWidth+'px;'
+'height:'+this.spriteHeight+'px;'
+'vertical-align: text-top;'
+opus.stylesToHtml(this.getBackgroundStyle(inCol,inRow))
+'"';h+=inInline?'/>':'></div>';return h;},addSpriteStyle:function(inStyles,inCol,inRow){if(inCol<0||inRow<0){return"";}
this.requireSprite();inStyles.background=null;kit.mixin(inStyles,this.getBackgroundStyle(inCol,inRow));}});
kit.provide("opus.controls.Sprite");opus.Class("opus.SpriteMixin",{isa:opus.Object,autoWidth:true,autoHeight:true,published:{spriteList:{value:"",onchange:"styleChanged",options:["aerieSprites","h2oSprites"]},spriteCol:{value:0,onchange:"styleChanged"},spriteRow:{value:0,onchange:"styleChanged"}},getSpriteListComponent:function(inListProperty){var reg=opus.spriteRegistry;if(reg){var sln=this.findProperty(inListProperty||"spriteList")||"$opus-controls/images/systemToolbtns_16_16";return sln&&reg.fetch(this.rewritePath(sln));}},getSpriteHtml:function(){var sl=this.getSpriteListComponent();return sl.getSpriteHtml(this.spriteCol,this.spriteRow,this.nodeTag!="div");},modifyDomStyles:function(inStyles){var sl=this.getSpriteListComponent();sl.addSpriteStyle(inStyles,this.spriteCol,this.spriteRow);var n="background-color";inStyles[n]=inStyles[n]||"transparent";},spriteListChanged:function(){var sl=this.getSpriteListComponent();if(sl){if(this.autoWidth){this.width=sl.spriteWidth;}
if(this.autoHeight){this.height=sl.spriteHeight;}
this.parseGeometry();}
this.styleChanged();}});opus.Class("opus.Sprite",{isa:opus.Control,mixins:[opus.SpriteMixin],ready:function(){this.inherited(arguments);this.spriteListChanged();}});opus.Class("opus.SpritedContainer",{isa:opus.Container,mixins:[opus.SpriteMixin],ready:function(){this.inherited(arguments);this.spriteListChanged();}});opus.Class("opus.SpriteImage",{isa:opus.Sprite,published:{spriteCol:{value:0,onchange:"contentChanged",editor:{type:"SpriteColEditor"}},spriteRow:{value:0,onchange:"contentChanged"},bgCol:{value:-1,onchange:"styleChanged"},bgRow:{value:-1,onchange:"styleChanged"}},autoWidth:false,autoHeight:false,getContent:function(){return this.getSpriteHtml();},modifyDomStyles:function(inStyles){var sl=this.getSpriteListComponent("bgSpriteList");sl.addSpriteStyle(inStyles,this.bgCol,this.bgRow);}});opus.Class("opus.AutoSizeSpriteImage",{isa:opus.SpriteImage,autoWidth:true,autoHeight:true});
opus.Class("opus.ThreePiece",{isa:opus.Container,published:{spriteList:"",sprite:0,spriteOffset:0},layoutKind:"hbox",defaultControlType:"Sprite",chrome:[{name:"left",spriteRow:0},{name:"middle",spriteRow:1,content:"",styles:{oneLine:true,textAlign:"center",padding:3,overflow:"hidden"}},{name:"right",spriteRow:2,r:0}],create:function(){this.inherited(arguments);this.layoutKindChanged();},layoutKindChanged:function(){this.$.middle.beginUpdate();var isCol=(this.layoutKind=="vbox");this.$.middle.autoWidth=isCol;this.$.middle.autoHeight=!isCol;if(isCol){this.$.middle.setHeight("100%");}else{this.$.middle.setWidth("100%");}
this.$.middle.endUpdate();this.setSprite(0);},spriteOffsetChanged:function(){this.spriteOffset=Number(this.spriteOffset);this.spriteChanged();},spriteChanged:function(){this.sprite=Number(this.sprite)*3;var i=this.sprite+this.spriteOffset;var isCol=(this.layoutKind=="vbox");var sc="setSprite"+(isCol?"Col":"Row");this.$.left[sc](i);this.$.middle[sc](i+1);this.$.right[sc](i+2);},spriteListChanged:function(){this.$.left.spriteListChanged();this.$.middle.spriteListChanged();this.$.right.spriteListChanged();this.reflow();}});
kit.provide("opus.controls.Button");opus.Class("opus.ButtonStateMixin",{buttonStateChanged:function(){this.buttonChanged();},disabledChanged:function(){this.noEvents=this.disabled;this.buttonChanged();},focusedChanged:function(){this.buttonChanged();},disable:function(){this.setDisabled(true);},enable:function(){this.setDisabled(false);},focus:function(){this.setFocused(true);},blur:function(){this.setFocused(false);},mouseoverHandler:function(){this.setButtonState("hot");},mouseoutHandler:function(){this.setButtonState("");},mousedownHandler:function(e){kit.stopEvent(e);this.setButtonState("down");},mouseupHandler:function(){this.setButtonState("");},clickHandler:function(e){e.dispatchTarget=this;this.inherited(arguments);setTimeout(kit.hitch(this,"click"),1);},click:function(){}});opus.Class("opus.BasicButton",{isa:opus.ThreePiece,mixins:[opus.ButtonStateMixin],defaultStyles:{cursor:"pointer"},published:{caption:{value:"Button"},disabled:false,focused:false,"default":{value:false,onchanged:"buttonChanged"},buttonState:{value:""},spriteList:{value:""},sprite:{noExport:true,noInspect:true},content:{noExport:true,noInspect:true}},create:function(){this.inherited(arguments);this.buttonStateChanged();this.caption=this.caption||this.content;this.captionChanged();},ready:function(){this.beginUpdate();this.inherited(arguments);this.calcMinMax();this.endUpdate();},calcMinMax:function(){},captionChanged:function(){this.setContent(this.caption);},contentChanged:function(){this.$.middle.setContent(this.content);},stateSprites:{disabled:0,normal:1,hot:2,down:3,focused_normal:4,focused_hot:5,focused_down:6,default_normal:7,default_hot:8,default_down:9,focused_default_normal:10,focused_default_hot:11,focused_default_down:12},disabledChanged:function(){this.inherited(arguments);var tc=this.disabled?"gray":"black";this.style.addStyles({textColor:tc});},chooseSprite:function(){var m=this.stateSprites;if(this.disabled){return m.disabled;}else{var bs=this.buttonState||"normal";var ds=this["default"]?"default_":"";var fs=this.focused?"focused_":"";return m[fs+ds+bs]||m[ds+bs]||m[fs+bs]||m[bs];}},buttonChanged:function(){this.setSprite(this.chooseSprite());}});opus.Class("opus.DialogButton",{isa:opus.BasicButton,calcMinMax:function(){if(this.layoutKind=="vbox"){this.minWidth=this.maxWidth=this.$.middle.width+this.bounds.nonClientExtents.w;this.minHeight=this.$.left.height+this.$.right.height+16;this.setWidth(this.minWidth);}else{this.minHeight=this.maxHeight=this.$.middle.height+this.bounds.nonClientExtents.h;this.minWidth=this.$.left.width+this.$.right.width+16;this.setHeight(this.minHeight);}},buttonStateChanged:function(){this.inherited(arguments);this.$.middle.style.addStyles({paddingTop:(this.buttonState=="down"?4:3)});}});opus.Button=opus.DialogButton;
kit.provide("opus.controls.Toolbar");opus.Class("opus.Toolbar",{isa:opus.Container,published:{showScrollButtons:{value:false},toolSpriteList:{value:"$opus-controls/images/systemToolbtns_16_16"},layoutKind:{noInspect:true}},mixins:[opus.SpriteMixin],autoWidth:false,defaultControlType:"ToolButton",defaultStyles:{padding:3},create:function(){this.spriteListChanged();this.chrome=[{name:"scroller",l:0,t:0,w:"100%",h:"100%",styles:{overflow:"hidden"},controls:[{name:"client",layoutKind:"float",l:0,t:0,w:9999,h:"100%",spriteList:this.toolSpriteList,defaultControlType:this.defaultControlType,controls:[]}]},{name:"scrollBtns",showing:Boolean(this.showScrollButtons),layoutKind:"hbox",t:4,r:4,w:32,h:16,styles:{bgColor:"white",textColor:"black",zIndex:10,cursor:"pointer"},controls:[{name:"prev",content:"<",styles:{border:1,textAlign:"center"},w:16,h:16},{name:"next",content:">",styles:{border:1,textAlign:"center"},w:16,h:16}]}];this.inherited(arguments);},scrollLeft:function(){this.$.scroller.node.scrollLeft+=12;},scrollRight:function(){this.$.scroller.node.scrollLeft-=12;},startScroll:function(inFn){this.stopScroll();this.job=setInterval(kit.hitch(this,inFn),50);},stopScroll:function(){clearInterval(this.job);},mousedownHandler:function(e){var fn="scrollRight";if(e.dispatchTarget==this.$.next){fn="scrollLeft";}else if(e.dispatchTarget!=this.$.prev){return;}
this.startScroll(fn);},mouseupHandler:function(e){this.stopScroll();},mouseoutHandler:function(e){this.stopScroll();}});
opus.Class("opus.Outliner",{constructor:function(inClient){this.client=inClient;this.outline=this.client.createComponent({name:"outline",type:"ThreePiece",spriteList:this.client.outlineSpriteList,inFlow:false,showing:false,owner:this.client});this.outline.setSprite(this.client.outlineSprite);this.outline.reflow();},align:function(){var b=this.client.getBounds();this.outline.setBounds({l:0,t:0,w:b.w,h:b.h});this.outline.show();},mouseoverHandler:function(){this.align();this.outline.setSprite(this.client.outlineSprite);},mouseoutHandler:function(){this.outline.hide();},mousedownHandler:function(){this.align();this.outline.setSprite(this.client.hotOutlineSprite);},mouseupHandler:function(){this.align();this.outline.setSprite(this.client.outlineSprite);}});opus.Class("opus.ToolButton",{isa:opus.Container,published:{caption:"",menu:"",spriteCol:0,disabled:false,layoutKind:{value:"float",noInspect:true},showDropArrow:false,toggle:false,down:{value:false,noInspect:true}},defaultStyles:{paddingLeft:4,paddingRight:4,margin:0,textAlign:"center",overflow:"visible",cursor:"pointer"},height:24,chrome:[{name:"face",h:"100%",styles:{padding:2},layoutKind:"float",controls:[{name:"image",type:"SpriteImage",styles:{padding:2,zIndex:2},width:20},{name:"caption",styles:{padding:2,zIndex:2}},{name:"dropImage",type:"SpriteImage",styles:{padding:2,paddingLeft:4,zIndex:2},width:14,spriteList:"$opus-controls/images/systemToolbtns_16_16",spriteCol:11}]}],outlineSprite:0,hotOutlineSprite:3,outlineSpriteList:"",create:function(){this.mouseEffect=new opus.Outliner(this);this.inherited(arguments);this.captionChanged();this.spriteColChanged();this.menuChanged();this.showDropArrowChanged();this.disabledChanged();},captionChanged:function(){if(this.caption&&!this.hint){this.setHint(this.caption);}
this.$.caption.setShowing(Boolean(this.caption));this.$.caption.setContent(this.caption);},spriteColChanged:function(){this.$.image.setSpriteCol(this.spriteCol);this.$.image.setShowing(this.spriteCol>-1);},menuChanged:function(){if(this.menu&&!this.showDropArrow){this.setShowDropArrow(true);}},showDropArrowChanged:function(){this.$.dropImage.setShowing(this.showDropArrow);},disabledChanged:function(){this.style.addStyles({opacity:this.disabled?0.3:null});},isDisabled:function(){return this.disabled;},mouseoverHandler:function(){if(!this.isDisabled()&&!this.toggle){this.mouseEffect.mouseoverHandler();}},mouseoutHandler:function(){if(!this.isDisabled()&&!this.toggle){this.mouseEffect.mouseoutHandler();this.$.face.setBounds({t:0});}},mousedownHandler:function(){if(!this.isDisabled()&&!this.toggle){this.setDown(true);}},mouseupHandler:function(){if(!this.isDisabled()&&!this.toggle){this.setDown(false);}},downChanged:function(){if(this.down){this.$.face.setBounds({t:1});this.mouseEffect.mousedownHandler();}else{this.$.face.setBounds({t:0});if(this.toggle){this.mouseEffect.mouseoutHandler();}else{this.mouseEffect.mouseupHandler();}}},clickHandler:function(){if(!this.isDisabled()){if(this.toggle){this.setDown(!this.down);}
this.inherited(arguments);if(this.showDropArrow){this.dropClick();}}},dropClick:function(){var menu=this.owner.$[this.menu];if(menu){menu.popupNearControl(this);}}});
opus.Class("opus.SplitButton",{isa:opus.Container,published:{caption:"",spriteCol:0,ondropclick:{event:"doDropClick"}},layoutKind:"float",height:28,create:function(){this.inherited(arguments);this.captionChanged();this.spriteColChanged();},spriteColChanged:function(){this.$.main.setSpriteCol(this.spriteCol);},captionChanged:function(){this.$.main.setCaption(this.caption);},mouseoverHandler:function(e){this.$.main.mouseoverHandler(e);this.$.drop.mouseoverHandler(e);},mouseoutHandler:function(e){this.$.main.mouseoutHandler(e);this.$.drop.mouseoutHandler(e);},targetIsDrop:function(e){return e.dispatchTarget.isDescendantOf(this.$.drop);},mousedownHandler:function(e){this.$.drop.mousedownHandler(e);if(!this.targetIsDrop(e)){this.$.main.mousedownHandler(e);}},mouseupHandler:function(e){this.$.drop.mouseupHandler(e);if(!this.targetIsDrop(e)){this.$.main.mouseupHandler(e);}},clickHandler:function(e){if(this.buttonState!="disabled"){if(this.targetIsDrop(e)){setTimeout(kit.hitch(this,"dropClick"),1);}else{this.inherited(arguments);}}},dropClick:function(){this.doDropClick();var menu=this.owner.$[this.menu];if(menu){menu.popupNearControl(this);}}});
kit.provide("opus.controls.Tabbar");opus.Class("opus.Tabbar",{isa:opus.Toolbar,published:{showCloseBox:{value:false},overlap:0,orientation:{value:"top",options:["top","bottom"]}},defaultStyles:{overflow:"visible"},spriteCol:-1,spriteOffset:0,spriteList:"none",defaultControlType:"Tab",create:function(){this.inherited(arguments);this.orientationChanged();this.$.client.reflow=function(){this.renderContent();this.inherited("reflow",arguments);}},adjustSubcomponentProps:function(inProps){this.inherited(arguments);if(!("showCloseBox"in inProps)){inProps.showCloseBox=this.showCloseBox;}
inProps.spriteOffset=this.spriteOffset;},orientationChanged:function(){this.spriteOffset=this.orientation!="top"?13:0;this.spriteRow=this.spriteRow+this.spriteOffset;this.styleChanged();for(var i=0,c$=this.getControls(),c;c=c$[i];i++){c.spriteOffset=this.spriteOffset;c.buttonStateChanged();}},canDrop:function(inDragInfo){return inDragInfo.component.type==this.defaultControlType;}});
kit.provide("opus.controls.Tab");opus.Class("opus.Tab",{isa:opus.BasicButton,height:21,layoutKind:"float",published:{active:false,showCloseBox:true,caption:"Tab",onactivate:{event:"doActivate"}},chrome:[{name:"left",spriteRow:3,noEvents:true,styles:{zIndex:0}},{name:"middle",content:"Tab",styles:{textAlign:"center",padding:3},autoWidth:false,spriteRow:4},{name:"closeBox",type:"SpriteImage",styles:{zIndex:2,right:"2px"},spriteList:"$opus-controls/images/systemToolbtns_16_16",spriteCol:14,showing:false,inFlow:false,onclick:"closeBoxClick"},{name:"right",spriteRow:5,noEvents:true,styles:{zIndex:1}}],controls:[],create:function(){this.inherited(arguments);this.buttonStateChanged();this.showCloseBoxChanged();},ready:function(){this.inherited(arguments);this.activeChanged();},captionChanged:function(){this.inherited(arguments);},activate:function(){this.setActive(true);},closeClick:function(){},closeBoxClick:function(){this.closeClick();return true;},mousedownHandler:function(e){this.inherited(arguments);this.activate();this.doActivate();opus.apply(this.manager,"itemClick",[this]);},chooseSprite:function(){return this.active?3:this.inherited(arguments);},showCloseBoxChanged:function(){if(this.$.closeBox){this.$.closeBox.setShowing(this.showCloseBox);}},activeChanged:function(){var active=this.getActive();if(this.manager.overlap){this.style.addStyles({zIndex:active?4:null});}
if(this.$.closeBox){this.$.closeBox.setBounds({t:active?3:4});}
if(active){this._deactivateSiblings();}
this.buttonChanged();},_deactivateSiblings:function(){var c$=this.manager.getControls();for(var i=0,c;c=c$[i];i++){if(c!=this&&c instanceof opus.Tab){c.setActive(false);}}},modifyDomStyles:function(inStyles){if(this.manager.overlap&&this.manager.indexOf(this)){inStyles["margin-left"]=-this.manager.overlap+"px";}}});
kit.provide("opus.controls.Popup");opus.Class("opus.Popup",{isa:opus.Container,published:{modal:false,fx:{value:"",options:["","fade","fly"]},onpopup:{event:"doPopup"}},defaultStyles:{zIndex:5000,border:2,borderColor:"lightblue"},inFlow:false,showing:false,height:"auto",layoutKind:"vbox",create:function(){this.inherited(arguments);this.dispatcher=opus.dispatcher;},selfFlow:function(){var layout=opus.layoutRegistry.fetch("absolute");layout.flow([this],{l:0,t:0,w:0,h:0},this);if(!(this.bounds.h>0)){this.bounds.h=48;}
this.updateFlowBounds();},showingChanged:function(){this.inherited(arguments);if(this._isOpen&&this.showing){console.warn("Popup.js: Popup was setShowing(true) when already popped up.");return;}
this._isOpen=this.showing;this.modal=this.modal&&(!opus.ide||(opus.ide.document!=this.owner));this.dispatcher[this.showing?"capture":"release"](this,!this.modal);},show:function(){if(!this.inFlow){this.selfFlow();}
this.inherited(arguments);},_open:function(){if(this.fx){opus.animate[this.fx+"In"](this);}else{this.show();}},close:function(){if(this.fx){opus.animate[this.fx+"Out"](this);}else{this.hide();}},open:function(){this.doPopup();this._open();},openAtCenter:function(){this.doPopup();var pb=this.parent.bounds.getClientBounds();this.selfFlow();var b=this.getBounds();this.setLeft((pb.w-b.w)/2);this.setTop((pb.h-b.h)/2);this._open();},mousedownHandler:function(e){if(!this.modal&&e.dispatchTarget!=this&&!e.dispatchTarget.isDescendantOf(this)){this.close();}},openAt:function(inBox){this.doPopup();this.beginUpdate();if("l"in inBox){this.setLeft(inBox.l);}
if("t"in inBox){this.setTop(inBox.t);}
if(inBox.w>0){this.setWidth(inBox.w);}
if(inBox.h>0){this.setHeight(inBox.h);}
this.endUpdate();this._open();},popup:function(inBox){var root=this.parent.getRootControl();if(this.node.parentNode!=root.node){root.node.appendChild(this.node);}
var off=this.parent.calcFrameOffset(root);this.openAt({l:off.l+inBox.l,t:off.t+inBox.t,w:inBox.w,h:inBox.h});},popupNearControl:function(inControl,inWhere){var root=inControl.getRootControl();if(this.node.parentNode!=root.node){root.node.appendChild(this.node);}
var b=inControl.getBounds();var off=inControl.calcFrameOffset(root);if(this.bounds.w==null){this.bounds.w=b.w;}
this.openAt({l:off.l,t:b.h+off.t});}});
kit.provide("opus.controls.List");opus.Class("opus.ListItemMixin",{isa:opus.Object,published:{selected:false},clickHandler:function(e){this.itemClick();if(this.parent.itemClick){this.parent.itemClick(this);}else if(this.owner.itemClick){this.owner.itemClick(this);}
this.inherited(arguments);return true;},itemClick:function(){}});opus.Class("opus.ListItem",{isa:opus.Control,mixins:[opus.ListItemMixin],defaultStyles:{bgColor:"#FFFFFF",padding:4,whiteSpace:"nowrap",cursor:"pointer"},width:"100%",height:24,mouseoverHandler:function(){if(!this.selected){opus.animate.fadeBgColor(this,"#FFFFFF","#ADD8E6");}},mouseoutHandler:function(){if(!this.selected){opus.animate.fadeBgColor(this,"#ADD8E6","#FFFFFF");}},selectedChanged:function(){opus.animate.fadeBgColor(this,"#FFFFFF","#7ECDE5");},setItem:function(inItem){this.content=inItem.content;}});opus.Class("opus.List",{isa:opus.Container,defaultControlType:"ListItem",layoutKind:"relative",itemClick:function(inItem){if(this.selected&&this.selected!=inItem){this.selected.setSelected(false);}
this.selected=inItem;if(this.selected){this.selected.setSelected(true);}}});opus.Class("opus.PopupList",{isa:opus.Popup,defaultControlType:"ListItem"});opus.Class("opus.IconItem",{isa:opus.Container,published:{icon:{value:0},caption:{value:""},hotKey:{value:""},disabled:{value:false}},mixins:[opus.ListItemMixin],defaultStyles:{borderColor:"#F0F0F0",border:1,margin:1,whiteSpace:"nowrap"},chrome:[{name:"icon",type:"SpriteImage",width:24,height:"100%",styles:{padding:3}},{name:"action",layoutKind:"hbox",width:"100%",height:"100%",styles:{padding:2},controls:[{name:"caption",width:"100%",height:"100%"},{name:"hotkey",width:64}]}],width:"100%",height:26,layoutKind:"hbox",create:function(){this.inherited(arguments);this.captionChanged();this.hotkeyChanged();this.iconChanged();this.disabledChanged();},setItem:function(inItem){this.setIcon(inItem.icon);this.setCaption(inItem.caption);this.setHotKey(inItem.hotKey);},iconChanged:function(){this.$.icon.setSpriteCol(this.icon);},captionChanged:function(){this.$.caption.setContent(this.caption);},hotkeyChanged:function(){this.$.hotkey.setContent(this.hotkey);this.$.hotkey.setShowing(this.hotKey);this.$.hotkey.setInFlow(this.hotKey);},disabledChanged:function(){this.noEvents=this.disabled;this.style.addStyles({opacity:(this.disabled?0.5:1.0)});},mouseoverHandler:function(){if(!this.selected){this.style.addStyles({borderColor:"lightblue",bgColor:"#E6F0F4"});}},mouseoutHandler:function(){if(!this.selected){this.style.addStyles({borderColor:"#F0F0F0",bgColor:null});}},selectedChanged:function(){if(this.selected){this.style.addStyles({borderColor:"lightblue",bgColor:"#7ECDE5"});}else{this.mouseoutHandler();}}});opus.Class("opus.MenuItem",{isa:opus.IconItem,create:function(){this.inherited(arguments);this.createComponents([{name:"iconShadow",type:"Sprite",height:"100%",spriteList:"$opus-Aerie/images/aerieGradient_16_30_x",spriteRow:6,inFlow:false}],{owner:this});},flow:function(){this.$.iconShadow.bounds.setBounds({l:7,t:-2,h:26,w:21});this.inherited(arguments);}});opus.Class("opus.PopupMenu",{isa:opus.Popup,defaultStyles:{zIndex:16,border:2,borderColor:"lightblue",bgColor:"#F0F0F0"},defaultControlType:"MenuItem",height:"auto",itemClick:function(){this.close();}});
opus.Class("opus.EditorMixin",{isa:opus.Object,published:{onchange:{event:"doChange"},value:{value:""}},change:function(){this.value=this.getValue();this.doChange();}});opus.Class("opus.Editor",{isa:opus.Control,mixins:[opus.SpriteMixin,opus.EditorMixin],published:{},nodeTag:"input",inputType:"text",height:24,width:"100%",defaultStyles:{margin:0,color:"inherit",cursor:"text"},spriteCol:0,spriteRow:3,create:function(){this.inherited(arguments);this.valueChanged();},modifyDomAttributes:function(inAttributes){if(!kit.isIE||!this.node){inAttributes.type=this.inputType;}},nodeRendered:function(){this.inherited(arguments);this.valueChanged();},keypressHandler:function(e){if(e.charOrCode==kit.keys.ENTER){this.spriteRow=4;this.styleChanged();this.change();}},getValue:function(){return this.canRender()?(this.value=this.node.value):this.value;},valueChanged:function(){if(this.value===undefined){this.value='';}
if(this.canRender()){this.node.value=this.value;}},focus:function(){if(this.showing){this.node.focus();}},select:function(){if(this.showing){this.node.select();}},focusHandler:function(e){},blurHandler:function(e){this.change();},changeHandler:function(){this.change();}});
kit.provide("opus.controls.editors.Checkbox");opus.Class("opus.Checkbox",{isa:opus.Control,mixins:[opus.EditorMixin],published:{disabled:{value:false,onchange:"contentChanged"}},defaultStyles:{padding:2,paddingTop:3,paddingBottom:4},height:24,getCheckedDomAttribute:function(){return this.value?' checked="checked"':"";},getDisabledDomAttribute:function(){return this.disabled?' disabled':"";},getContent:function(){return'<input style="margin: 0; padding:0;" type="checkbox"'+this.getCheckedDomAttribute()+this.getDisabledDomAttribute()+'/>';},getValue:function(){return this.canRender()?(this.value=Boolean(this.node.firstChild.checked)):this.value;},keypressHandler:function(e){},mouseoverHandler:function(e){},mouseoutHandler:function(e){},changeHandler:function(){this.change();},valueChanged:function(){this.contentChanged();}});
kit.provide("opus.controls.editors.Select");opus.Class("opus.Select",{isa:opus.Editor,published:{value:{value:"",onchange:"contentChanged"},options:{value:[],onchange:"contentChanged"}},defaultStyles:{padding:0,border:1,borderColor:"#EEEEEE"},nodeTag:"select",getCheckedDomAttribute:function(){return this.value?"checked":null;},getContent:function(){var h='';for(var i=0,o;i<this.options.length;i++){o=this.options[i]
h+='<option style="color:black;"'+(o==this.value?' selected':'')+'>'+o+'</option>';}
return h;},keypressEvent:function(e){},mouseoverEvent:function(e){},mouseoutEvent:function(e){}});
opus.Class("opus.CustomSelect",{isa:opus.Container,mixins:[opus.SpriteMixin],published:{value:{},onchange:{event:"doChange"}},defaultStyles:{border:1,borderColor:"#EEEEEE"},height:28,maxPopupHeight:280,itemType:"ListItem",spriteList:"none",chrome:[{name:"item",width:"100%",height:"100%",styles:{bgColor:"transparent"}},{name:"button",type:"ToolButton",t:-2,r:1,w:18,h:24,spriteList:"$opus-controls/images/systemToolbtns_16_16",spriteCol:11,styles:{margin:0},outlineSpriteList:"none"},{name:"popup",type:"PopupList",styles:{bgColor:"white",border:1,zIndex:10,overflow:"auto"}}],create:function(){this.childOwner=this;this.inherited(arguments);this.$.item.type=this.itemType;this.$.item.setContent(this.value);this.$.popup.defaultControlType=this.itemType;this.setOptions(this.options);},modifyDomAttributes:function(inAttributes){inAttributes.tabIndex=-1;},setOptions:function(inOptions){if(inOptions){for(var i=0,o;o=inOptions[i];i++){this.$.popup.createComponent(this.itemType,{content:o});}}},getItem:function(){return this.$.item;},selectItem:function(inItem){this.value=inItem.content;this.$.item.setContent(inItem.content);this.change();},change:function(){this.doChange();},clickHandler:function(){this.inherited(arguments);this.$.item.node.setAttribute("tabIndex",-1);this.$.item.node.focus();this.popup();},dblclickHandler:function(){this.popup();},_moveItem:function(inDirection){var c$=this.$.popup.getControls();for(var i=0,c;(c=c$[i]);i++){if(c.icon==this.$.item.icon){c=c$[i+inDirection];if(c){this.selectItem(c);return;}}}},keydownHandler:function(e){if(e.keyCode==kit.keys.DOWN_ARROW){this._moveItem(1);}else if(e.keyCode==kit.keys.UP_ARROW){this._moveItem(-1);}else{return;}
kit.stopEvent(e);},clampPopupHeight:function(){if(this.maxPopupHeight){var pb=this.$.popup.getBounds();if(pb.h>this.maxPopupHeight){this.$.popup.setBounds({h:this.maxPopupHeight});this.$.popup.verticalAlign="";this.reflow();}}},popup:function(){this.$.popup.popupNearControl(this);},itemClick:function(inItem){this.selectItem(inItem);this.$.popup.close();}});
opus.Class("opus.Combo",{isa:opus.Container,published:{value:{},onchange:{event:"doChange"},onpopup:{event:"doPopup"},options:{value:[]}},defaultStyles:{border:1,borderColor:"#DDD"},height:24,itemType:"ListItem",chrome:[{name:"editor",type:"Editor",w:"100%",h:"100%",styles:{border:0,padding:0,margin:2},onchange:"editorChanged"},{name:"button",type:"ToolButton",t:0,r:1,w:18,h:22,styles:{margin:0},spriteCol:10,outlineSprite:6,hotOutlineSprite:6,onclick:"buttonClick"},{name:"popup",type:"Popup",styles:{bgColor:"white",border:1,zIndex:100}}],create:function(){this.inherited(arguments);this.$.popup.defaultControlType=this.itemType;this.createItems();this.valueChanged();},createItems:function(){for(var i=0,o;o=this.options[i];i++){this.$.popup.createComponent({content:o});}},optionsChanged:function(){this.$.popup.destroyControls();this.createItems();this.$.popup.reflow();this.$.popup.renderContent();},popup:function(){this.doPopup();var b=this.getBounds();var cb=this.getClientBounds();this.$.popup.popup({l:0,t:b.h,w:cb.w+2});},dblclickHandler:function(){this.popup();},keydownHandler:function(e){if(e.keyCode==kit.keys.DOWN_ARROW){this.popup();}},buttonClick:function(){this.popup();},itemClick:function(inItem){this.$.editor.setValue(inItem.content);this.$.popup.close();},valueChanged:function(){this.$.editor.setValue(this.value);},getValue:function(){return(this.value=this.$.editor.getValue());},editorChanged:function(inEditor){this.getValue();this.doChange();}});
opus.Class("opus.PasswordEditor",{isa:opus.Editor,inputType:"password"});
opus.Class("opus.Field",{isa:opus.Container,published:{labelAlign:"right",labelWidth:48,caption:"field",editorTheme:{value:""},editorKind:{value:"Editor",options:["Editor","Checkbox","Select","Combo","CustomSelect","ColorEditor"]},editorStyles:{value:{}}},mixins:[opus.EditorMixin],height:24,minHeight:24,maxHeight:24,width:164,value:"",layoutKind:"hbox",scroll:false,spriteList:"none",defaultStyles:{},chrome:[{name:"label",height:"100%",styles:{oneLine:true,paddingRight:10,overflow:"hidden"}}],create:function(){this.inherited(arguments);this.createEditor();this.captionChanged();this.labelWidthChanged();this.labelAlignChanged();},createEditor:function(){var kind=(this.editorTheme?this.editorTheme+".":"")+this.editorKind;this.createComponent({name:"editor",owner:this,type:kind,width:"100%",value:this.value,options:this.options||[],styles:{border:1,borderColor:"#E4E5E4"},verticalAlign:"center",onchange:"change"});this.editorStylesChanged();},editorKindChanged:function(){this.$.editor.destructor();this.createEditor();this.renderContent();this.reflow();},editorStylesChanged:function(){this.$.editor.style.addStyles(this.editorStyles);},labelWidthChanged:function(){this.$.label.setWidth(this.labelWidth);},labelAlignChanged:function(){this.$.label.style.addStyles({textAlign:this.labelAlign});},captionChanged:function(){this.$.label.setContent(this.caption);},getCaption:function(){return(this.caption=this.$.label.getContent());},focus:function(){this.$.editor.focus();},select:function(){this.$.editor.select();},valueChanged:function(){this.$.editor.setValue(this.value);},getValue:function(){return(this.value=this.$.editor.getValue());}});
opus.Class("opus.Window",{isa:opus.Container,published:{caption:"",draggable:true,resizeable:true,fx:{value:"fade",options:["fade","fly"]},opacity:0.75,layoutKind:{noInspect:true},clientLayoutKind:"absolute",showCloseBox:true},defaultStyles:{zIndex:15,border:0},dropTarget:true,chrome:[{name:"top",type:"ThreePiece",left:0,top:0,height:28,width:"100%",styles:{bgColor:"transparent"}},{name:"head",layoutKind:"absolute",styles:{overflow:"hidden",whiteSpace:"nowrap",zIndex:1},left:10,top:2,right:10,height:24,controls:[{name:"closeBox",content:'[x]',height:16,width:16,top:4,right:4,onclick:"closeBoxClick"},{name:"caption",height:"100%",left:4,right:32,styles:{oneLine:true,border:0,padding:0}}]},{name:"left",type:"Sprite",left:0,top:28,width:8,bottom:28,spriteCol:0,autoHeight:false,autoWidth:false},{name:"client",type:"Container",left:8,top:28,right:8,bottom:8,XdropTarget:true,styles:{zIndex:1,border:1,borderColor:"#ccc",bgColor:"white",overflow:"hidden"}},{name:"right",type:"Sprite",right:0,top:28,width:8,bottom:28,spriteCol:1,autoHeight:false,autoWidth:false},{name:"bottom",type:"ThreePiece",spriteOffset:3,left:0,bottom:0,height:28,width:"100%"},{name:"resizeBox",height:8,width:8,bottom:0,right:0,styles:{bgColor:"transparent",cursor:"se-resize"}}],create:function(){this.caption=this.caption||this.content;this.inherited(arguments);this.createComponent({name:"drag",type:"ScrimDrag",owner:this});this.captionChanged();this.opacityChanged();this.resizeableChanged();this.clientLayoutKindChanged();this.showCloseBoxChanged();},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind);},opacityChanged:function(){var o=this.opacity;this.$.top.style.addStyles({opacity:o});this.$.head.style.addStyles({opacity:o});this.$.left.style.addStyles({opacity:o});this.$.right.style.addStyles({opacity:o});this.$.bottom.style.addStyles({opacity:o});},captionChanged:function(){this.$.caption.setContent(this.caption);},resizeableChanged:function(){this.$.resizeBox.setShowing(this.resizeable);},showCloseBoxChanged:function(){this.$.closeBox.setShowing(this.showCloseBox);},close:function(){var m=this.manager;while(m){if(m.close){m.close();return;}
m=m.manager;}
opus.animate[this.fx+"Out"](this);},maximize:function(){if(this.resizeable){var pb=this.parent.bounds.getClientBounds();this.setBounds(pb);this.reflow();}},mousedownHandler:function(e){if(opus.topWindow!=this){if(opus.topWindow){opus.topWindow.setPlane(0);}
opus.topWindow=this;opus.topWindow.setPlane(1);}
if(this.draggable&&(e.dispatchTarget==this.$.head||e.dispatchTarget==this.$.caption)){this.off={l:this.bounds.l-e.pageX,t:this.bounds.t-e.pageY};this.$.drag.drag=kit.hitch(this,"drag");this.$.drag.start(e);}else if(this.resizeable&&(e.dispatchTarget==this.$.resizeBox)){this.off={w:this.bounds.w-e.pageX,h:this.bounds.h-e.pageY};this.$.drag.drag=kit.hitch(this,"resize");this.$.drag.start(e);}},drag:function(e){this.setBounds({l:e.pageX+this.off.l,t:e.pageY+this.off.t});},resize:function(e){this.setBounds({w:e.pageX+this.off.w,h:e.pageY+this.off.h});this.renderBounds();this.reflow();},closeBoxClick:function(inSender,e){this.close();},showingChanged:function(){this.inherited(arguments);if(this.showing){this._keyConnect=kit.connect(this.parent,"dispatcherKeypress",this,"watchKeys");}else{kit.disconnect(this._keyConnect);}},watchKeys:function(e){if(e.charOrCode==kit.keys.ENTER&&this.defaultButton){e.dispatchTarget=this.defaultButton;this.defaultButton.clickEvent(e);}}});
opus.Class("opus.SplitterMixin",{isa:opus.Object,width:3,height:"100%",defaultStyles:{cursor:"e-resize",bgColor:"#F0F0F0"},create:function(){this.dragger=new opus.ScrimDrag({owner:this,useScrim:true,drag:kit.hitch(this,"drag")});this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(this.parent.layoutKind=="vbox"){this.style.addStyles({cursor:"n-resize"});this.setWidth("100%");if(this._height.units=="%"){this.setHeight(3);}}},findSizeable:function(){var i=this.parent.indexOfChild(this);var c$=this.parent.c$;var delta=(this.direction=="right")||(this.direction=="down")?1:-1;do{i+=delta;if(c$[i].showing){return c$[i];}}while(i>=0&&i<c$.length);},mousedownHandler:function(e){this.sizeable=this.findSizeable();if(this.sizeable){this._startPosition=this.sizeable.bounds[(this.parent.layoutKind=="vbox")?"h":"w"];this.dragger.cursor=this.style.getComputedStyle().cursor;this.dragger.start(e);}},drag:function(){var d=(this.direction=="right"||this.direction=="down")?-1:1;if(this.parent.layoutKind=="vbox"){this.sizeable.setHeight(this._startPosition+d*this.dragger.dpy);}else{this.sizeable.setWidth(this._startPosition+d*this.dragger.dpx);}}});opus.Class("opus.Splitter",{isa:opus.Control,mixins:[opus.SplitterMixin]});
kit.provide("opus.controls.Table");opus.Class("opus.Table",{isa:opus.Container,published:{columns:{value:1}},defaultStyles:{position:null,margin:0,padding:0,border:0},defaultControlType:"TableCell",defaultContainerType:"TableCell",nodeTag:"table",layoutKind:"none",modifyDomAttributes:function(inAttributes){inAttributes.cellspacing=inAttributes.cellpadding=0;},modifyDomStyles:function(inStyles){inStyles["border-spacing"]=0;inStyles["border-collapse"]="collapse";},getContent:function(){var html=[];var l=this.c$.length;var rows=l/(this.columns||1);for(var i=0,cols;i<rows;i++){html.push("<tr>");for(var j=0,c;j<this.columns;j++){c=this.c$[(i*this.columns)+j];if(!c){html.push("<td></td>");}else if(c.nodeTag!="td"){html.push("<td>");html.push(c.generateHtml());html.push("</td>");}else{html.push(c.generateHtml());}}
html.push("</tr>");}
return html.join("");},getRowNode:function(inRow){return this.node&&this.node.rows[inRow];},updateFlowBounds:function(){for(var i=0,c;c=this.c$[i];i++){c.bounds.l=c.bounds.t=0;c.bounds.boundsDirty=true;}
this.inherited(arguments);},dragDrop:function(inDrag){this.layout.dropBounds.l=this.layout.dropBounds.t=0;this.inherited(arguments);}});opus.Class("opus.TableCell",{isa:opus.Container,defaultStyles:{position:null,padding:0,margin:0,border:0,verticalAlign:"top"},nodeTag:"td",layoutKind:"none",modifyDomStyles:function(inStyles){inStyles["vertical-align"]=this.style.getComputedStyle().verticalAlign;inStyles["position"]="static";},dragDrop:function(inDrag){this.layout.dropBounds.l=this.layout.dropBounds.t=0;this.inherited(arguments);}});
kit.provide("opus.controls.Tree");opus.getTreeNodeFromControl=function(inControl){while(inControl&&!(inControl instanceof opus.TreeNode)){inControl=inControl.manager;}
return inControl;}
opus.removeSelection=function(){if(window.getSelection){opus.apply(window.getSelection(),"collapseToStart");}else if(document.selection){var n=document.selection.createRange();if(n){n.collapse();n.select();}}}
opus.Class("opus.SelectionMixin",{isa:opus.Object,published:{allowSelection:true,onselect:{event:"dispatchSelect"},ondeselect:{event:"dispatchDeselect"},selectedColor:"lightblue"},clickHandler:function(e){this.selectEvent(e);this.inherited(arguments);},selectEvent:function(e){var t=this.getSelectTarget(e);if(this.canSelectControl(t)){this.select(t);}},getSelectTarget:function(e){return e.dispatchTarget;},toggleSelect:function(inControl){if(this.getSelected()==inControl){this.deselect(inControl);}else{this.select(inControl);}},select:function(inControl){this.deselect(this.getSelected());if(inControl){this.selected=inControl;this.addSelectionDecoration(inControl);this.doOnSelect();}},deselect:function(inControl){if(inControl&&this.getSelected()==inControl){this.removeSelectionDecoration(inControl);this.doOnDeselect();}
this.selected=null;},selectIndex:function(inIndex){var c=this.getSelectableControls()[inIndex];if(c){this.select(c);}},getSelectableControls:function(){return this.getControls();},canSelectControl:function(inControl){return this.allowSelection&&kit.indexOf(this.getSelectableControls(),inControl)>=0;},addSelectionDecoration:function(inControl){if(inControl.setSelected){inControl.setSelected(true);}else{inControl._selectionInfo=kit.mixin({},inControl.style.getComputedStyle());inControl.style.addStyles({bgColor:this.selectedColor});}},removeSelectionDecoration:function(inControl){if(inControl){if(inControl.setSelected){inControl.setSelected(false);}else if(inControl._selectionInfo){inControl.style.addStyles({bgColor:inControl._selectionInfo.bgColor});delete inControl._selectionInfo;}}},getSelectedIndex:function(){return kit.indexOf(this.getSelectableControls(),this.getSelected());},doOnSelect:function(){this.dispatchSelect(this.getSelected());},doOnDeselect:function(){this.dispatchDeselect();},getSelected:function(){return this.selected&&opus.$[this.selected.globalId];}});opus.Class("opus.Tree",{isa:opus.Container,spriteList:"$opus-controls/images/treeButtons_16_9",leafSpriteList:"$opus-controls/images/treeLeaves_16_768_y",mixins:[opus.SelectionMixin],published:{onnodeopenclicked:{event:"nodeOpenClicked"}},defaultStyles:{overflow:"auto",borderColor:"lightblue"},textSelection:"none",layoutKind:"none",defaultControlType:"TreeNode",defaultContainerType:"TreeNode",nodeRendered:function(){this.inherited(arguments);this.node.scrollTop=this.node.scrollLeft=0;},canSelectControl:function(inControl){return this.allowSelection;},getSelectTarget:function(e){return e.dispatchTreeNode;},addSelectionDecoration:function(inControl){this.inherited(arguments,[inControl.$.contentContainer]);},removeSelectionDecoration:function(inControl){this.inherited(arguments,[inControl.$.contentContainer]);},clickHandler:function(e,inTarget){var n=e.dispatchTreeNode;var args=[e,inTarget,n];if(n&&inTarget.isDescendantOf(n.$.contentContainer)){this.inherited(arguments,args);}else{opus.Control.prototype.clickHandler.apply(this,args);}},dblclickHandler:function(e,inTarget){this.inherited(arguments,[e,inTarget,e.dispatchTreeNode]);}});opus.Class("opus.TreeNode",{isa:opus.Container,defaultStyles:{position:null},defaultControlType:"TreeNode",defaultContainerType:"TreeNode",published:{caption:"TreeNode",connectors:{value:true,onchange:"contentChanged"},showOpenButton:{value:true,onchange:"updateOpenButton"},icon:-1,openIcon:-1,open:true,hideRoot:false,disabled:false},gutterWidth:16,layoutKind:"none",create:function(){this.n$={};this.createChrome([{name:"contentTable",type:"Table",columns:2,styles:{position:null},controls:[{name:"gutter",width:this.gutterWidth,styles:{position:null,verticalAlign:"middle"},modifyDomStyles:kit.hitch(this,"gutterModifyDomStyles"),controls:[{name:"openButton",type:"SpriteImage",width:this.gutterWidth,styles:{position:null,cursor:"default"}}]},{name:"contentContainer",styles:{padding:3,whiteSpace:"nowrap",cursor:"default"},controls:this.getNodeChrome()}]},{name:"childrenTable",type:"Table",columns:2,layoutKind:"stack",position:null,controls:[{name:"childrenGutter",width:this.gutterWidth,layoutKind:"relative",modifyDomStyles:kit.hitch(this,"childrenGutterModifyDomStyles"),controls:[{type:"Image",src:"$opus-controls/images/blank.png",height:0,width:16}]},{name:"client",styles:{marginLeft:2,position:null,whiteSpace:"nowrap"}}]}]);if(!this.isBranch()&&!(this.manager instanceof opus.Tree)){this.style.addStyles({overflow:"auto"});}
this.inherited(arguments);this.openIcon=this.openIcon>=0?this.openIcon:this.icon;this.hideRootChanged();this.openChanged();},getNodeChrome:function(){return[{name:"icon",type:"SpriteImage",nodeTag:"span",spriteCol:this.icon,spriteList:this.findProperty("iconSpriteList"),styles:{position:null,paddingRight:2,whiteSpace:"nowrap"}},{name:"label",nodeTag:"span",content:this.caption,styles:{position:null,whiteSpace:"nowrap"}}];},renderBoundsStyles:function(){if(!this.isBranch()){this.inherited(arguments);}},hideRootChanged:function(){if(!this.isBranch()){this.$.childrenGutter.setShowing(!this.hideRoot);this.$.contentTable.setShowing(!this.hideRoot);}},gutterModifyDomStyles:function(inStyles){opus.TableCell.prototype.modifyDomStyles.call(this.$.gutter,inStyles);if(this.connectors){var sl=opus.SpriteMixin.prototype.getSpriteListComponent.call(this,"leafSpriteList");if(sl){var col=this.isLastControl()?2:0;sl.addSpriteStyle(inStyles,col,0);inStyles["background-repeat"]="no-repeat";inStyles["background-position"]=(-col*sl.spriteWidth)+"px center";}}},childrenGutterModifyDomStyles:function(inStyles){opus.TableCell.prototype.modifyDomStyles.call(this.$.childrenGutter,inStyles);if(this.connectors&&!this.isLastControl()){var sl=opus.SpriteMixin.prototype.getSpriteListComponent.call(this,"leafSpriteList");if(sl){sl.addSpriteStyle(inStyles,1,0);}}
inStyles.width=this.gutterWidth+"px";},nodeRendered:function(){this.inherited(arguments);opus.apply(this.manager,"controlAdded",[this]);},controlAdded:function(inNode){opus.apply(this.getPreviousControl(inNode),"updateDecoration");this.updateDecoration();},addControl:function(inControl){var p=inControl instanceof opus.TreeNode?this.$.client:this;inControl.setParent(p);if(inControl instanceof opus.TreeNode){this.n$[inControl.name]=inControl;}},removeControl:function(inControl){this.inherited(arguments);if(inControl instanceof opus.TreeNode){delete this.n$[inControl.name];if(this.canRender()){opus.apply(this.getLastControl(),"updateDecoration");this.updateDecoration();}}},openChanged:function(){this.$.client.setShowing(this.open);if(this.$.icon){this.$.icon.setSpriteCol(this.open?this.openIcon:this.icon);this.$.icon.setShowing(this.$.icon.spriteCol>=0);}
this.updateOpenButton();},getCaption:function(){return this.caption=this.$.label.getContent();},captionChanged:function(){this.$.label.setContent(this.caption);},updateDecoration:function(){this.updateOpenButton();this.$.gutter.styleChanged();this.$.childrenGutter.styleChanged();},getOpenSprite:function(){return this.showOpenButton&&this.hasControls()?(this.open?1:0):2;},updateOpenButton:function(){this.$.openButton.setSpriteCol(this.getOpenSprite());this.$.openButton.contentChanged();},getNodeLevel:function(){var l=0;var p=this.manager;while(p instanceof opus.TreeNode){l++;p=p.manager;}
return l;},isBranch:function(){return this.manager instanceof opus.TreeNode;},hasControls:function(){return this.getControls().length>0;},isFirstControl:function(){var c=this.manager.getControls();return c.length&&this==c[0];},isLastControl:function(){if(!this.isBranch()){return true;}
var c=this.manager.getControls();return c.length&&this==c[c.length-1];},getLastControl:function(){var c=this.getControls();return c[c.length-1];},getNextControl:function(inControl){return this.controlAtIndex(this.indexOf(inControl)+1);},getPreviousControl:function(inControl){return this.controlAtIndex(this.indexOf(inControl)-1);},getNodeFromControl:function(inControl){while(!(inControl instanceof opus.TreeNode)){inControl=inControl.manager;}
return inControl;},dragDrop:function(inDrag){this.layout.dropBounds.l=this.layout.dropBounds.t=0;this.inherited(arguments);this.renderContent();},forEach:function(inFunc,inWalk){for(var i=0,c$=this.getControls(),c;c=c$[i];i++){if(inFunc(c)===false){return;}
if(inWalk){opus.apply(c,"forEach",[inFunc,inWalk]);}}},clickHandler:function(e,inTarget){if(inTarget.isDescendantOf(this.$.openButton)){this.setOpen(!this.open);this.nodeOpenClicked(this);}
var n=e.dispatchTreeNode=opus.getTreeNodeFromControl(inTarget);this.inherited(arguments,[e,inTarget,n]);},nodeOpenClicked:function(inNode){opus.apply(this.manager,"nodeOpenClicked",[inNode]);},dblclickHandler:function(e,inTarget){var n=e.dispatchTreeNode=opus.getTreeNodeFromControl(inTarget);if(this.dblclickToggleOpen&&inTarget.isDescendantOf(this.$.contentContainer)){this.setOpen(!this.open);}
this.inherited(arguments,[e,inTarget,n]);}});opus.Class("opus.TreeCheckboxNode",{isa:opus.TreeNode,published:{checked:false},getNodeChrome:function(){return[{name:"checkbox",type:"Checkbox",nodeTag:"span",styles:{position:null,padding:0,paddingTop:0,paddingBottom:0,paddingRight:4},value:this.checked,disabled:this.disabled},{name:"icon",type:"SpriteImage",nodeTag:"span",spriteCol:this.icon,spriteList:this.findProperty("iconSpriteList"),styles:{position:null,paddingRight:2}},{name:"label",nodeTag:"span",content:this.caption,styles:{position:null,padding:0,whiteSpace:"nowrap"}}];},checkedChanged:function(){this.$.checkbox.setValue(this.checked);},getChecked:function(){return this.checked=this.$.checkbox.getValue();},disabledChanged:function(){this.$.checkbox.setDisabled(this.disabled);},managerHasCheckedNodes:function(){var checked=false;this.manager.forEach(function(c){if(opus.apply(c,"getChecked")){checked=true;}},true);return checked;}});
opus.Class("opus.Image",{isa:opus.Control,published:{src:{value:"",onchange:"attributesChanged"},alt:{value:"",onchange:"attributesChanged"}},nodeTag:"img",renderDomContent:function(){},modifyDomAttributes:function(inAttributes){kit.mixin(inAttributes,{src:this.rewritePath(this.src),alt:this.alt,onload:"opus.bubble(event)"});},reset:function(inSrc,inW,inH,inAlt){this.hide();this.setSrc(inSrc);this.setWidth(inH);this.setHeight(inH);this.setAlt(inAlt);}});opus.Class("opus.Picture",{isa:opus.Container,published:{src:{value:"$opus-controls/images/tatami.png",editor:{editorKind:"ImagePathEditor"}},alt:"",autoSize:true},loadingImg:"ajax-loader.gif",defaultControlType:"Image",chrome:[{name:"image",verticalAlign:"center",horizontalAlign:"center",alt:""}],create:function(){this.image=new Image();this.image.onload=kit.hitch(this,"imageLoaded");this.image.onerror=kit.hitch(this,"imageError");this.inherited(arguments);this.altChanged();this.srcChanged();},destructor:function(){clearTimeout(this._loadTimeout);this.inherited(arguments);},adjustSize:function(){var w=this.image.width;var h=this.image.height;if(this.autoSize){var ar=w/h;var cb=this.getClientBounds();w=cb.w;h=cb.h;if(h*ar>w){h=w/ar;}else{w=h*ar;}}
this.$.image.setWidth(w);this.$.image.setHeight(h);},boundsChanged:function(){if(this.$.image&&this.$.image.node){this.adjustSize();}},altChanged:function(){this.$.image.setAlt(this.alt);},srcChanged:function(){this.image.src=this.rewritePath(this.src);if(!this.src){this.imageLoaded();}},imageLoaded:function(e){if(!this.$.image||!this.$.image.canRender()){this._loadTimeout=setTimeout(kit.hitch(this,"imageLoaded"),1);return;}
this._loadTimeout=null;this.$.image.setSrc(this.image.src);this.adjustSize();this.$.image.show();},imageError:function(e){}});
opus.Class("opus.Iframe",{isa:opus.Control,published:{src:{value:"",onchange:"attributesChanged"}},defaultStyles:{overflow:"auto"},nodeTag:"iframe",modifyDomAttributes:function(inAttributes){inAttributes.src=this.src;inAttributes.frameborder="0";}});
opus.Class("opus.RangeMixin",{isa:opus.Object,published:{maximum:100,position:0,increment:1},boundsChanged:function(){this.positionChanged();},getPercent:function(){return Math.round(this.position*100/this.maximum);},positionToSize:function(inPosition){return inPosition*this.getMaximumSize()/this.maximum;},positionChanged:function(){this.position=this.normalizePosition(this.position);},normalizePosition:function(inPosition){inPosition=Math.max(0,Math.min(this.maximum,inPosition));return Math.round(inPosition/this.increment)*this.increment;},getSizeBound:function(){return"w";},getMaximumSize:function(){return this.getClientBounds()[this.getSizebound()];}});opus.Class("opus.SliderDrag",{isa:opus.AvatarDrag,offsetX:-38,start:function(e){this.inherited(arguments);this.owner.thumbDragEvent(e);},drag:function(e){this.inherited(arguments);this.owner.thumbDragEvent(e);},finish:function(){this.inherited(arguments);this.owner.changed();}});opus.Class("opus.Slider",{isa:opus.Container,mixins:[opus.RangeMixin],published:{vertical:false,onchanging:{event:"changing"},onchanged:{event:"changed"}},defaultStyles:{},height:24,create:function(){this.chrome=this.getChrome();this.inherited(arguments);this.$.slide.setSpriteList("$opus-controls/images/"+(this.vertical?"aristoSliderVert_5_4_y":"aristoSliderHorz_4_5_x"));this.$.slide.$.middle.style.addStyles({padding:0});this.positionChanged();},getChrome:function(){return[{name:"dragger",type:"SliderDrag"},{name:"slide",type:"ThreePiece",layoutKind:this.vertical?"vbox":"hbox",left:this.vertical?9:0,top:this.vertical?0:10,right:this.vertical?null:0,bottom:this.vertical?0:null,height:"auto",styles:{padding:0}},{name:"thumb",type:"Sprite",spriteList:"$opus-controls/images/aristoSliderThumb_23_24",spriteCol:0,l:0,t:0,w:23,onmousedown:"thumbDown",onmouseover:"thumbOver",onmouseout:"thumbOut"}];},positionChanged:function(){this.inherited(arguments);if(this.$.thumb){var setter=this.vertical?"setTop":"setLeft";this.$.thumb[setter](this.positionToSize(this.position));}},eventToPosition:function(e){var m=this.getMaximumSize();var d=this.getSizeBound();var o=this.vertical?"t":"l";var x=e[this.vertical?"pageY":"pageX"];x-=this.calcFrameOffset()[o]+this.bounds.paddingExtents[o]+this.$.thumb.getBounds()[d]/2;x=Math.max(0,Math.min(m,x));return Math.round(this.maximum*x/m);},getSizeBound:function(){return this.vertical?"h":"w";},getMaximumSize:function(){var d=this.getSizeBound();return this.bounds.getClientBounds()[d]-this.$.thumb.getBounds()[d];},mousedownHandler:function(e,inTarget){this.setPosition(this.eventToPosition(e));this.changing();this.changed();},thumbOver:function(){this.$.thumb.setSpriteRow(1);},thumbOut:function(){this.$.thumb.setSpriteRow(0);},thumbDown:function(inSender,e){this.$.dragger.start(e);return true;},thumbDragEvent:function(e){if(e){this.setPosition(this.eventToPosition(e));this.$.dragger.setAvatarContent(this.position+"%");this.changing();}}});
Ares={setupSceneAssistant:function(inSceneAssistant,inName){var sc=inSceneAssistant.controller;Ares.mojoSceneController=sc;if(!inSceneAssistant.view){with(sc.sceneElement){if(!sc.scrollingEnabled){parentNode.style.height="100%";parentNode.parentNode.style.height="100%";}
style.height="100%";}
var n=this.fetchSceneNode(sc.sceneElement);var name=inName||n.getAttribute("kind")||sc.sceneName;this.makeViewForAssistant(name,inSceneAssistant,n);this.makeControllerGet(sc);}},setupDialog:function(inSceneAssistant,inName){if(!inSceneAssistant.view){var n=this.fetchDialogNode();if(n){this.makeViewForAssistant(inName,inSceneAssistant,n);}}},makeControllerGet:function(inSceneController){var sc=inSceneController;var sa=sc.assistant;sc._get=sc.get;sc.get=function(inId){var n=this._get(inId);if(n){return n;}else{var c=sa.view.$[inId]||sa.$[inId];if(c){return c.fetchMojoNode?c.fetchMojoNode():c.getNode();}}}},makeViewForAssistant:function(inName,inAssistant,inNode){var props={parentNode:inNode,controls:[{name:inName,type:inName,modelProxy:inAssistant,sceneController:inAssistant.controller,dispatchProxy:inAssistant}],layoutKind:"vbox",scroll:false,h:"100%",w:"100%"};var view=new opus.View(props);this.attachViewToAssistant(inAssistant,view);return view;},attachViewToAssistant:function(inAssistant,inView){inAssistant.view=inView;inAssistant.doc=inAssistant.view.c$[0];inAssistant.$=inAssistant.doc.$;},fetchSceneNode:function(inNode){var nodes=kit.query("#"+inNode.id+" > .opus");return nodes.length?nodes[0]:inNode;},fetchDialogNode:function(){var nodes=kit.query("div[x-mojo-dialog] div");return nodes.length&&nodes[0];},cleanupSceneAssistant:function(inSceneAssistant){var sa=inSceneAssistant;sa.view.destroy();}};
opus.Class("Palm.Mojo.Dispatcher",{isa:opus.Dispatcher,mojoEvents:[Mojo.Event.tap,Mojo.Event.flick,Mojo.Event.keypress,Mojo.Event.hold,Mojo.Event.holdEnd,Mojo.Event.propertyChange,Mojo.Event.filter,Mojo.Event.filterImmediate,Mojo.Event.imageViewChanged,Mojo.Event.scrollStarting,Mojo.Event.progressComplete,Mojo.Event.listChange,Mojo.Event.listTap,Mojo.Event.listAdd,Mojo.Event.listDelete,Mojo.Event.listReorder,Mojo.Event.progressIconTap,Mojo.Event.progressComplete],constructor:function(){this.events=this.events.concat(this.mojoEvents);},dispatchToTarget:function(e,c,suffix){if(c instanceof Palm.Mojo.WidgetMixin){var isMouseOverOut=(e.type=="mouseover"||e.type=="mouseout");if(isMouseOverOut){if(this.shouldIgnoreMouseOverOut(e,c)){return true;}
var synth={type:"child"+e.type,dispatchTarget:e.dispatchTarget};this.dispatchBubble(synth,c.parent);}
var fn=e.type+"Handler"+suffix;if(c[fn]&&!c.noEvents){if(c[fn](e)!==true){return false;}
return true;}}else{return this.inherited(arguments);}},});kit.addOnLoad(function(){opus.apply(opus.dispatcher,"disconnect");opus.dispatcher=new Palm.Mojo.Dispatcher();});
opus.fetchTypedValue=function(inValue){if(inValue=="false"){inValue=false;}else if(inValue=="true"){inValue=true;}else if(String(Number(inValue))==String(inValue)){inValue=Number(inValue);}
return inValue;}
opus.Class("Palm.Mojo.WidgetMixin",{scroll:false,constructor:function(){this.mojoAttributes={};this._mojoConnections=[];},destructor:function(){this.destroyWidget();this.inherited(arguments);},destroyWidget:function(){if(this.mwc){Mojo.Controller.WidgetController.prototype.cleanup.apply(this.mwc);this.mwc=null;var node=this.fetchMojoNode();if(node){node._mojoController=undefined;}
kit.forEach(this._mojoConnections,kit.disconnect);this._mojoConnections=[];if(this.isDesigning()&&!this.isModelInUse()){this.deleteModel();}}},generateHtml:function(){this.destroyWidget();return this.inherited(arguments);},renderWidget:function(){if(this.isRendering()){return;}
this._rendering=true;var node=this.fetchMojoNode();if(this.mojoClass){node.setAttribute("x-mojo-element",this.mojoClass);this.createWidget();}
this._rendering=false;},createWidget:function(){this.populateModel();var node=this.fetchMojoNode();var mojoController=this.fetchSceneController();mojoController.setupWidget(node.id,this.mojoAttributes,this.fetchModel());try{this.mwc=new Mojo.Controller.WidgetController(node,mojoController);}catch(e){console.log("Error creating widget",e);}
if(this.mwc){this.mwc.cleanup=opus.nop;this.mwc.element.removeEventListener('DOMNodeRemovedFromDocument',this.mwc.cleanupHandler,false);}
this._mojoConnections.push(kit.connect(this.mwc,"setModel",this,"mojoModelReplaced"));this.generateModelReference();},isRendering:function(){return this._rendering;},reRenderWidget:function(){if(this.canRender()){this.destroyWidget();this.renderWidget();}},fetchSceneController:function(){return this.owner.sceneController||Ares.mojoSceneController;},fetchModelProxy:function(){return this.owner.modelProxy||Ares.mojoSceneController.assistant;},fetchMojoNode:function(){return this.getNode();},mojoModelReplaced:function(){this.generateModelReference();},generateModelReference:function(){var modelProxy=this.fetchModelProxy();modelProxy.widgetModels=modelProxy.widgetModels||{};modelProxy.widgetModels[this.name]=this.fetchModel();},populateModel:function(){var props=this.published;var model=this.fetchModel();var p,v,mp;for(var i in props){p=props[i];if(p.isModelData){mp=p.modelPropertyName?this[p.modelPropertyName]:(p.modelProperty?p.modelProperty:i);v=model[mp];if(v===undefined){this.setProperty(i,this[i]);}}}},fetchModel:function(){if(this.mwc){return this.mwc.model;}else{var modelProxy=this.fetchModelProxy();var model;if(modelProxy.fetchWidgetModel){model=modelProxy.fetchWidgetModel(this);}else if(this.modelName){model=modelProxy[this.modelName]||(modelProxy[this.modelName]={});}else{model=this.model||(this.model={});}
return model;}},isModelInUse:function(){var m=this.fetchModel();var c=this.fetchSceneController();for(var i=0,w;w=c._modelWatchers[i];i++){if(m===w.model){return true;}}},deleteModel:function(){if(this.modelName){var modelProxy=this.fetchModelProxy();delete modelProxy[this.modelName];}
this.model={};},modelNameChanged:function(){this.reRenderWidget();},fetchModelProperty:function(inProperty,inDefault){var model=this.fetchModel();var v=model&&model[inProperty];return v===undefined?inDefault:v;},modelChanged:function(){var mojoController=this.fetchSceneController();if(this.mwc&&mojoController){mojoController.modelChanged(this.fetchModel());}},modelPropertyChanged:function(inModelProperty,inValue){var model=this.fetchModel();model[inModelProperty]=arguments.length<2?this[inModelProperty]:inValue;this.modelChanged();},mojoAttributeChanged:function(inMojoAttribute,inValue){this.mojoAttributes[inMojoAttribute]=arguments.length<2?this[inMojoAttribute]:inValue;this.reRenderWidget();}});opus.Class("Palm.Mojo.ControlMixin",{isa:opus.Object,published:{onclick:{noInspect:true},ondblclick:{noInspect:true},onmouseover:{noInspect:true},onmouseout:{noInspect:true},onmousedown:{noInspect:true},onmouseup:{noInspect:true},oncontextmenu:{noInspect:true},onshowingchanged:{noInspect:true},ontap:{event:Mojo.Event.tap+"Handler"},onflick:{event:Mojo.Event.flick+"Handler"},onkeypress:{event:Mojo.Event.keypress+"Handler"},onhold:{event:Mojo.Event.hold+"Handler"},onholdEnd:{event:Mojo.Event.holdEnd+"Handler"},hint:{noInspect:true}},dispatch:function(inName,inArguments){var target=this.findDispatchTarget(inName);if(target){var fn=target[inName];if(fn){var args=kit._toArray(inArguments);return fn.apply(target,args.concat([this]));}}}});opus.Class("Palm.Mojo.Widget",{isa:opus.Control,mixins:[Palm.Mojo.WidgetMixin,Palm.Mojo.ControlMixin],defaultStyles:{},published:{modelName:{value:"",model:true},content:{noInspect:true}},nodeRendered:function(){this.inherited(arguments);this.reRenderWidget();}});
opus.Class("Palm.Mojo.Container",{isa:opus.Container,mixins:[Palm.Mojo.ControlMixin],published:{scroll:{value:false,noInspect:true}},defaultStyles:{border:"",borderColor:null},width:"100%",height:100,layoutKind:"vbox"});
opus.Class("Palm.Mojo.Panel",{isa:Palm.Mojo.Container,published:{className:"",focusHighlight:true,layoutKind:{options:["absolute","vbox","hbox"],group:"Common",noInspect:false}},create:function(){this.attributes={};this.inherited(arguments);this.classNameChanged();this.focusHighlightChanged();},classNameChanged:function(){this.attributes.className=this.className;this.attributesChanged();},focusHighlightChanged:function(){this.attributes["x-mojo-focus-highlight"]=this.focusHighlight;this.attributesChanged();}});
opus.Class("Palm.Mojo.WidgetContainer",{isa:Palm.Mojo.Container,mixins:[Palm.Mojo.WidgetMixin],layoutKind:"vbox",width:"100%",height:"300",published:{modelName:{value:"",model:true},content:{noInspect:true}},nodeRendered:function(){this.inherited(arguments);this.reRenderWidget();},fetchMojoNode:function(){return this.$.client?this.$.client.getNode():this.getNode();}});
kit.declare("Mojo.Widget.OpusHtml",null,{setup:function(){this.initializeDefaultValues();this.renderWidget();this.updateDisabledState();},updateDisabledState:function(){this.disabled=this.controller.model[this.disabledProperty];var n=this.controller.element;if(this.disabled){n.removeAttribute('x-mojo-tap-highlight');n.addClassName('disabled');}else{n.setAttribute('x-mojo-tap-highlight','momentary');n.removeClassName('disabled');}},initializeDefaultValues:function(){this.disabledProperty=this.controller.attributes.disabledProperty||Mojo.Widget.defaultDisabledProperty;},renderWidget:function(){var templateFile=this.controller.attributes.templateFile;this.controller.element.innerHTML=Mojo.View.render({object:this.controller.model,formatters:this.controller.attributes.formatters||{},inline:templateFile?"":this.controller.attributes.inlineTemplate||" ",template:templateFile});},handleModelChanged:function(){this.renderWidget();this.updateDisabledState();}});opus.Class("Palm.Mojo.Html",{isa:Palm.Mojo.Widget,mojoClass:"OpusHtml",width:"100%",height:60,published:{onformat:{event:"doFormat"},content:{noInspect:false,editor:{editorKind:"Palm.Ares.CodePropertyEditor"}},templateFile:{value:"",onchange:"mojoAttributeChanged"}},create:function(){this.inherited(arguments);this.mojoAttributeChanged("templateFile");this.contentChanged();},createWidget:function(){this.mojoAttributes.formatters=this.doFormat();this.inherited(arguments);},fetchInlineTemplate:function(){return this.content;},updateInlineTemplate:function(){this.mojoAttributeChanged("inlineTemplate",this.fetchInlineTemplate());},contentChanged:function(){this.updateInlineTemplate();}});
opus.Class("Palm.Mojo.Button",{isa:Palm.Mojo.Widget,published:{disabled:{value:false,isModelData:true},buttonClass:{value:"primary",group:"Common",editorKind:"Combo",editor:{editorKind:"Combo"},options:["primary","secondary","dismissal","affirmative","negative"],isModelData:true,modelProperty:"buttonClass"},label:{value:"Button",isModelData:true,modelPropertyName:"labelPropertyName"},labelPropertyName:{value:"label",model:true}},width:"100%",height:60,minHeight:60,maxHeight:60,mojoClass:"Button",create:function(){this.inherited(arguments);this.labelPropertyNameChanged();},labelChanged:function(){this.modelPropertyChanged(this.labelPropertyName,this.label);},getLabel:function(){return this.fetchModelProperty(this.labelPropertyName,this.label);},labelPropertyNameChanged:function(){this.mojoAttributeChanged("labelProperty",this.labelPropertyName);},getDisabled:function(){return this.fetchModelProperty(this.disabledPropertyName,this.disabled);},disabledChanged:function(){this.modelPropertyChanged("disabled");},buttonClassChanged:function(){this.modelPropertyChanged("buttonClass",this.buttonClass);}});opus.Class("Palm.Mojo.ActivityButton",{isa:Palm.Mojo.Button,published:{active:false},create:function(){this.inherited(arguments);this.mojoAttributes.type=Mojo.Widget.activityButton;},renderWidget:function(){this.inherited(arguments);this.activeChanged();},activeChanged:function(){this.node.mojo[this.active?"activate":"deactivate"]();}});
opus.Class("Palm.Mojo.CheckBox",{isa:Palm.Mojo.Widget,published:{value:{value:true,isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},disabled:{value:false,isModelData:true,modelPropertyName:"disabledPropertyName"},disabledPropertyName:{value:"disabled",model:true},trueValue:"true",falseValue:"false",onchange:{event:Mojo.Event.propertyChange+"Handler"}},defaultStyles:{margin:4},width:40,height:34,minHeight:34,maxHeight:34,mojoClass:"CheckBox",create:function(){this.inherited(arguments);this.valuePropertyNameChanged();this.disabledPropertyNameChanged();this.trueValueChanged();this.falseValueChanged();},getValue:function(){return this.fetchModelProperty(this.valuePropertyName,this.value);},getDisabled:function(){return this.fetchModelProperty(this.disabledPropertyName,this.disabled);},disabledChanged:function(){this.modelPropertyChanged(this.disabledPropertyName,this.disabled);},valueChanged:function(){this.modelPropertyChanged(this.valuePropertyName,this.value);},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);},disabledPropertyNameChanged:function(){this.mojoAttributeChanged("disabledProperty",this.disabledPropertyName);},trueValueChanged:function(){this.trueValue=opus.fetchTypedValue(this.trueValue);this.mojoAttributeChanged("trueValue");},falseValueChanged:function(){this.falseValue=opus.fetchTypedValue(this.falseValue);this.mojoAttributeChanged("falseValue");}});
opus.Class("Palm.Mojo.DatePicker",{isa:Palm.Mojo.Widget,mojoClass:"DatePicker",width:"100%",height:60,minHeight:60,maxHeight:60,published:{date:{value:"",isModelData:true,modelPropertyName:"datePropertyName"},datePropertyName:{value:"date",model:true},label:{value:"Date",onchange:"mojoAttributeChanged"},labelPlacement:{value:Mojo.Widget.labelPlacementLeft,options:[Mojo.Widget.labelPlacementLeft,Mojo.Widget.labelPlacementRight],onchange:"mojoAttributeChanged"},month:{value:true,onchange:"mojoAttributeChanged"},day:{value:true,onchange:"mojoAttributeChanged"},year:{value:true,onchange:"mojoAttributeChanged"},maxYear:{value:2099,onchange:"mojoAttributeChanged"},minYear:{value:1900,onchange:"mojoAttributeChanged"},onchange:{event:Mojo.Event.propertyChange+"Handler"}},create:function(){this.inherited(arguments);this.datePropertyNameChanged();this.mojoAttributeChanged("label");this.mojoAttributeChanged("labelPlacement");this.mojoAttributeChanged("month");this.mojoAttributeChanged("day");this.mojoAttributeChanged("year");this.mojoAttributeChanged("maxYear");this.mojoAttributeChanged("minYear");},getDate:function(){var d=this.fetchModelProperty(this.datePropertyName,this.date);return d instanceof Date?d.toString():d;},dateChanged:function(){this.modelPropertyChanged(this.datePropertyName,this.date?new Date(this.date):new Date());},datePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.datePropertyName);}});
opus.Class("Palm.Mojo.List",{isa:Palm.Mojo.WidgetContainer,scroll:false,mojoClass:"List",width:"100%",height:250,published:{items:{editor:{editorKind:"Palm.Ares.CodePropertyEditor"},isModelData:true,modelPropertyName:"itemsPropertyName"},itemsPropertyName:{value:"items",model:true},title:{value:"",isModelData:true,modelProperty:"listTitle"},addItemLabel:{value:"",onchange:"mojoAttributeChanged"},swipeToDelete:{value:true,onchange:"mojoAttributeChanged"},reorderable:{value:true,onchange:"mojoAttributeChanged"},itemTemplateFile:"",listTemplateFile:{value:"",noInspect:true},nullItemTemplateFile:{value:"",noInspect:true},emptyTemplateFile:{value:"",noInspect:true},dividerTemplateFile:"list-divider.html",onitemrendered:{event:"itemRendered"},onlistchange:{event:Mojo.Event.listChange+"Handler"},onlisttap:{event:Mojo.Event.listTap+"Handler"},onlistadd:{event:Mojo.Event.listAdd+"Handler"},onlistdelete:{event:Mojo.Event.listDelete+"Handler"},onlistreorder:{event:Mojo.Event.listReorder+"Handler"},onfetchitems:{event:"fetchItemsCallback"},onformat:{event:"doFormat"},ondividerfunction:{event:"doDividerFunction"},showItemTemplate:{value:false,noExport:true,group:"Common"},renderLimit:20,lookAhead:15,useSampleData:true,rowTapHighlight:true,rowFocusHighlight:true,rowIsTextField:false,layoutKind:{noInspect:true}},chrome:[{name:"client",h:"100%",w:"100%",showing:false,type:"Container",layoutKind:"vbox",scroll:false},{name:"list",h:"100%",w:"100%",type:"Container",scroll:false}],create:function(){if(!this.isDesigning()){this.template=this.controls;this.controls=[];}
this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.listItems=this.createComponent({name:"listItems",type:"Component",owner:this});this.itemsPropertyNameChanged();this.useSampleDataChanged();this.onformatChanged();this.mojoAttributeChanged("addItemLabel");this.mojoAttributeChanged("swipeToDelete");this.mojoAttributeChanged("reorderable");this.renderLimitChanged();this.lookAheadChanged();this.dividerTemplateFileChanged();this.itemTemplateFileChanged();this.listTemplateFileChanged();this.nullItemTemplateFileChanged();this.emptyTemplateFileChanged();this.onfetchitemsChanged();this.ondividerfunctionChanged();},fetchMojoNode:function(){return this.$.list?this.$.list.getNode():this.getNode();},destroyWidget:function(){this.inherited(arguments);this.listItems.destroyComponents();this.invalidateListTemplates();},createWidget:function(){if(this.isDesigning()&&!this.isNativeRendering()){this.updateTemplate();}
this.inherited(arguments);this.applyRenderFromModelPatch();this._mojoConnections.push(kit.connect(this.mwc.assistant,"renderItemsBefore",this,"deferFitHeightToContent"));this.deferFitHeightToContent();this._mojoConnections.push(kit.connect(this.mwc.assistant,"updateListClasses",this,"updateRowClasses"));this.updateRowClasses();this.mwc.assistant.maybeVisible=true;},invalidateListTemplates:function(){var templates=[this.dividerTemplateFile,this.listTemplateFile,this.itemTemplateFile,this.nullItemTemplateFile,this.emptyTemplateFile];for(var i=0,c=templates.length;i<c;i++){this.invalidateMojoTemplate(templates[i]);}},invalidateMojoTemplate:function(inTemplate){var n=Mojo.View._calculateTemplateFileName(inTemplate);delete Mojo.View.templates[n];},isNativeRendering:function(){return this.itemTemplateFile!="";},applyRenderFromModelPatch:function(){var self=this;var renderFromModel=this.mwc.assistant.renderFromModel;this.mwc.assistant.renderFromModel=function(){self.listItems.destroyComponents();renderFromModel.apply(this);}},deferFitHeightToContent:function(){opus.job(this.globalId+"fit",dojo.hitch(this,this.fitHeightToContent),1);},fitHeightToContent:function(){this.setHeight(this.getContentHeight());},getContentHeight:function(){var h=0;var node=this.fetchMojoNode();for(var i=0,cn=node.childNodes,c;c=cn[i];i++){if(c.nodeType==1){h+=c.offsetHeight;}}
if(this.isDesigning()){h=Math.max(100,h);}
return h;},updateRowClasses:function(){var items=this.listItems.$;var count=0;for(var i in items){count++;}
var m=count>1?"middle":"single";var cn,t,p;for(i in items){p=items[i].node.parentNode;t=p.className=p.className.indexOf("first")>=0?"first":(p.className.indexOf("last")>=0?"last":m);items[i].setRowType(t);}},updateTemplate:function(){var t=this.$.client;var serial=kit.mixin(t.exportComponent(this.owner),{showing:true,t:0});this.template=serial.controls;},mojoItemRendered:function(inListNode,inModel,inNode){if(this.template){var itemModel=Mojo.Model.format(inModel,this.mojoAttributes.formatters);var itemModelProxy={fetchWidgetModel:function(inWidget){var n=inWidget.modelName;return n?(itemModel[n]||(itemModel[n]={})):itemModel;}};inNode.innerHTML="";inNode.style.padding="0px";inNode.style.background="";inNode.style.border="";var item=this.listItems.createComponent({type:"Palm.Mojo.Row",modelProxy:itemModelProxy,styles:{position:"relative"},layoutKind:"relative",tapHighlight:this.rowTapHighlight,focusHighlight:this.rowFocusHighlight,isTextField:this.rowIsTextField,dispatchProxy:this.owner.dispatchProxy,autoRowType:false,parentNode:inNode,parent:null,chrome:[{name:"client",type:"Palm.Mojo.Container",w:"100%",layoutKind:"relative",controls:this.template}]},{owner:this.listItems,sceneController:this.fetchSceneController()});this.reflowItem(item,this.getClientBounds().w);item.render();item.parent=this.$.list;}
this.itemRendered();},onfetchitemsChanged:function(){if(this.onfetchitems){this.mojoAttributeChanged("itemsCallback",dojo.hitch(this,"fetchItemsCallback"));}},getItems:function(){return this.fetchModelProperty(this.itemsPropertyName,this.items);},itemsPropertyNameChanged:function(){this.mojoAttributeChanged("itemsProperty",this.itemsPropertyName);},itemsChanged:function(){this.useSampleData=this.items==Palm.Mojo.List.sampleData;var items=kit.isString(this.items)?kit.fromJson(this.items):this.items;this.modelPropertyChanged(this.itemsPropertyName,items||[]);},getTitle:function(){this.fetchModelProperty("listTitle");},titleChanged:function(){this.modelPropertyChanged("listTitle",this.title);},useSampleDataChanged:function(){if(this.useSampleData){this.setItems(Palm.Mojo.List.sampleData);}},dividerTemplateFileChanged:function(){this.mojoAttributeChanged("dividerTemplate",this.dividerTemplateFile);},itemTemplateFileChanged:function(){this.mojoAttributes.onItemRendered=this.isNativeRendering()?kit.hitch(this,"itemRendered"):kit.hitch(this,"mojoItemRendered");var t=this.itemTemplateFile?this.itemTemplateFile:Mojo.Widget.getSystemTemplatePath("list/null-item");this.mojoAttributeChanged("itemTemplate",t);},listTemplateFileChanged:function(){this.mojoAttributeChanged("listTemplate",this.listTemplateFile);},nullItemTemplateFileChanged:function(){this.mojoAttributeChanged("nullItemTemplate",this.nullItemTemplateFile);},emptyTemplateFileChanged:function(){this.mojoAttributeChanged("emptyTemplate",this.emptyTemplateFile);},ondividerfunctionChanged:function(){this.mojoAttributeChanged("dividerFunction",this.ondividerfunction?this.doDividerFunction.bind(this):null);},onformatChanged:function(){this.mojoAttributeChanged("formatters",this.onformat?this.doFormat():null);},reflowItems:function(){var items=this.listItems.$;var w=this.getClientBounds().w;for(var i in items){this.reflowItem(items[i],w);}},reflowItem:function(inItem,inWidth){inItem.bounds.w=inWidth;inItem.renderBounds();inItem.reflow();},boundsRendered:function(){this.inherited(arguments);this.reflowItems();},showItemTemplateChanged:function(){if(this.showItemTemplate){this.$.client.show();this.$.list.hide();}else{this.$.client.hide();this.$.list.show();this.reRenderWidget();}},itemHeightChanged:function(){this.$.client.setHeight(this.itemHeight);if(this.mwc){this.reRenderWidget();}},renderLimitChanged:function(){this.mojoAttributeChanged("renderLimit",Number(this.renderLimit));},lookAheadChanged:function(){this.mojoAttributeChanged("lookAhead",Number(this.lookAhead));}});Palm.Mojo.List.sampleData=[{item:0,label:"Zero",value:0},{item:1,label:"One",value:1},{item:2,label:"Two",value:2},{item:3,label:"Three",value:3}];
opus.Class("Palm.Mojo.ProgressPill",{isa:Palm.Mojo.Widget,published:{progress:{value:0.5,isModelData:true,modelPropertyName:"progressPropertyName"},progressPropertyName:{value:"progress",model:true},startValue:{value:0,isModelData:true,modelPropertyName:"startValuePropertyName"},startValuePropertyName:{value:"startValue",model:true},title:{value:"Progress",isModelData:true,onchange:"modelPropertyChanged"},titleRight:{value:"",isModelData:true,onchange:"modelPropertyChanged"},image:{value:"",isModelData:true,onchange:"modelPropertyChanged"},icon:{value:"",onchange:"mojoAttributeChanged"},iconPath:{value:"",onchange:"mojoAttributeChanged"},onprogressicontap:{event:Mojo.Event.progressIconTap+"Handler"},onprogresscomplete:{event:Mojo.Event.progressComplete+"Handler"}},width:"100%",height:50,minHeight:50,maxHeight:50,mojoClass:"ProgressPill",create:function(){this.inherited(arguments);this.progressPropertyNameChanged();this.startValuePropertyNameChanged();this.mojoAttributeChanged("icon");this.mojoAttributeChanged("iconPath");},getTitle:function(){return this.fetchModelProperty("title");},getProgress:function(){return this.fetchModelProperty(this.progressPropertyName,this.progress);},getImage:function(){return this.fetchModelProperty("image");},getStartValue:function(){return this.fetchModelProperty(this.startValuePropertyName,this.startValue);},progressChanged:function(){this.modelPropertyChanged(this.progressPropertyName,this.progress);},progressPropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.progressPropertyName);},startValuePropertyNameChanged:function(){this.mojoAttributeChanged("modelStartProperty",this.startValuePropertyName);}});
opus.Class("Palm.Mojo.RadioButton",{isa:Palm.Mojo.Widget,published:{value:{value:1,isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},disabled:{value:false,isModelData:true,modelPropertyName:"disabledPropertyName"},disabledPropertyName:{value:"disabled",model:true},choices:{value:"[\n\t{label: 'One', value: 1},\n\t{label: 'Two', value: 2},\n\t{label: 'Three', value: 3}\n]",editor:{editorKind:"Palm.Ares.CodePropertyEditor"}},onchange:{event:Mojo.Event.propertyChange+"Handler"}},width:"100%",height:70,minHeight:70,maxHeight:70,mojoClass:"RadioButton",create:function(){this.inherited(arguments);this.choicesChanged();this.valuePropertyNameChanged();this.disabledPropertyNameChanged();},getValue:function(){return this.fetchModelProperty(this.valuePropertyName,this.value);},valueChanged:function(){this.value=opus.fetchTypedValue(this.value);this.modelPropertyChanged(this.valuePropertyName,this.value);},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);},getDisabled:function(){return this.fetchModelProperty(this.disabledPropertyName,this.disabled);},disabledChanged:function(){this.modelPropertyChanged(this.disabledPropertyName,this.disabled);},disabledPropertyNameChanged:function(){this.mojoAttributeChanged("disabledProperty",this.disabledPropertyName);},getChoicesArray:function(){return kit.isString(this.choices)?kit.fromJson(this.choices):this.choices;},choicesChanged:function(){this.mojoAttributeChanged("choices",this.getChoicesArray());}});
opus.Class("Palm.Mojo.Slider",{isa:Palm.Mojo.Widget,defaultStyles:{marginTop:8,marginBottom:8,overflow:"visible"},published:{value:{value:30,isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},minValue:{value:1,onchange:"mojoAttributeChanged"},maxValue:{value:100,onchange:"mojoAttributeChanged"},round:{value:false,onchange:"mojoAttributeChanged"},updateInterval:{value:0,onchange:"mojoAttributeChanged"},onchange:{event:Mojo.Event.propertyChange+"Handler"}},width:"100%",height:34,minHeight:34,maxHeight:34,mojoClass:"Slider",create:function(){this.inherited(arguments);this.mojoAttributeChanged("minValue");this.mojoAttributeChanged("maxValue");this.mojoAttributeChanged("round");this.mojoAttributeChanged("updateInterval");this.valuePropertyNameChanged();},getValue:function(){return this.fetchModelProperty(this.valuePropertyName,this.value);},valueChanged:function(){this.modelPropertyChanged(this.valuePropertyName,this.value);},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);}});
opus.Class("Palm.Mojo.Spinner",{isa:Palm.Mojo.Widget,published:{spinning:{value:true,isModelData:true,modelPropertyName:"spinningPropertyName"},spinningPropertyName:{value:"spinning",model:true}},spinnerSize:Mojo.Widget.spinnerSmall,mojoClass:"Spinner",width:32,minWidth:32,maxWidth:32,height:32,minHeight:32,maxHeight:32,create:function(){this.inherited(arguments);this.mojoAttributeChanged("spinnerSize");this.spinningPropertyNameChanged();},destroyWidget:function(){var node=this.fetchMojoNode();if(node){node.className="";}
this.inherited(arguments);},renderWidget:function(){this.inherited(arguments);this.spinningChanged();},getSpinning:function(){return this.fetchModelProperty(this.spinningPropertyName,this.spinning);},spinningChanged:function(){if(!this.isDesigning()){this.modelPropertyChanged(this.spinningPropertyName,this.spinning);}else{this.styleChanged();}},spinningPropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.spinningPropertyName);},modifyDomStyles:function($s){if(this.isDesigning()&&!this.spinning){$s.opacity=0;}}});opus.Class("Palm.Mojo.LargeSpinner",{isa:Palm.Mojo.Spinner,spinnerSize:Mojo.Widget.spinnerLarge,width:128,minWidth:128,maxWidth:128,height:128,minHeight:128,maxHeight:128});opus.Class("Palm.Mojo.CustomSpinner",{isa:Palm.Mojo.Spinner,published:{spinnerSize:{noInspect:true},superClass:{value:"",onchange:"mojoAttributeChanged"},startFrameCount:{value:0,onchange:"mojoAttributeChanged"},mainFrameCount:{value:"",onchange:"mojoAttributeChanged"},finalFrameCount:{value:0,onchange:"mojoAttributeChanged"},frameHeight:{value:0,onchange:"mojoAttributeChanged"},fps:{value:10,onchange:"mojoAttributeChanged"}},create:function(){this.inherited(arguments);this.mojoAttributeChanged("superClass");this.mojoAttributeChanged("startFrameCount");this.mojoAttributeChanged("mainFrameCount");this.mojoAttributeChanged("finalFrameCount");this.mojoAttributeChanged("finalFrameCount");this.mojoAttributeChanged("frameHeight");this.mojoAttributeChanged("fps");}});
opus.Class("Palm.Mojo.TextField",{isa:Palm.Mojo.Widget,published:{value:{value:"",isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},disabled:{value:false,isModelData:true,modelPropertyName:"disabledPropertyName"},disabledPropertyName:{value:"disabled",model:true},multiline:false,maxLength:"",inputName:{value:"",onchange:"mojoAttributeChanged"},autoHeight:true,autoFocus:{value:false,onchange:"mojoAttributeChanged"},modifierState:{value:"",options:["",Mojo.Widget.numLock,Mojo.Widget.capsLock],onchange:"mojoAttributeChanged"},growWidth:{value:false,onchange:"mojoAttributeChanged"},autoResizeMax:{value:"",onchange:"mojoAttributeChanged"},limitResize:{value:false,onchange:"mojoAttributeChanged"},hintText:{value:"hint",onchange:"mojoAttributeChanged"},preventResize:{value:false,onchange:"mojoAttributeChanged"},holdToEnable:{value:false,onchange:"mojoAttributeChanged"},focusMode:{value:"",options:["",Mojo.Widget.focusSelectMode,Mojo.Widget.focusInsertMode,Mojo.Widget.focusAppendMode],onchange:"mojoAttributeChanged"},enterSubmits:{value:false,onchange:"mojoAttributeChanged"},changeOnKeyPress:{value:false,onchange:"mojoAttributeChanged"},requiresEnterKey:{value:false,onchange:"mojoAttributeChanged"},holdToEdit:{value:false,onchange:"mojoAttributeChanged"},emoticons:{value:false,onchange:"mojoAttributeChanged"},autoReplace:{value:true,onchange:"mojoAttributeChanged"},textCase:{value:Mojo.Widget.steModeSentenceCase,options:[Mojo.Widget.steModeSentenceCase,Mojo.Widget.steModeTitleCase,Mojo.Widget.steModeLowerCase],onchange:"mojoAttributeChanged"},oncharsallowed:{event:"doCharsAllowed"},onchange:{event:Mojo.Event.propertyChange+"Handler"}},width:"100%",height:52,minHeight:52,maxHeight:52,mojoClass:"TextField",create:function(){this.inherited(arguments);this.mojoAttributeChanged("inputName");this.mojoAttributeChanged("autoFocus");this.mojoAttributeChanged("modifierState");this.mojoAttributeChanged("growWidth");this.mojoAttributeChanged("autoResizeMax");this.mojoAttributeChanged("limitResize");this.mojoAttributeChanged("preventResize");this.mojoAttributeChanged("holdToEnable");this.mojoAttributeChanged("focusMode");this.mojoAttributeChanged("enterSubmits");this.mojoAttributeChanged("changeOnKeyPress");this.mojoAttributeChanged("requiresEnterKey");this.mojoAttributeChanged("holdToEdit");this.mojoAttributeChanged("emoticons");this.mojoAttributeChanged("autoReplace");this.mojoAttributeChanged("textCase");this.mojoAttributeChanged("hintText");this.oncharsallowedChanged();this.multilineChanged();this.autoHeightChanged();this.valuePropertyNameChanged();this.disabledPropertyNameChanged();this.maxLengthChanged();},destructor:function(){this.stopMonitoringSize();this.inherited(arguments);},getValue:function(){return this.fetchModelProperty(this.valuePropertyName,this.value);},valueChanged:function(){this.modelPropertyChanged(this.valuePropertyName,String(this.value));},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);},getDisabled:function(){return this.fetchModelProperty(this.disabledPropertyName,this.disabled);},disabledChanged:function(){this.modelPropertyChanged(this.disabledPropertyName,this.disabled);},disabledPropertyNameChanged:function(){this.mojoAttributeChanged("disabledProperty",this.disabledPropertyName);},oncharsallowedChanged:function(){this.mojoAttributeChanged("charsAllow",this.oncharsallowed?this.doCharsAllowed.bind(this):null);},multilineChanged:function(){this.mojoAttributeChanged("multiline");this.updateSizeMonitoring();},autoHeightChanged:function(){this.updateSizeMonitoring();},monitorSize:function(){if(this.mwc&&this.mwc.assistant.inputArea.style.display!="none"){var h=this.mwc.assistant.inputArea.offsetHeight+28;if(h!=this.getHeight()){this.setHeight(h);}}},updateSizeMonitoring:function(){if(this.multiline&&this.autoHeight&&!this.isDesigning()){this.startMonitoringSize();}else{this.stopMonitoringSize();}},startMonitoringSize:function(){this._sizeMonitor=setInterval(kit.hitch(this,"monitorSize"),250);},stopMonitoringSize:function(){clearInterval(this._sizeMonitor);},maxLengthChanged:function(){this.mojoAttributeChanged("maxLength",this.maxLength!=""?Number(this.maxLength):undefined);}});
opus.Class("Palm.Mojo.PasswordField",{isa:Palm.Mojo.TextField,mojoClass:"PasswordField"});
opus.Class("Palm.Mojo.TimePicker",{isa:Palm.Mojo.Widget,width:"100%",height:60,minHeight:60,maxHeight:60,mojoClass:"TimePicker",published:{time:{value:"",isModelData:true,modelPropertyName:"timePropertyName"},timePropertyName:{value:"time",model:true},label:{value:"Time",onchange:"mojoAttributeChanged"},labelPlacement:{value:Mojo.Widget.labelPlacementLeft,options:[Mojo.Widget.labelPlacementLeft,Mojo.Widget.labelPlacementRight],onchange:"mojoAttributeChanged"},minuteInterval:5,onchange:{event:Mojo.Event.propertyChange+"Handler"}},create:function(){this.inherited(arguments);this.timePropertyNameChanged();this.mojoAttributeChanged("label");this.mojoAttributeChanged("labelPlacement");this.minuteIntervalChanged();},getTime:function(){var d=this.fetchModelProperty(this.timePropertyName,this.time);return d instanceof Date?d.toString():d;},timeChanged:function(){this.modelPropertyChanged(this.timePropertyName,this.makeJsDateFromTime(this.time));},timePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.timePropertyName);},makeJsDateFromTime:function(inTimeString){var bad="Invalid Date";var d=new Date(inTimeString);if(d==bad){var now=new Date();d=new Date(now.toLocaleDateString()+" "+this.time);}
if(d==bad){d=new Date();}
return d;},minuteIntervalChanged:function(){this.mojoAttributeChanged("minuteInterval",Number(this.minuteInterval));}});
opus.Class("Palm.Mojo.ToggleButton",{isa:Palm.Mojo.Widget,width:96,height:50,minHeight:50,maxHeight:50,mojoClass:"ToggleButton",published:{value:{value:false,isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},disabled:{value:false,isModelData:true,modelPropertyName:"disabledPropertyName"},disabledPropertyName:{value:"disabled",model:true},trueValue:"true",falseValue:"false",trueLabel:{value:"On",onchange:"mojoAttributeChanged"},falseLabel:{value:"Off",onchange:"mojoAttributeChanged"},onchange:{event:Mojo.Event.propertyChange+"Handler"}},create:function(){this.inherited(arguments);this.valuePropertyNameChanged();this.disabledPropertyNameChanged();this.trueValueChanged();this.falseValueChanged();this.mojoAttributeChanged("trueLabel");this.mojoAttributeChanged("falseLabel");},getValue:function(){return this.fetchModelProperty(this.valuePropertyName,this.value);},valueChanged:function(){this.value=opus.fetchTypedValue(this.value);this.modelPropertyChanged(this.valuePropertyName,this.value);},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);},getDisabled:function(){return this.fetchModelProperty(this.disabledPropertyName,this.disabled);},disabledChanged:function(){this.modelPropertyChanged(this.disabledPropertyName,this.disabled);},disabledPropertyNameChanged:function(){this.mojoAttributeChanged("disabledProperty",this.disabledPropertyName);},trueValueChanged:function(){this.trueValue=opus.fetchTypedValue(this.trueValue);this.mojoAttributeChanged("falseValue");},falseValueChanged:function(){this.falseValue=opus.fetchTypedValue(this.falseValue);this.mojoAttributeChanged("falseValue");}});
opus.Class("Palm.Mojo.IntegerPicker",{isa:Palm.Mojo.Widget,published:{value:{value:0,isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},label:{value:"Integer",onchange:"mojoAttributeChanged"},labelPlacement:{value:Mojo.Widget.labelPlacementLeft,options:[Mojo.Widget.labelPlacementLeft,Mojo.Widget.labelPlacementRight],onchange:"mojoAttributeChanged"},min:{value:0},max:{value:10},padNumbers:{value:false,onchange:"mojoAttributeChanged"},onchange:{event:Mojo.Event.propertyChange+"Handler"}},mojoClass:"IntegerPicker",width:"100%",height:60,minHeight:60,maxHeight:60,create:function(){this.inherited(arguments);this.valuePropertyNameChanged();this.mojoAttributeChanged("label");this.mojoAttributeChanged("labelPlacement");this.minChanged();this.maxChanged();this.mojoAttributeChanged("padNumbers");},getValue:function(){return this.fetchModelProperty(this.valuePropertyName);},valueChanged:function(){this.modelPropertyChanged(this.valuePropertyName,Number(this.value)||0);},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);},maxChanged:function(){this.mojoAttributeChanged("max",Number(this.max));},minChanged:function(){this.mojoAttributeChanged("min",Number(this.min));}});
opus.Class("Palm.Mojo.ListSelector",{isa:Palm.Mojo.Widget,published:{value:{value:"",isModelData:true,modelPropertyName:"valuePropertyName"},valuePropertyName:{value:"value",model:true},disabled:{value:false,isModelData:true,modelPropertyName:"disabledPropertyName"},disabledPropertyName:{value:"disabled",model:true},choices:{value:"[{label: 'One', value: '1'},{label: 'Two', value: '2'},{label: 'Three', value: '3'}]",isModelData:true,editor:{editorKind:"Palm.Ares.CodePropertyEditor"}},label:{value:"Pick One",onchange:"mojoAttributeChanged"},labelPlacement:{options:[Mojo.Widget.labelPlacementRight,Mojo.Widget.labelPlacementLeft],onchange:"mojoAttributeChanged"},multiline:{value:false,onchange:"mojoAttributeChanged"},onchange:{event:Mojo.Event.propertyChange+"Handler"}},mojoClass:"ListSelector",width:"100%",height:60,minHeight:60,maxHeight:60,create:function(){this.inherited(arguments);this.mojoAttributeChanged("label");this.mojoAttributeChanged("labelPlacement");this.mojoAttributeChanged("multiline");},renderWidget:function(){this.inherited(arguments);if(this.isDesigning()){this.mwc.assistant.openSelector=opus.nop;}},getValue:function(){return this.fetchModelProperty(this.valuePropertyName,this.value);},getDisabled:function(){return this.fetchModelProperty(this.disabledPropertyName,this.disabled);},getChoices:function(){return this.fetchModelProperty("choices");},valueChanged:function(){this.value=opus.fetchTypedValue(this.value);this.modelPropertyChanged(this.valuePropertyName,this.value);},valuePropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.valuePropertyName);},disabledChanged:function(){this.modelPropertyChanged(this.disabledPropertyName,this.disabled);},disabledPropertyNameChanged:function(){this.mojoAttributeChanged("disabledProperty",this.disabledPropertyName);},choicesChanged:function(){var choices=kit.isString(this.choices)?kit.fromJson(this.choices):this.choices;if(!choices){debugger;}
this.modelPropertyChanged("choices",choices||[]);}});
opus.Class("Palm.Mojo.Label",{isa:Palm.Mojo.Html,width:"100%",height:50,published:{content:{noExport:true,noInspect:true},templateFile:{noInspect:true},className:"",kind:{value:"label",options:["label","title"],onchange:"classNameChanged"},label:{value:"Label",isModelData:true,modelPropertyName:"labelPropertyName"},labelPropertyName:{value:"label",model:true}},create:function(){this.attributes={};this.classNameChanged();this.labelPropertyNameChanged();this.inherited(arguments);},classNameChanged:function(){this.attributes.className=this.className?this.className:this.kind;this.attributesChanged();},fetchInlineTemplate:function(){return"#{"+this.labelPropertyName+"}";},getLabel:function(){return this.fetchModelProperty(this.labelPropertyName,this.label);},labelChanged:function(){this.modelPropertyChanged(this.labelPropertyName,this.label);if(!this.isRendering()){this.updateInlineTemplate();}},labelPropertyNameChanged:function(){this.updateInlineTemplate();}});
opus.Class("Palm.Mojo.ImageView",{isa:Palm.Mojo.Widget,width:"100%",height:"100%",mojoClass:"ImageView",published:{highResolutionLoadTimeout:{value:1.2,onchange:"mojoAttributeChanged"},extractfsParams:{value:"",onchange:"mojoAttributeChanged"},lowResExtractFSParams:{value:"",onchange:"mojoAttributeChanged"},noExtractFS:{value:true,onchange:"mojoAttributeChanged"},limitZoom:{value:false,onchange:"mojoAttributeChanged"},panInsetX:{value:0,onchange:"mojoAttributeChanged"},panInsetY:{value:0,onchange:"mojoAttributeChanged"},centerUrl:"",rightUrl:"",leftUrl:"",onLeftFunction:{event:"navigateLeft",isModelData:true},onRightFunction:{event:"navigateRight",isModelData:true},onImageViewChanged:{event:Mojo.Event.imageViewChanged+"Handler"}},postCreate:function(){this.inherited(arguments);this.mojoAttributeChanged("highResolutionLoadTimeout");this.mojoAttributeChanged("extractfsParams");this.mojoAttributeChanged("lowResExtractFSParams");this.mojoAttributeChanged("noExtractFS");this.mojoAttributeChanged("limitZoom");this.mojoAttributeChanged("panInsetX");this.mojoAttributeChanged("panInsetY");},renderWidget:function(){this.node.style.height=Mojo.Environment.DeviceInfo.screenHeight+"px";this.node.style.width=Mojo.Environment.DeviceInfo.screenWidth+"px";this.inherited(arguments);},onLeftFunctionChanged:function(){this.modelPropertyChanged("onLeftFunction",dojo.hitch(this,"navigateLeft"));},onRightFunctionChanged:function(){this.modelPropertyChanged("onRightFunction",dojo.hitch(this,"navigateRight"));},renderWidget:function(){this.inherited(arguments);this.centerUrlChanged();this.leftUrlChanged();this.rightUrlChanged();},centerUrlChanged:function(){if(this.mwc){var p=this.centerUrl?this.rewritePath(this.centerUrl):"";this.fetchMojoNode().mojo.centerUrlProvided(p);}},leftUrlChanged:function(){if(this.mwc){var p=this.leftUrl?this.rewritePath(this.leftUrl):"";this.fetchMojoNode().mojo.leftUrlProvided(p);}},rightUrlChanged:function(){if(this.mwc){var p=this.rightUrl?this.rewritePath(this.rightUrl):"";this.fetchMojoNode().mojo.rightUrlProvided(p);}}});
opus.Class("Palm.Mojo.WebView",{isa:Palm.Mojo.Widget,published:{virtualpageheight:"",virtualpagewidth:"",url:"",minFontSize:"",topMargin:"",cacheAdapter:true,interrogateClicks:true,showClickedLink:true},width:"100%",height:300,mojoClass:"WebView",create:function(){this.inherited(arguments);this.virtualpageheightChanged();this.virtualpagewidthChanged();this.urlChanged();this.minFontSizeChanged();this.topMarginChanged();this.cacheAdapterChanged();this.interrogateClicksChanged();this.showClickedLinkChanged();},virtualpageheightChanged:function(){this.mojoAttributeChanged("virtualpageheight",this.virtualpageheight||undefined);},virtualpagewidthChanged:function(){this.mojoAttributeChanged("virtualpagewidth",this.virtualpagewidth||undefined);},urlChanged:function(){this.mojoAttributeChanged("url",this.url||undefined);},pageIdentifierChanged:function(){this.mojoAttributeChanged("pageIdentifier",this.pageIdentifier||undefined);},minFontSizeChanged:function(){this.mojoAttributeChanged("minFontSize",this.minFontSize||undefined);},topMarginChanged:function(){this.mojoAttributeChanged("topMargin",this.topMargin);},cacheAdapterChanged:function(){this.mojoAttributeChanged("cacheAdapter");},interrogateClicksChanged:function(){this.mojoAttributeChanged("interrogateClicks");},showClickedLinkChanged:function(){this.mojoAttributeChanged("showClickedLink",this.showClickedLink||undefined);}});
opus.Class("Palm.Mojo.Scroller",{isa:Palm.Mojo.WidgetContainer,mojoClass:"Scroller",published:{mode:{value:"vertical",options:["free","horizontal","vertical","dominant","horizontal-snap","vertical-snap"],onchange:"mojoAttributeChanged"},snapElements:{value:"",isModelData:true},onchange:{event:Mojo.Event.propertyChange+"Handler"},onScrollStarting:{event:Mojo.Event.scrollStarting+"Handler"},layoutKind:{options:["absolute","vbox","hbox"],group:"Common",noInspect:false}},attributes:{"x-mojo-element":"Scroller"},scroll:false,dropTarget:true,styles:{cursor:"move",overflow:"hidden"},chrome:[{name:"client",type:"Container",w:"100%",h:"100%",layoutKind:"vbox",scroll:false,styles:{overflow:"visible"}}],create:function(){this.inherited(arguments);this.layoutKindChanged();this.mojoAttributeChanged("mode");},destructor:function(){this.disconnect();this.inherited(arguments);},layoutKindChanged:function(){this.layout=opus.layoutRegistry.fetch("vbox");this.$.client.setLayoutKind(this.layoutKind);this.reflow();},fetchMojoNode:function(){return this.getNode();},disconnect:function(){kit.forEach(this._resizeConnects,kit.disconnect);},contentRendered:function(){this.inherited(arguments);this.watchScrollee();},watchScrollee:function(){this.disconnect();for(var i=0,c;(c=this.$.client.c$[i])&&!c.showing;i++);if(c){this._resizeConnects=[kit.connect(c,"contentRendered",this,"reset"),kit.connect(c,"boundsRendered",this,"reset")];if(c.nodeSizeChanged){this._resizeConnects.push(kit.connect(c,"nodeSizeChanged",this,"validate"));}}
this.reset();},reset:function(){if(this.mwc){var mojo=this.fetchMojoNode().mojo;mojo.scrollTo(0,0);this.validate();}},validate:function(){if(this.mwc){var mojo=this.fetchMojoNode().mojo;mojo.validateScrollPosition();}},fetchNodeList:function(inList){var list=kit.isString(inList)?inList.split(','):inList||"";var r=[];var controller=this.fetchSceneController();for(var i=0,n;n=list[i];i++){r.push(controller.get(n));}
return r;},getSnapElements:function(){return this.fetchModelProperty("snapElements");},snapElementsChanged:function(){var nodes=this.fetchNodeList(this.snapElements);this.modelPropertyChanged("snapElements",nodes);}});opus.Class("Palm.Mojo.FadeScroller",{isa:Palm.Mojo.Container,dropTarget:true,published:{mode:{value:"vertical",options:["free","horizontal","vertical","dominant","horizontal-snap","vertical-snap"],onchange:"mojoAttributeChanged"},},layoutKind:"absolute",chrome:[{w:"100%",h:27,attributes:{"x-mojo-scroll-fade":"top"},styles:{bgImage:"$Palm-Mojo/images/top-fade-dark.png",zIndex:10},layoutKind:"vbox",controls:[{type:"Image",hAlign:"center",w:24,h:24,src:"$Palm-Mojo/images/arrow-up.png"}]},{name:"scroller",type:"Palm.Mojo.Scroller",w:"100%",h:"100%"},{w:"100%",h:27,b:0,attributes:{"x-mojo-scroll-fade":"bottom"},styles:{bgImage:"$Palm-Mojo/images/bottom-fade-dark.png",zIndex:10},layoutKind:"vbox",controls:[{type:"Image",hAlign:"center",w:24,h:24,src:"$Palm-Mojo/images/arrow-down.png"}]}],create:function(){this.inherited(arguments);this.modeChanged();},modeChanged:function(){this.$.scroller.setMode(this.mode);},getControlParent:function(){return this.$.scroller.$.client;},watchScrollee:function(){this.$.scroller.watchScrollee();}});
opus.animate.geometry=function(inControl,inBound,inEnd,inOnEnd,inOnAnimate){var f=function(inX){var b={w:"Width",h:"Height",l:"Left",t:"Top"};inControl["set"+b[inBound]](Math.round(inX));inOnAnimate&&inOnAnimate(inX);}
return new kit._Animation({curve:[inControl.bounds[inBound],inEnd],easing:dojo.fx.easing.cubicOut,duration:333,onAnimate:f,onStop:inOnEnd,onEnd:inOnEnd}).play();};opus.Class("Palm.Mojo.Drawer",{isa:Palm.Mojo.WidgetContainer,mojoClass:"Drawer",h:300,published:{open:{value:true,isModelData:true,modelPropertyName:"openPropertyName"},openPropertyName:{value:"open",model:true},unstyled:{value:false,onchange:"mojoAttributeChanged"},titleToggleOpen:true,titleShowing:false,titleLabel:"",onchange:{event:Mojo.Event.propertyChange+"Handler"},openHeight:{value:300,noInspect:true},layoutKind:{options:["absolute","vbox","hbox"],group:"Common",noInspect:false}},styles:{overflow:"hidden"},chrome:[{name:"titleContainer",type:"Container",attributes:{className:"palm-row drawer-button"},h:50,w:"100%",showing:false,onclick:"titleClicked",styles:{marginBottom:-1},controls:[{name:"titleLabel",styles:{paddingLeft:10,paddingRight:10,oneLine:true},h:"100%",w:"100%"}]},{name:"clientContainer",type:"Container",w:"100%",h:"100%",layoutKind:"vbox",scroll:false,controls:[{name:"client",type:"Container",w:"100%",layoutKind:"vbox",scroll:false}]}],scrollHandler:function(e){if(!this.isDesigning()){this.node.scrollTop=0;kit.stopEvent(e);}},create:function(){this.inherited(arguments);if(!this.getOpen()){this.height=this.getClosedHeight();}
this.layoutKindChanged();this.openPropertyNameChanged();this.mojoAttributeChanged("unstyled");this.titleShowingChanged();this.titleLabelChanged();this.openHeightChanged();},layoutKindChanged:function(){this.layout=opus.layoutRegistry.fetch("vbox");this.$.client.setLayoutKind(this.layoutKind);this.reflow();},fetchMojoNode:function(){return this.$.clientContainer?this.$.clientContainer.getNode():this.getNode();},destroyWidget:function(){if(this.mwc){var n=this.fetchMojoNode();n.appendChild(this.$.client.node);n.removeChild(this.mwc.assistant.wrapper);}
this.inherited(arguments);},setHeight:function(){if(this.getOpen()||this._animating){this.inherited(arguments);}},getClosedHeight:function(){return this.titleShowing?this.$.titleContainer.getHeight():0;},heightChanged:function(){if(!this._animating&&this.getOpen()){this.setOpenHeight(this.height=="auto"?"auto":this.getBounds().h);}},openHeightChanged:function(){this.$.clientContainer.setHeight(this.openHeight=="auto"?"auto":this.openHeight-this.getClosedHeight());this.$.client.setHeight(this.openHeight=="auto"?"auto":"100%");this.updateInternalHeight();},updateInternalHeight:function(){if(this.mwc){var b=this.$.client.getBounds();var a=this.mwc.assistant;a.wrapper.style.height=a.contentDiv.style.height=b.h+"px";}},renderWidget:function(){this.inherited(arguments);this.mwc.assistant.updateFromModel=dojo.hitch(this,"mojoUpdateFromModel");this.updateInternalHeight();},mojoUpdateFromModel:function(){var a=this.mwc.assistant;if(a.wasOpen!==a.controller.model[a.propName]){if(this._animation){this._animation.stop();}
var newHeight=this.getClosedHeight()+(a.wasOpen?0:this.$.client.getBounds().h);this.doAnimation(newHeight);a.wasOpen=a.controller.model[a.propName];}},doAnimation:function(inHeight){this._animating=true;this._animation=opus.animate.geometry(this,"h",inHeight,kit.hitch(this,"finishAnimation"),null);},finishAnimation:function(){this.setHeight(this.getOpen()?this.openHeight:this.getClosedHeight());this._animating=false;this._animation=null;},openPropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.openPropertyName);},openChanged:function(){this.modelPropertyChanged(this.openPropertyName,this.open);},getOpen:function(){return this.fetchModelProperty(this.openPropertyName,this.open);},openDrawer:function(){this.setOpen(true);},closeDrawer:function(){this.setOpen(false);},toggleOpen:function(){this.setOpen(!this.getOpen());},titleClicked:function(e){if(this.titleToggleOpen){opus.job("toggle",kit.hitch(this,"toggleOpen"),10);}},titleShowingChanged:function(){this.$.titleContainer.setShowing(this.titleShowing);},titleLabelChanged:function(){this.$.titleLabel.setContent(this.titleLabel);}});
opus.Class("Palm.Mojo.Collapsible",{isa:Palm.Mojo.Drawer,published:{unstyled:{value:true,onchange:"mojoAttributeChanged",noInspect:true},titleToggleOpen:{value:true,noInspect:true},titleShowing:{value:true,noInspect:true},titleLabel:"Collapsible"},chrome:[{name:"titleContainer",type:"Container",h:40,w:"100%",showing:true,onclick:"titleClicked",controls:[{name:"titleLabel",h:"100%",w:"100%"}]},{name:"clientContainer",type:"Container",w:"100%",h:"100%",layoutKind:"vbox",scroll:false,controls:[{name:"client",type:"Container",w:"100%",layoutKind:"vbox",scroll:false}]}],ready:function(){this.inherited(arguments);this.titleLabelChanged();},titleLabelChanged:function(){var c=this.titleLabel;var es=(this.getOpen()?"expanded":"closed");var content='<table class="palm-divider collapsible" x-mojo-touch-feedback="delayed">'+'<tbody><tr>'+'<td class="left"></td>'+'<td class="label">'+c+'</td>'+'<td class="line" width="100%"></td>'+'<td><div id="'+this.globalId+'-arrow" class="palm-arrow-'+es+'"></div></td>'+'<td class="right"></td>'+'</tr>'+'</tbody></table>';this.$.titleLabel.setContent(content);this.arrowNode=kit.byId(this.globalId+"-arrow");},nodesRendered:function(){this.inherited(arguments);this.arrowNode=kit.byId(this.globalId+"-arrow");},doAnimation:function(inHeight){if(this.arrowNode){this.arrowNode.className="palm-arrow-"+(this.getOpen()?"expanded":"closed");}
this.inherited(arguments);}});
opus.Class("Palm.Mojo.RichTextEdit",{isa:Palm.Mojo.Widget,published:{value:{value:"Rich!",isModelData:true,onchange:"modelPropertyChanged"}},width:"100%",height:200,mojoClass:"RichTextEdit",getValue:function(){return this.fetchModelProperty("value");}});
opus.Class("Palm.Mojo.Header",{isa:opus.Control,mixins:[Palm.Mojo.ControlMixin],width:"100%",height:50,defaultStyles:{border:null},plane:2000,published:{content:{noExport:true,noInspect:true},label:{value:""}},create:function(){this.attributes={"class":"palm-header"};this.inherited(arguments);this.label=this.label||this.content;this.labelChanged();},modifyDomStyles:function(inStyles,inComputedStyles){inStyles.position=this.isDesigning()?inStyles.position:"fixed";inStyles["border-width"]=null;},labelChanged:function(){this.setContent(this.label);}});
opus.Class("Palm.Mojo.Group",{isa:Palm.Mojo.Panel,width:"100%",height:95,autoRows:true,published:{label:{value:"Label"}},chrome:[{name:"client",type:"Palm.Mojo.Container",layoutKind:"vbox",styles:{overflow:"hidden"},h:"100%",w:"100%",scroll:false}],create:function(){this.inherited(arguments);this.layoutKindChanged();this.heightChanged();},layoutKindChanged:function(){this.layout=opus.layoutRegistry.fetch("vbox");this.$.client.setLayoutKind(this.layoutKind);this.reflow();},getContent:function(){var id=this.globalId;var c=this.inherited(arguments);return'<div id="'+id+'-group" class="palm-group'+(this.label?'':' unlabeled')+'">'+
(this.label?'<div id="'+id+'-label" class="palm-group-title">'+this.label+'</div>':'')+'<div class="palm-list" id="'+id+'-content" style="height: '+this.fetchInternalHeight()+'px;">'+c+'</div>'+'</div>';},contentRendered:function(){this.inherited(arguments);this.contentNode=kit.byId(this.globalId+"-content");this.groupNode=kit.byId(this.globalId+"-group");this.labelNode=kit.byId(this.globalId+"-label");this.updateInternalHeight();},fetchInternalHeight:function(){return Math.max(0,this.$.client.getBounds().h-2);},updateInternalHeight:function(){if(this.contentNode){this.contentNode.style.height=this.fetchInternalHeight()+"px";}},heightChanged:function(){this.$.client.setHeight(this.getHeight()=="auto"?"auto":"100%")},labelChanged:function(){this.contentChanged();this.reflow();},getClientBounds:function(){var b=this.inherited(arguments);var th=this.label?24:0;b.t+=9+th;b.h-=th+19;b.l+=9;b.w-=18;return b;},boundsChanged:function(){if(this.getHeight()=="auto"){var th=this.label?24:0;this.bounds.h=Math.max(30,this.bounds.h);this.bounds.h+=19+th;}else{this.inherited(arguments);}},boundsRendered:function(){this.updateInternalHeight();},controlDropped:function(inChild,inDropInfo){var c=inChild;if(this.autoRows&&!(c instanceof Palm.Mojo.Container)){c=this.fetchAutoRow(c);c.parent.dropChild(c,inDropInfo);this.updateRows();}else{this.inherited(arguments);}
return inChild;},fetchAutoRow:function(inControl){var isTextField=(inControl instanceof Palm.Mojo.TextField);var r=this.createComponent({type:"Palm.Mojo.Row",isTextField:isTextField,height:"auto",dropTarget:true});r.renderNode();r.parentNode=null;inControl.setManager(r);inControl.reflowParent();if(inControl.node){r.$.client.insertNodeAt(inControl.node,0);}else{inControl.renderNode();inControl.parentNode=null;}
return r;},updateRows:function(){var c$=this.getControls();for(var i=0,c;c=c$[i];i++){if(c.getControls&&!c.getControls().length&&c instanceof Palm.Mojo.Row&&c.getHeight()=="auto"){c.destructor();}}}});
opus.Class("Palm.Mojo.Row",{isa:Palm.Mojo.Panel,scroll:false,defaultStyles:{overflow:"hidden"},width:"100%",height:52,published:{tapHighlight:{value:true,onchange:"contentChanged"},focusHighlight:{value:true,onchange:"contentChanged"},autoRowType:true,rowType:{value:"single",options:["single","first","middle","last"]},isTextField:false},chrome:[{name:"client",type:"Palm.Mojo.Container",h:"100%",w:"100%",styles:{overflow:"hidden"},layoutKind:"vbox",scroll:false}],create:function(){this.inherited(arguments);this.isTextFieldChanged();this.layoutKindChanged();this.heightChanged();},layoutKindChanged:function(){this.layout=opus.layoutRegistry.fetch(this.layoutKind=="relative"?"relative":"vbox");this.$.client.setLayoutKind(this.layoutKind);this.reflow();},isTextFieldChanged:function(){this.style.addRuntimeStyles({marginTop:0});this.style.addRuntimeStyles({paddingTop:this.isTextField?1:0});var cp=this.isTextField?10:0;this.$.client.style.addRuntimeStyles({paddingLeft:cp,paddingRight:cp});this.contentChanged();},getContent:function(){var c=this.inherited(arguments);var focusHighlight=this.focusHighlight?' x-mojo-focus-highlight="true"':'';var tapHighlight=this.tapHighlight?' x-mojo-touch-feedback="delayed"':'';var highlights=focusHighlight+tapHighlight;var sizeInfo=' id="'+this.globalId+'-sizeNode" style="height: '+this.fetchInternalHeight()+'px;"';if(this.isTextField){return'<div id="'+this.globalId+'-typeNode" class="palm-row '+this.rowType+'">'+'<div class="palm-row-wrapper textfield-group"'+highlights+'>'+'<div'+sizeInfo+' class="title">'+
c+'</div>'+'</div>'+'</div>';}else{return'<div id="'+this.globalId+'-typeNode" class="palm-row '+this.rowType+'"'+highlights+'>'+'<div'+sizeInfo+' class="palm-row-wrapper">'+
c+'</div>'+'</div>';}},contentRendered:function(){this.inherited(arguments);this.sizeNode=kit.byId(this.globalId+"-sizeNode");this.typeNode=kit.byId(this.globalId+"-typeNode");this.updateInternalHeight();},boundsRendered:function(){this.inherited(arguments);if(this.autoRowType&&this.parent){this.doAutoRowType();}
this.updateInternalHeight();},doAutoRowType:function(){var c$=this.parent.getControls();var type=c$.length==1?"single":(this==c$[0]?"first":(this==c$[c$.length-1]?"last":"middle"));this.setRowType(type);},rowTypeChanged:function(){if(this.typeNode){this.typeNode.className="palm-row "+this.rowType;}},fetchInternalHeight:function(){return this.$.client.getBounds().h;},updateInternalHeight:function(){if((this.layoutKind!="relative")&&this.sizeNode){this.sizeNode.style.height=this.fetchInternalHeight()+"px";}},heightChanged:function(){this.$.client.setHeight(this.getHeight()=="auto"?"auto":(this.layoutKind=="relative"?null:"100%"));this.updateInternalHeight();}});
opus.Class("Palm.Mojo.PageHeader",{isa:opus.Control,mixins:[Palm.Mojo.ControlMixin],width:"100%",height:52,defaultStyles:{borderStyle:"none",overflow:"hidden"},published:{content:{noInspect:true,noExport:true},title:{value:"Title",onchange:"contentChanged"},subtitle:{value:"Subtitle",onchange:"contentChanged"},multiline:{value:false,onchange:"contentChanged"},icon:{value:"",onchange:"contentChanged",editor:{editorKind:"ImagePathEditor"}},html:{value:"",onchange:"contentChanged"}},iconSize:32,getContent:function(){return'<div class="palm-page-header '+(this.multiline?"multi-line":"")+'">'+'<div class="palm-page-header-wrapper">'+
this.generateHeaderContent()+'</div>'+'</div>';},generateHeaderContent:function(){if(this.html){return this.html;}else{var tbm=Math.max(Math.floor((52-this.iconSize)/2),0);var rlm=Math.max(Math.floor((56-this.iconSize)/2),0);var iconStyle='margin: '+tbm+'px '+rlm+'px; height: '+this.iconSize+'px; width: '+this.iconSize+'px;';var icon=this.icon?'<div class="icon" style="background: none;"><img style="'+iconStyle+'" src="'
+this.rewritePath(this.icon)+'"></div>':"";return icon+'<div class="title'+(this.icon?"":" left")+'">'+this.title+'</div>'+
(this.subtitle&&this.multiline?'<div class="subtitle">'+this.subtitle+'</div>':"");}}});
opus.Class("Palm.Mojo.ProgressBar",{isa:Palm.Mojo.Widget,published:{progress:{value:0.5,isModelData:true,modelPropertyName:"progressPropertyName"},progressPropertyName:{value:"progress",model:true},title:{value:"Progress",isModelData:true,onchange:"modelPropertyChanged"},image:{value:"",isModelData:true,onchange:"modelPropertyChanged"},icon:{value:"",onchange:"mojoAttributeChanged"},iconPath:{value:"",onchange:"mojoAttributeChanged"},onprogressicontap:{event:Mojo.Event.progressIconTap+"Handler"},onprogresscomplete:{event:Mojo.Event.progressComplete+"Handler"}},width:"100%",height:34,minHeight:34,maxHeight:34,defaultStyles:{margin:12},mojoClass:"ProgressBar",create:function(){this.inherited(arguments);this.progressPropertyNameChanged();this.mojoAttributeChanged("icon");this.mojoAttributeChanged("iconPath");},getTitle:function(){return this.fetchModelProperty("title");},getProgress:function(){return this.fetchModelProperty(this.progressPropertyName,this.progress);},getImage:function(){return this.fetchModelProperty("image");},progressChanged:function(){this.modelPropertyChanged(this.progressPropertyName,this.progress);},progressPropertyNameChanged:function(){this.mojoAttributeChanged("modelProperty",this.progressPropertyName);}});
opus.Class("Palm.Mojo.ProgressSlider",{isa:Palm.Mojo.Widget,published:{slider:{value:30,isModelData:true,modelPropertyName:"sliderPropertyName"},sliderPropertyName:{value:"slider",model:true},progress:{value:0.5,isModelData:true,modelPropertyName:"progressPropertyName"},progressPropertyName:{value:"progress",model:true},progressStartValue:{value:0,isModelData:true,modelPropertyName:"progressStartValuePropertyName"},progressStartValuePropertyName:{value:"progressStart",model:true},minValue:{value:0,isModelData:true,onchange:"modelPropertyChanged"},maxValue:{value:100,isModelData:true,onchange:"modelPropertyChanged"},round:{value:true,onchange:"mojoAttributeChanged"},updateInterval:{value:0,onchange:"mojoAttributeChanged"},cancellable:{value:false,onchange:"mojoAttributeChanged"},onchange:{event:Mojo.Event.propertyChange+"Handler"},onprogressComplete:{event:Mojo.Event.progressComplete+"Handler"},},defaultStyles:{margin:12,overflow:"visible"},width:"100%",height:34,minHeight:34,maxHeight:34,mojoClass:"ProgressSlider",create:function(){this.attributes={"class":"stream-buffer-bar"};this.inherited(arguments);this.sliderPropertyNameChanged();this.progressPropertyNameChanged();this.progressStartValuePropertyNameChanged();this.mojoAttributeChanged("cancellable");this.mojoAttributeChanged("round");this.mojoAttributeChanged("updateInterval");},getSlider:function(){return this.fetchModelProperty(this.sliderPropertyName,this.slider);},sliderChanged:function(){this.modelPropertyChanged(this.sliderPropertyName,this.slider);},sliderPropertyNameChanged:function(){this.mojoAttributeChanged("sliderProperty",this.sliderPropertyName);},getProgress:function(){return this.fetchModelProperty(this.progressPropertyName,this.progress);},progressChanged:function(){this.modelPropertyChanged(this.progressPropertyName,this.progress);},progressPropertyNameChanged:function(){this.mojoAttributeChanged("progressProperty",this.progressPropertyName);},getProgressStartValue:function(){return this.fetchModelProperty(this.progressStartValuePropertyName,this.progressStartValue);},progressStartValueChanged:function(){this.modelPropertyChanged(this.progressStartValuePropertyName,this.progressStartValue);},progressStartValuePropertyNameChanged:function(){this.mojoAttributeChanged("progressStartProperty",this.progressStartValuePropertyName);},getMinValue:function(){return this.fetchModelProperty("minValue");},getMaxValue:function(){return this.fetchModelProperty("maxValue");}});
opus.Class("Palm.Mojo.FilterField",{isa:Palm.Mojo.Widget,published:{disabled:{value:false,isModelData:true,modelPropertyName:"disabledPropertyName"},disabledPropertyName:{value:"disabled",model:true},delay:{value:300,onchange:"mojoAttributeChanged"},onfilter:{event:Mojo.Event.filter+"Handler"},onfilterImmediate:{event:Mojo.Event.filterImmediate+"Handler"}},width:"100%",mojoClass:"FilterField",height:0,minHeight:0,maxHeight:0,create:function(){this.inherited(arguments);this.content="";this.mojoAttributeChanged("delay");this.disabledPropertyNameChanged();},nodeRendered:function(){if(this.isDesigning()){opus.Control.prototype.nodeRendered.call(this);}else{this.inherited(arguments);}},disabledPropertyNameChanged:function(){this.mojoAttributeChanged("disabledProperty",this.disabledPropertyName);},disabledChanged:function(){this.modelPropertyChanged(this.disabledPropertyName,this.disabled);},boundsChanged:function(){this.bounds.h=0;this.inherited(arguments);}});
opus.Class("Palm.Mojo.StatusIndicator",{isa:opus.Control,mixins:[Palm.Mojo.ControlMixin],width:36,height:36,published:{statusType:{value:"status-available",onchange:"attributesChanged",options:["status-available","status-available partial","status-away","status-busy","status-busy partial","status-idle","status-offline"]}},modifyDomAttributes:function(inAttributes){inAttributes.className="icon "+this.statusType;}});
opus.Class("Palm.Mojo.AccountIcon",{isa:opus.Control,mixins:[Palm.Mojo.ControlMixin],width:60,height:60,published:{accountType:{value:"aim",onchange:"attributesChanged",options:["aim","aol","eas","facebook","favorites","generic","google","googletalk","linkedin","local","msn","photobucket","sim","youtube","yahoo"]},size:{value:"small",onchange:"attributesChanged",options:["small","medium"]}},modifyDomAttributes:function(inAttributes){inAttributes.className="icon palm-account-icon "+this.accountType+(this.size=="medium"?" medium":"");}});
opus.Class("Palm.Mojo.FlickrSearchField",{isa:Palm.Mojo.Group,isa:opus.Container,mixins:[Palm.Mojo.ControlMixin],dropTarget:true,width:"100%",height:100,layoutKind:"vbox",controls:[{name:"group1",hint:"",dropTarget:true,label:"Search Filter",type:"Palm.Mojo.Group",l:0,t:63,controls:[{name:"row1",isTextField:true,type:"Palm.Mojo.Row",l:0,t:0,h:"auto",controls:[{name:"searchField",hint:"search filter",hintText:"search filter",type:"Palm.Mojo.TextField"}]}]}]});opus.Class("Palm.Mojo.FlickrList",{isa:opus.Container,mixins:[Palm.Mojo.ControlMixin],dropTarget:true,width:"100%",height:"100%",layoutKind:"vbox",controls:[{name:"scroller1",type:"Palm.Mojo.Scroller",l:0,t:158,h:"100%",styles:{cursor:"move"},controls:[{name:"photoList",dropTarget:true,ontap:"photoListTap",onflick:"",items:[{item:0,label:"Zero",value:0},{item:1,label:"One",value:1},{item:2,label:"Two",value:2},{item:3,label:"Three",value:3}],title:undefined,swipeToDelete:false,onlisttap:"photoListListtap",type:"Palm.Mojo.List",l:0,t:0,h:236,controls:[{name:"html1",content:"<div class='result palm-row' x-mojo-tap-highlight='momentary'>\n    <div class=\"palm-row-wrapper\">\n        <div class=\"title\">\n            <div class=\"picture-container\">\n                <div id=\"picture\" class=\"picture-icon\">\n                    <img src=\"#{photoUrl_t}\"/>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>",type:"Palm.Mojo.Html",l:0,t:0}]}]}]});opus.Class("Palm.Mojo.FlickrService",{isa:opus.Component,designDrop:function(){var stub="searchButtonTap: function(inSender) {\n\
\t\tthis.showSpinner(true);\n\
\t\tvar searchFilter = this.$.searchField.fetchModelProperty(\"value\");\n\
\t\tvar queryString = (searchFilter ? \"&text=\" + searchFilter :\"\");\n\
\t\tvar url = \"http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=ee865d1ddda4c60b504be0cb8c967033\" + queryString + \"&format=json&nojsoncallback=1&per_page=20\";\n\
\t\tvar onComplete = function(transport) {\n\
\t\t\tvar photos = transport.responseJSON.photos.photo;\n\
\t\t\tfor (var i=0, p; p = photos[i]; i++) {\n\
\t\t\t\tp.photoUrl_t = \"http://farm\" + p.farm + \".static.flickr.com/\" + p.server + \"/\" + p.id + \"_\" + p.secret + \"_s.jpg\"\n\
\t\t\t\tp.photoUrl = \"http://farm\" + p.farm + \".static.flickr.com/\" + p.server + \"/\" + p.id + \"_\" + p.secret + \".jpg\"\n\
\t\t\t}\n\
\t\t\tthis.listModel = {\n\
\t\t\t\titems: photos\n\
\t\t\t};\n\
\t\t\tthis.controller.setWidgetModel(\"photoList\", this.listModel);\n\
\t\t\tthis.showSpinner(false);\n\
\t\t}.bind(this);\n\
\t\tvar onFailure = function(transport) {\n\
\t\t\tthis.showSpinner(false);\n\
\t\t};\n\
\t\tthis.request(url, onComplete, onFailure);\n\
\t},\n\
\trequest: function(url, onComplete, onFailure) {\n\
\t\tvar myAjax = new Ajax.Request(url, {\n\
\t\t\tmethod: \"get\",\n\
\t\t\tevalJSON: 'force',\n\
\t\t\tcontentType: 'application/x-www-form-urlencoded',\n\
\t\t\trequestHeaders: {\n\
\t\t\t\t\"USER_AGENT\": navigator.userAgent\n\
\t\t\t},\n\
\t\t\tonComplete: onComplete,\n\
\t\t\t\tonFailure: onFailure\n\
\t\t});\n\
\t},\n\
\tshowSpinner: function(show) {\n\
\t\tthis.controller.get('searchButton').mojo[(show ? 'activate' : 'deactivate')]();\n\
\t},\n\
\tphotoListListtap: function(inSender, inEvent) {\n\
\t\tvar p = this.listModel.items[inEvent.index];\n\
\t\tthis.controller.stageController.pushScene('first', p);\n\
\t}";var ide=opus.ide;ide.openLinkedCodeDocument();var c=ide.$.code;c.find({which:"last",string:"}"});var row=c.movePrevTextRow();var rowText=c.fetchRowText();stub=(rowText.match(",$")?"":",")+"\n\t"+stub;c.moveToLineEnd();c.insertAtCursor(stub);c.moveCursorUp();c.moveToLineEnd();ide.document.save();}});opus.Class("Palm.Mojo.FlickrImageViewService",{isa:opus.Component,designDrop:function(){var stub="function FirstAssistant(photo) {\n\
\nthis.photo = photo;\n\
}\n\n\
FirstAssistant.prototype = {\n\
\tsetup: function() {\n\
\t\tAres.setupSceneAssistant(this);\n\
\t},\n\
\tcleanup: function() {\n\
\t\tAres.cleanupSceneAssistant(this);\n\
\t},\n\
\tactivate: function() {\n\
\t\tthis.controller.get(\"photoView\").mojo.centerUrlProvided(this.photo.photoUrl);\n\
\t}\n\
};";var ide=opus.ide;ide.openLinkedCodeDocument();var c=ide.$.code;c.setScript(stub);ide.document.save();}});
opus.Class("Palm.Picture",{isa:opus.Picture,src:"",mixins:[Palm.Mojo.ControlMixin]});
opus.Class("Palm.Mojo.Divider",{isa:Palm.Mojo.Html,width:"100%",height:34,published:{content:{noExport:true,noInspect:true},templateFile:{noInspect:true},label:{value:"Label",isModelData:true,modelPropertyName:"labelPropertyName"},labelPropertyName:{value:"label",model:true},kind:{value:"text",options:["text","blank","alpha"],onchange:"contentChanged"}},getLabel:function(){return this.fetchModelProperty(this.labelPropertyName,this.label);},labelChanged:function(){this.modelPropertyChanged(this.labelPropertyName,this.label);if(!this.isRendering()){this.updateInlineTemplate();}},labelPropertyNameChanged:function(){this.updateInlineTemplate();},fetchInlineTemplate:function(){var c="#{"+this.labelPropertyName+"}";switch(this.kind){case"text":return'<table class="palm-divider labeled"><tbody>'+'<tr><td class="left"></td>'+'<td class="label">'+c+'</td>'+'<td class="right"></td>'+'</tr></tbody></table>';case"blank":return'<div class="palm-divider solid"></div>';case"alpha":return'<div class="palm-divider alpha" style="overflow: hidden;">'+'<div>'+c+'</div>'+'</div>';}}});
opus.Mojo=Palm.Mojo;